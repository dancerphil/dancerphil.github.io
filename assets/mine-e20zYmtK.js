import{__toESM as e}from"./chunk-Cm89lFXu.js";import{Fragment as t,jsx as n,jsxs as r,require_client as i,require_react as a}from"./emotion-react-jsx-runtime.browser.esm-Bd7bVhIu.js";import"./styles-BKjnqpKe.js";import{require_classnames as o}from"./classnames-CRB6Vj9Y.js";import{createMappedRegion as s,createRegion as c}from"./createRegion-Bgz56psz.js";import{_ListCache_default as l,_MapCache_default as u,_Map_default as d,_SetCache_default as f,_Symbol_default as p,_arrayMap_default as m,_baseGetTag_default as h,_baseUnary_default as g,_cacheHas_default as _,_freeGlobal_default as v,_getNative_default as y,_root_default as b,_toSource_default as x,eq_default as ee,identity_default as te,isArrayLike_default as ne,isLength_default as re,isObjectLike_default as S,isObject_default as ie}from"./_cacheHas-DKtwybe4.js";var ae=`[object Symbol]`;function oe(e){return typeof e==`symbol`||S(e)&&h(e)==ae}var C=oe,se=Array.isArray,w=se,ce=1/0,le=p?p.prototype:void 0,ue=le?le.toString:void 0;function de(e){if(typeof e==`string`)return e;if(w(e))return m(e,de)+``;if(C(e))return ue?ue.call(e):``;var t=e+``;return t==`0`&&1/e==-ce?`-0`:t}var fe=de,pe=y(b,`WeakMap`),T=pe,me=9007199254740991,he=/^(?:0|[1-9]\d*)$/;function ge(e,t){var n=typeof e;return t??=me,!!t&&(n==`number`||n!=`symbol`&&he.test(e))&&e>-1&&e%1==0&&e<t}var _e=ge,ve=Object.prototype;function ye(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||ve;return e===n}var be=ye;function xe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Se=xe,Ce=`[object Arguments]`;function we(e){return S(e)&&h(e)==Ce}var Te=we,Ee=Object.prototype,De=Ee.hasOwnProperty,Oe=Ee.propertyIsEnumerable,ke=Te(function(){return arguments}())?Te:function(e){return S(e)&&De.call(e,`callee`)&&!Oe.call(e,`callee`)},Ae=ke;function je(){return!1}var Me=je,Ne=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Pe=Ne&&typeof module==`object`&&module&&!module.nodeType&&module,Fe=Pe&&Pe.exports===Ne,Ie=Fe?b.Buffer:void 0,Le=Ie?Ie.isBuffer:void 0,Re=Le||Me,ze=Re,Be=`[object Arguments]`,Ve=`[object Array]`,He=`[object Boolean]`,Ue=`[object Date]`,We=`[object Error]`,Ge=`[object Function]`,Ke=`[object Map]`,qe=`[object Number]`,Je=`[object Object]`,Ye=`[object RegExp]`,Xe=`[object Set]`,Ze=`[object String]`,Qe=`[object WeakMap]`,$e=`[object ArrayBuffer]`,et=`[object DataView]`,tt=`[object Float32Array]`,nt=`[object Float64Array]`,rt=`[object Int8Array]`,it=`[object Int16Array]`,at=`[object Int32Array]`,ot=`[object Uint8Array]`,st=`[object Uint8ClampedArray]`,ct=`[object Uint16Array]`,lt=`[object Uint32Array]`,E={};E[tt]=E[nt]=E[rt]=E[it]=E[at]=E[ot]=E[st]=E[ct]=E[lt]=!0,E[Be]=E[Ve]=E[$e]=E[He]=E[et]=E[Ue]=E[We]=E[Ge]=E[Ke]=E[qe]=E[Je]=E[Ye]=E[Xe]=E[Ze]=E[Qe]=!1;function ut(e){return S(e)&&re(e.length)&&!!E[h(e)]}var dt=ut,ft=typeof exports==`object`&&exports&&!exports.nodeType&&exports,D=ft&&typeof module==`object`&&module&&!module.nodeType&&module,pt=D&&D.exports===ft,O=pt&&v.process,mt=function(){try{var e=D&&D.require&&D.require(`util`).types;return e||O&&O.binding&&O.binding(`util`)}catch{}}(),ht=mt,gt=ht&&ht.isTypedArray,_t=gt?g(gt):dt,vt=_t,yt=Object.prototype,bt=yt.hasOwnProperty;function xt(e,t){var n=w(e),r=!n&&Ae(e),i=!n&&!r&&ze(e),a=!n&&!r&&!i&&vt(e),o=n||r||i||a,s=o?Se(e.length,String):[],c=s.length;for(var l in e)(t||bt.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||_e(l,c)))&&s.push(l);return s}var St=xt;function Ct(e,t){return function(n){return e(t(n))}}var wt=Ct,Tt=wt(Object.keys,Object),Et=Tt,Dt=Object.prototype,Ot=Dt.hasOwnProperty;function kt(e){if(!be(e))return Et(e);var t=[];for(var n in Object(e))Ot.call(e,n)&&n!=`constructor`&&t.push(n);return t}var At=kt;function jt(e){return ne(e)?St(e):At(e)}var Mt=jt,Nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/;function Ft(e,t){if(w(e))return!1;var n=typeof e;return n==`number`||n==`symbol`||n==`boolean`||e==null||C(e)?!0:Pt.test(e)||!Nt.test(e)||t!=null&&e in Object(t)}var k=Ft,It=`Expected a function`;function A(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(It);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(A.Cache||u),n}A.Cache=u;var Lt=A,Rt=500;function zt(e){var t=Lt(e,function(e){return n.size===Rt&&n.clear(),e}),n=t.cache;return t}var Bt=zt,Vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/\\(\\)?/g,Ut=Bt(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(Vt,function(e,n,r,i){t.push(r?i.replace(Ht,`$1`):n||e)}),t}),Wt=Ut;function Gt(e){return e==null?``:fe(e)}var Kt=Gt;function qt(e,t){return w(e)?e:k(e,t)?[e]:Wt(Kt(e))}var Jt=qt,Yt=1/0;function Xt(e){if(typeof e==`string`||C(e))return e;var t=e+``;return t==`0`&&1/e==-Yt?`-0`:t}var j=Xt;function Zt(e,t){t=Jt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[j(t[n++])];return n&&n==r?e:void 0}var Qt=Zt;function $t(e,t,n){var r=e==null?void 0:Qt(e,t);return r===void 0?n:r}var en=$t;function tn(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var nn=tn;function rn(){this.__data__=new l,this.size=0}var an=rn;function on(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var sn=on;function cn(e){return this.__data__.get(e)}var ln=cn;function un(e){return this.__data__.has(e)}var dn=un,fn=200;function pn(e,t){var n=this.__data__;if(n instanceof l){var r=n.__data__;if(!d||r.length<fn-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new u(r)}return n.set(e,t),this.size=n.size,this}var mn=pn;function M(e){var t=this.__data__=new l(e);this.size=t.size}M.prototype.clear=an,M.prototype.delete=sn,M.prototype.get=ln,M.prototype.has=dn,M.prototype.set=mn;var N=M;function hn(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var gn=hn;function _n(){return[]}var vn=_n,yn=Object.prototype,bn=yn.propertyIsEnumerable,xn=Object.getOwnPropertySymbols,Sn=xn?function(e){return e==null?[]:(e=Object(e),gn(xn(e),function(t){return bn.call(e,t)}))}:vn,Cn=Sn;function wn(e,t,n){var r=t(e);return w(e)?r:nn(r,n(e))}var Tn=wn;function En(e){return Tn(e,Mt,Cn)}var Dn=En,On=y(b,`DataView`),P=On,kn=y(b,`Promise`),F=kn,An=y(b,`Set`),I=An,jn=`[object Map]`,Mn=`[object Object]`,Nn=`[object Promise]`,Pn=`[object Set]`,Fn=`[object WeakMap]`,In=`[object DataView]`,Ln=x(P),Rn=x(d),zn=x(F),Bn=x(I),Vn=x(T),L=h;(P&&L(new P(new ArrayBuffer(1)))!=In||d&&L(new d)!=jn||F&&L(F.resolve())!=Nn||I&&L(new I)!=Pn||T&&L(new T)!=Fn)&&(L=function(e){var t=h(e),n=t==Mn?e.constructor:void 0,r=n?x(n):``;if(r)switch(r){case Ln:return In;case Rn:return jn;case zn:return Nn;case Bn:return Pn;case Vn:return Fn}return t});var Hn=L,Un=b.Uint8Array,Wn=Un;function Gn(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}var R=Gn;function Kn(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var qn=Kn,Jn=1,Yn=2;function Xn(e,t,n,r,i,a){var o=n&Jn,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,p=!0,m=n&Yn?new f:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var h=e[d],g=t[d];if(r)var v=o?r(g,h,d,t,e,a):r(h,g,d,e,t,a);if(v!==void 0){if(v)continue;p=!1;break}if(m){if(!qn(t,function(e,t){if(!_(m,t)&&(h===e||i(h,e,n,r,a)))return m.push(t)})){p=!1;break}}else if(!(h===g||i(h,g,n,r,a))){p=!1;break}}return a.delete(e),a.delete(t),p}var Zn=Xn;function Qn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var $n=Qn;function er(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var tr=er,nr=1,rr=2,ir=`[object Boolean]`,ar=`[object Date]`,or=`[object Error]`,sr=`[object Map]`,cr=`[object Number]`,lr=`[object RegExp]`,ur=`[object Set]`,dr=`[object String]`,fr=`[object Symbol]`,pr=`[object ArrayBuffer]`,mr=`[object DataView]`,hr=p?p.prototype:void 0,z=hr?hr.valueOf:void 0;function gr(e,t,n,r,i,a,o){switch(n){case mr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pr:return!(e.byteLength!=t.byteLength||!a(new Wn(e),new Wn(t)));case ir:case ar:case cr:return ee(+e,+t);case or:return e.name==t.name&&e.message==t.message;case lr:case dr:return e==t+``;case sr:var s=$n;case ur:var c=r&nr;if(s||=tr,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=rr,o.set(e,t);var u=Zn(s(e),s(t),r,i,a,o);return o.delete(e),u;case fr:if(z)return z.call(e)==z.call(t)}return!1}var _r=gr,vr=1,yr=Object.prototype,br=yr.hasOwnProperty;function xr(e,t,n,r,i,a){var o=n&vr,s=Dn(e),c=s.length,l=Dn(t),u=l.length;if(c!=u&&!o)return!1;for(var d=c;d--;){var f=s[d];if(!(o?f in t:br.call(t,f)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var h=!0;a.set(e,t),a.set(t,e);for(var g=o;++d<c;){f=s[d];var _=e[f],v=t[f];if(r)var y=o?r(v,_,f,t,e,a):r(_,v,f,e,t,a);if(!(y===void 0?_===v||i(_,v,n,r,a):y)){h=!1;break}g||=f==`constructor`}if(h&&!g){var b=e.constructor,x=t.constructor;b!=x&&`constructor`in e&&`constructor`in t&&!(typeof b==`function`&&b instanceof b&&typeof x==`function`&&x instanceof x)&&(h=!1)}return a.delete(e),a.delete(t),h}var Sr=xr,Cr=1,wr=`[object Arguments]`,Tr=`[object Array]`,B=`[object Object]`,Er=Object.prototype,Dr=Er.hasOwnProperty;function Or(e,t,n,r,i,a){var o=w(e),s=w(t),c=o?Tr:Hn(e),l=s?Tr:Hn(t);c=c==wr?B:c,l=l==wr?B:l;var u=c==B,d=l==B,f=c==l;if(f&&ze(e)){if(!ze(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new N,o||vt(e)?Zn(e,t,n,r,i,a):_r(e,t,c,n,r,i,a);if(!(n&Cr)){var p=u&&Dr.call(e,`__wrapped__`),m=d&&Dr.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new N,i(h,g,n,r,a)}}return f?(a||=new N,Sr(e,t,n,r,i,a)):!1}var kr=Or;function Ar(e,t,n,r,i){return e===t?!0:e==null||t==null||!S(e)&&!S(t)?e!==e&&t!==t:kr(e,t,n,r,Ar,i)}var jr=Ar,Mr=1,Nr=2;function Pr(e,t,n,r){var i=n.length,a=i,o=!r;if(e==null)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=n[i];var c=s[0],l=e[c],u=s[1];if(o&&s[2]){if(l===void 0&&!(c in e))return!1}else{var d=new N;if(r)var f=r(l,u,c,e,t,d);if(!(f===void 0?jr(u,l,Mr|Nr,r,d):f))return!1}}return!0}var Fr=Pr;function Ir(e){return e===e&&!ie(e)}var Lr=Ir;function Rr(e){for(var t=Mt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Lr(i)]}return t}var zr=Rr;function Br(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Vr=Br;function Hr(e){var t=zr(e);return t.length==1&&t[0][2]?Vr(t[0][0],t[0][1]):function(n){return n===e||Fr(n,e,t)}}var Ur=Hr;function Wr(e,t){return e!=null&&t in Object(e)}var Gr=Wr;function Kr(e,t,n){t=Jt(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=j(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&re(i)&&_e(o,i)&&(w(e)||Ae(e)))}var qr=Kr;function Jr(e,t){return e!=null&&qr(e,t,Gr)}var Yr=Jr,Xr=1,Zr=2;function Qr(e,t){return k(e)&&Lr(t)?Vr(j(e),t):function(n){var r=en(n,e);return r===void 0&&r===t?Yr(n,e):jr(t,r,Xr|Zr)}}var $r=Qr;function ei(e){return function(t){return t?.[e]}}var ti=ei;function ni(e){return function(t){return Qt(t,e)}}var ri=ni;function ii(e){return k(e)?ti(j(e)):ri(e)}var ai=ii;function oi(e){return typeof e==`function`?e:e==null?te:typeof e==`object`?w(e)?$r(e[0],e[1]):Ur(e):ai(e)}var si=oi;function ci(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==void 0&&(n=n===void 0?a:n+a)}return n}var li=ci;function ui(e,t){return e&&e.length?li(e,si(t,2)):0}var V=ui;const di=window.innerWidth,fi=window.innerHeight,H=20,U=Math.floor(di/H),W=Math.floor(fi*.95/U),pi=H*W,mi=Math.floor(pi*.2),G=3,hi={width:H*U,height:W*U},gi={width:U,height:U},_i={width:U*3,height:U*3},K=[];for(let e=0;e<W;e++)for(let t=0;t<H;t++)K.push({x:t,y:e});const vi=e=>{e.mark=!0},q=e=>{if(e.reveal)return;if(e.reveal=!0,e.mine)throw e.mark=!0,Error(`失败`);let{label:t}=e;t===0&&Z(e).forEach(q)},yi=e=>{let{mark:t,reveal:n}=e;t&&t.forEach(vi),n&&n.forEach(q)},bi=e=>{let t=R(e.map(e=>e.mark)).flat(),n=R(e.map(e=>e.reveal)).flat();return{mark:t,reveal:n}},xi=e=>e.reveal&&e.mine||!e.reveal?1:0,Si=e=>{if(e.mine)return{};let t=Z(e);return V(t,xi)===e.label?{mark:t.filter(e=>!e.reveal)}:G>=1&&V(t,e=>e.mark?1:0)===e.label?{reveal:t.filter(e=>!e.mark)}:{}},J=s(),Y=J.getValue,Ci=J.useValue,wi=J.set,X=()=>R(K.map(Y)),Z=e=>{let{x:t,y:n}=e,r=[Y({x:t-1,y:n-1}),Y({x:t-1,y:n}),Y({x:t-1,y:n+1}),Y({x:t,y:n-1}),Y({x:t,y:n+1}),Y({x:t+1,y:n-1}),Y({x:t+1,y:n}),Y({x:t+1,y:n+1})];return R(r)},Ti=()=>{K.forEach(({x:e,y:t})=>{let n={x:e,y:t,mine:!1,reveal:!1,mark:!1,label:0};wi({x:e,y:t},n)})};Ti();const Ei=c(0),Di=()=>Ei.set(e=>e+1),Oi=Ei.useValue,ki=`_block_16us8_1`;var Ai={block:ki};const ji=`_cover_1hi80_1`,Mi=`_reveal_1hi80_6`,Ni=`_mine_1hi80_11`,Pi=`_mark_1hi80_15`,Fi=`_label0_1hi80_19`,Ii=`_label1_1hi80_23`,Li=`_label2_1hi80_27`,Ri=`_label3_1hi80_31`,zi=`_label4_1hi80_35`,Bi=`_label5_1hi80_39`,Vi=`_label6_1hi80_43`,Hi=`_label7_1hi80_43`,Ui=`_label8_1hi80_43`;var Q={cover:ji,reveal:Mi,mine:Ni,mark:Pi,label0:Fi,label1:Ii,label2:Li,label3:Ri,label4:zi,label5:Bi,label6:Vi,label7:Hi,label8:Ui},Wi=e(o());const Gi=({coordinate:e})=>{let t=Ci(e);if(!t)return null;let{mine:r,reveal:i,mark:a,label:o}=t;if(!i){let e=(0,Wi.default)(Ai.block,Q.cover,{[Q.mark]:a});return n(`div`,{className:e,style:gi,children:a&&`m`})}let s=(0,Wi.default)(Ai.block,Q.reveal,{[Q[`label${o}`]]:!r,[Q.mine]:r});return n(`div`,{className:s,style:gi,children:r?`!`:o})};var Ki=Gi;const qi=`_content_1mign_1`,Ji=`_panel_1mign_11`,Yi=`_header_1mign_17`;var Xi={content:qi,panel:Ji,header:Yi};let Zi=!1;const Qi=()=>{X().forEach(e=>{e.reveal=!1,e.mark=!1}),Zi=!1,Di()};Qi();const $i=()=>{X().forEach(e=>{e.mine=!1});let e=0;for(;e<mi;){let t=Math.floor(Math.random()*H),n=Math.floor(Math.random()*W),r=Y({x:t,y:n});r.mine||(r.mine=!0,e++)}X().forEach(e=>{let t=Z(e);e.label=V(t,`mine`)})},ea=e=>{for(let t=0;t<100;t++)if($i(),!e.mine&&e.label===0)return},ta=e=>{let t=Si(e);yi(t)},na=e=>{let t=Y(e);if(!t||t.mark)return;Zi||(ea(t),Zi=!0);let{reveal:n}=t;if(n?ta(t):(q(t),G>=2&&ta(t)),G>=3){let e=Z(t).filter(e=>e.reveal).map(Si),n=bi(e);yi(n)}},ra=e=>{try{na(e)}catch(e){console.error(e)}finally{Di()}};var $=e(a());const ia=c(),aa=ia.useValue,oa=e=>{ia.set(t=>!t||t.x!==e.x||t.y!==e.y?e:t)},sa=ia.reset,ca=(e,t,n)=>{let r=e.getBoundingClientRect(),i=t-r.left+e.scrollLeft,a=n-r.top+e.scrollTop,o=Math.floor(i/U),s=Math.floor(a/U);return{x:o,y:s}},la=e=>t=>{t.preventDefault();let n=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY;e({clientX:n,clientY:r})},ua=(e,t)=>n=>{let r=n.clientX,i=n.clientY;t&&!n.buttons||e({clientX:r,clientY:i})},da=e=>((0,$.useEffect)(()=>{let t=e.current;if(!t)return;let n=({clientX:e,clientY:n})=>{let r=ca(t,e,n);oa(r)},r=la(n),i=ua(n),a=({clientX:e,clientY:n})=>{let r=ca(t,e,n);oa(r),ra(r)},o=la(a),s=ua(a,!0),c=({clientX:e,clientY:n})=>{let r=ca(t,e,n);ra(r),sa()},l=la(c),u=ua(c);return document.body.addEventListener(`touchstart`,r),document.body.addEventListener(`mousedown`,i),document.body.addEventListener(`touchmove`,o,{passive:!1}),document.body.addEventListener(`mousemove`,s),document.body.addEventListener(`touchend`,l),document.body.addEventListener(`mouseup`,u),()=>{document.body.removeEventListener(`touchstart`,r),document.body.removeEventListener(`mousedown`,i),document.body.removeEventListener(`touchmove`,o),document.body.removeEventListener(`mousemove`,s),document.body.removeEventListener(`touchend`,l),document.body.removeEventListener(`mouseup`,u)}},[e]),e);var fa=da;const pa=`_castRange_17m5f_1`;var ma={castRange:pa};function ha(){let e=aa();if(G<3||!e)return null;let{x:t,y:r}=e;return n(`div`,{className:ma.castRange,style:{..._i,left:(t-1)*U,top:(r-1)*U}})}var ga=(0,$.memo)(ha);const _a=()=>{Oi();let e=(0,$.useRef)(null);fa(e);let i=X();return r(t,{children:[n(`div`,{className:Xi.header,onMouseUp:Qi,onTouchEnd:Qi,children:i.filter(e=>e.mine&&!e.mark).length}),n(`div`,{className:Xi.content,children:r(`div`,{className:Xi.panel,style:hi,ref:e,children:[K.map(e=>n(Ki,{coordinate:e},`${e.x}-${e.y}`)),n(ga,{})]})})]})};var va=e(i());const ya=(0,va.createRoot)(document.body);ya.render(n(_a,{}));