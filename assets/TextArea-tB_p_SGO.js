import{a as e}from"./chunk-DHjUg-A5.js";import{_ as t}from"./emotion-react-jsx-runtime.browser.esm-DaEj45wX.js";import{It as n,Pt as r,_t as i,c as a,d as o,t as s,yt as c,z as l}from"./useSize-Ci08MEIi.js";import{K as u,T as d,_ as f,j as p,n as ee,q as m}from"./ContextIsolator-BQppaQnc.js";import{_ as te,a as h,b as g,g as _,h as v,i as y,o as b,r as x,u as S,v as C,y as w}from"./Input-B95XuSA-.js";var T=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,E=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`font-variant`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`,`word-break`,`white-space`],D={},O;function k(e,t=!1){let n=e.getAttribute(`id`)||e.getAttribute(`data-reactid`)||e.getAttribute(`name`);if(t&&D[n])return D[n];let r=window.getComputedStyle(e),i=r.getPropertyValue(`box-sizing`)||r.getPropertyValue(`-moz-box-sizing`)||r.getPropertyValue(`-webkit-box-sizing`),a=parseFloat(r.getPropertyValue(`padding-bottom`))+parseFloat(r.getPropertyValue(`padding-top`)),o=parseFloat(r.getPropertyValue(`border-bottom-width`))+parseFloat(r.getPropertyValue(`border-top-width`)),s={sizingStyle:E.map(e=>`${e}:${r.getPropertyValue(e)}`).join(`;`),paddingSize:a,borderSize:o,boxSizing:i};return t&&n&&(D[n]=s),s}function A(e,t=!1,n=null,r=null){O||(O=document.createElement(`textarea`),O.setAttribute(`tab-index`,`-1`),O.setAttribute(`aria-hidden`,`true`),O.setAttribute(`name`,`hiddenTextarea`),document.body.appendChild(O)),e.getAttribute(`wrap`)?O.setAttribute(`wrap`,e.getAttribute(`wrap`)):O.removeAttribute(`wrap`);let{paddingSize:i,borderSize:a,boxSizing:o,sizingStyle:s}=k(e,t);O.setAttribute(`style`,`${s};${T}`),O.value=e.value||e.placeholder||``;let c,l,u,d=O.scrollHeight;if(o===`border-box`?d+=a:o===`content-box`&&(d-=i),n!==null||r!==null){O.value=` `;let e=O.scrollHeight-i;n!==null&&(c=e*n,o===`border-box`&&(c=c+i+a),d=Math.max(c,d)),r!==null&&(l=e*r,o===`border-box`&&(l=l+i+a),u=d>l?``:`hidden`,d=Math.min(l,d))}let f={height:d,overflowY:u,resize:`none`};return c&&(f.minHeight=c),l&&(f.maxHeight=l),f}var j=e(t());function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}var N=0,P=1,F=2,I=j.forwardRef((e,t)=>{let{prefixCls:i,defaultValue:a,value:o,autoSize:s,onResize:l,className:d,style:f,disabled:p,onChange:ee,onInternalAutoSize:te,...h}=e,[g,_]=r(a,o),v=g??``,y=e=>{_(e.target.value),ee?.(e)},b=j.useRef();j.useImperativeHandle(t,()=>({textArea:b.current}));let[x,S]=j.useMemo(()=>s&&typeof s==`object`?[s.minRows,s.maxRows]:[],[s]),C=!!s,[w,T]=j.useState(F),[E,D]=j.useState(),O=()=>{T(N)};n(()=>{C&&O()},[o,x,S,C]),n(()=>{if(w===N)T(P);else if(w===P){let e=A(b.current,!1,x,S);T(F),D(e)}},[w]);let k=j.useRef(),I=()=>{u.cancel(k.current)},L=e=>{w===F&&(l?.(e),s&&(I(),k.current=u(()=>{O()})))};j.useEffect(()=>I,[]);let R=C?E:null,z={...f,...R};return(w===N||w===P)&&(z.overflowY=`hidden`,z.overflowX=`hidden`),j.createElement(m,{onResize:L,disabled:!(s||l)},j.createElement(`textarea`,M({},h,{ref:b,style:z,className:c(i,d,{[`${i}-disabled`]:p}),disabled:p,value:v,onChange:y})))});function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}var R=j.forwardRef(({defaultValue:e,value:t,onFocus:n,onBlur:i,onChange:a,allowClear:o,maxLength:s,onCompositionStart:l,onCompositionEnd:u,suffix:d,prefixCls:f=`rc-textarea`,showCount:p,count:ee,className:m,style:te,disabled:g,hidden:_,classNames:v,styles:x,onResize:S,onClear:C,onPressEnter:w,readOnly:T,autoSize:E,onKeyDown:D,...O},k)=>{let[A,M]=r(e,t),N=A==null?``:String(A),[P,F]=j.useState(!1),R=j.useRef(!1),[z,ne]=j.useState(null),B=(0,j.useRef)(null),V=(0,j.useRef)(null),H=()=>V.current?.textArea,U=()=>{H().focus()};(0,j.useImperativeHandle)(k,()=>({resizableTextArea:V.current,focus:U,blur:()=>{H().blur()},nativeElement:B.current?.nativeElement||H()})),(0,j.useEffect)(()=>{F(e=>!g&&e)},[g]);let[W,re]=j.useState(null);j.useEffect(()=>{W&&H().setSelectionRange(...W)},[W]);let G=y(ee,p),K=G.max??s,q=Number(K)>0,J=G.strategy(N),Y=!!K&&J>K,X=(e,t)=>{let n=t;!R.current&&G.exceedFormatter&&G.max&&G.strategy(t)>G.max&&(n=G.exceedFormatter(t,{max:G.max}),t!==n&&re([H().selectionStart||0,H().selectionEnd||0])),M(n),b(e.currentTarget,e,a,n)},ie=e=>{R.current=!0,l?.(e)},ae=e=>{R.current=!1,X(e,e.currentTarget.value),u?.(e)},oe=e=>{X(e,e.target.value)},Z=e=>{e.key===`Enter`&&w&&!e.nativeEvent.isComposing&&w(e),D?.(e)},se=e=>{F(!0),n?.(e)},ce=e=>{F(!1),i?.(e)},le=e=>{M(``),U(),b(H(),e,a)},Q=d,$;G.show&&($=G.showFormatter?G.showFormatter({value:N,count:J,maxLength:K}):`${J}${q?` / ${K}`:``}`,Q=j.createElement(j.Fragment,null,Q,j.createElement(`span`,{className:c(`${f}-data-count`,v?.count),style:x?.count},$)));let ue=e=>{S?.(e),H()?.style.height&&ne(!0)},de=!E&&!p&&!o;return j.createElement(h,{ref:B,value:N,allowClear:o,handleReset:le,suffix:Q,prefixCls:f,classNames:{...v,affixWrapper:c(v?.affixWrapper,{[`${f}-show-count`]:p,[`${f}-textarea-allow-clear`]:o})},disabled:g,focused:P,className:c(m,Y&&`${f}-out-of-range`),style:{...te,...z&&!de?{height:`auto`}:{}},dataAttrs:{affixWrapper:{"data-count":typeof $==`string`?$:void 0}},hidden:_,readOnly:T,onClear:C},j.createElement(I,L({},O,{autoSize:E,maxLength:s,onKeyDown:Z,onChange:oe,onFocus:se,onBlur:ce,onCompositionStart:ie,onCompositionEnd:ae,className:c(v?.textarea),style:{resize:te?.resize,...x?.textarea},disabled:g,prefixCls:f,onResize:ue,ref:V,readOnly:T})))}),z=e=>{let{componentCls:t,paddingLG:n}=e,r=`${t}-textarea`;return{[`textarea${t}`]:{maxWidth:`100%`,height:`auto`,minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:`bottom`,transition:`all ${e.motionDurationSlow}`,resize:`vertical`,[`&${t}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${t}-textarea-affix-wrapper-resize-dirty`]:{width:`auto`},[r]:{position:`relative`,"&-show-count":{[`${t}-data-count`]:{position:`absolute`,bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:`nowrap`,pointerEvents:`none`}},[`
        &-allow-clear > ${t},
        &-affix-wrapper${r}-has-feedback ${t}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:`inherit`,border:`none`,outline:`none`,background:`transparent`,minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:`none !important`}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:`absolute`,insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${r}-suffix`]:{position:`absolute`,top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:`inline-flex`,alignItems:`center`,margin:`auto`,pointerEvents:`none`}}},[`&-affix-wrapper${t}-affix-wrapper-rtl`]:{[`${t}-suffix`]:{[`${t}-data-count`]:{direction:`ltr`,insetInlineStart:0}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},ne=o([`Input`,`TextArea`],e=>z(l(e,_(e))),v,{resetFont:!1}),B=(0,j.forwardRef)((e,t)=>{let{prefixCls:n,bordered:r=!0,size:o,disabled:l,status:u,allowClear:m,classNames:h,rootClassName:_,className:v,style:y,styles:b,variant:T,showCount:E,onMouseDown:D,onResize:O,...k}=e,{getPrefixCls:A,direction:M,allowClear:N,autoComplete:P,className:F,style:I,classNames:L,styles:z}=i(`textArea`),B=j.useContext(d),V=l??B,{status:H,hasFeedback:U,feedbackIcon:W}=j.useContext(ee),re=w(H,u),[G,K]=a([L,h],[z,b],{props:e}),q=j.useRef(null);j.useImperativeHandle(t,()=>({resizableTextArea:q.current?.resizableTextArea,focus:e=>{te(q.current?.resizableTextArea?.textArea,e)},blur:()=>q.current?.blur()}));let J=A(`input`,n),Y=p(J),[X,ie]=S(J,_);ne(J,Y);let{compactSize:ae,compactItemClassnames:oe}=f(J,M),Z=s(e=>o??ae??e),[se,ce]=C(`textArea`,T,r),le=x(m??N),[Q,$]=j.useState(!1),[ue,de]=j.useState(!1),fe=e=>{$(!0),D?.(e);let t=()=>{$(!1),document.removeEventListener(`mouseup`,t)};document.addEventListener(`mouseup`,t)},pe=e=>{if(O?.(e),Q&&typeof getComputedStyle==`function`){let e=q.current?.nativeElement?.querySelector(`textarea`);e&&getComputedStyle(e).resize===`both`&&de(!0)}};return j.createElement(R,{autoComplete:P,...k,style:{...K.root,...I,...y},styles:K,disabled:V,allowClear:le,className:c(ie,Y,v,_,oe,F,G.root,{[`${J}-textarea-affix-wrapper-resize-dirty`]:ue}),classNames:{...G,textarea:c({[`${J}-sm`]:Z===`small`,[`${J}-lg`]:Z===`large`},X,G.textarea,Q&&`${J}-mouse-active`),variant:c({[`${J}-${se}`]:ce},g(J,re)),affixWrapper:c(`${J}-textarea-affix-wrapper`,{[`${J}-affix-wrapper-rtl`]:M===`rtl`,[`${J}-affix-wrapper-sm`]:Z===`small`,[`${J}-affix-wrapper-lg`]:Z===`large`,[`${J}-textarea-show-count`]:E||e.count?.show},X)},prefixCls:J,suffix:U&&j.createElement(`span`,{className:`${J}-textarea-suffix`},W),showCount:E,ref:q,onResize:pe,onMouseDown:fe})});export{B as t};