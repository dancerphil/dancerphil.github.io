var e=Object.prototype.hasOwnProperty;function t(e,t,r){for(r of e.keys())if(n(r,t))return r}function n(r,i){var a,o,s;if(r===i)return!0;if(r&&i&&(a=r.constructor)===i.constructor){if(a===Date)return r.getTime()===i.getTime();if(a===RegExp)return r.toString()===i.toString();if(a===Array){if((o=r.length)===i.length)for(;o--&&n(r[o],i[o]););return o===-1}if(a===Set){if(r.size!==i.size)return!1;for(o of r)if(s=o,s&&typeof s==`object`&&(s=t(i,s),!s)||!i.has(s))return!1;return!0}if(a===Map){if(r.size!==i.size)return!1;for(o of r)if(s=o[0],s&&typeof s==`object`&&(s=t(i,s),!s)||!n(o[1],i.get(s)))return!1;return!0}if(a===ArrayBuffer)r=new Uint8Array(r),i=new Uint8Array(i);else if(a===DataView){if((o=r.byteLength)===i.byteLength)for(;o--&&r.getInt8(o)===i.getInt8(o););return o===-1}if(ArrayBuffer.isView(r)){if((o=r.byteLength)===i.byteLength)for(;o--&&r[o]===i[o];);return o===-1}if(!a||typeof r==`object`){for(a in o=0,r)if(e.call(r,a)&&++o&&!e.call(i,a)||!(a in i)||!n(r[a],i[a]))return!1;return Object.keys(i).length===o}}return r!==r&&i!==i}var r=/(%?)(%([sdjo]))/g;function i(e,t){switch(t){case`s`:return e;case`d`:case`i`:return Number(e);case`j`:return JSON.stringify(e);case`o`:{if(typeof e==`string`)return e;let t=JSON.stringify(e);return t===`{}`||t===`[]`||/^\[object .+?\]$/.test(t)?e:t}}}function a(e,...t){if(t.length===0)return e;let n=0,a=e.replace(r,(e,r,a,o)=>{let s=t[n],c=i(s,o);return r?e:(n++,c)});return n<t.length&&(a+=` ${t.slice(n).join(` `)}`),a=a.replace(/%{2,2}/g,`%`),a}var o=2;function s(e){if(!e.stack)return;let t=e.stack.split(`
`);t.splice(1,o),e.stack=t.join(`
`)}var c=class extends Error{constructor(e,...t){super(e),this.message=e,this.name=`Invariant Violation`,this.message=a(e,...t),s(this)}},l=(e,t,...n)=>{if(!e)throw new c(t,...n)};l.as=(e,t,n,...r)=>{if(!t){let t=e.prototype.name!=null,i=t?new e(a(n,r)):e(a(n,r));throw i}};var u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},u(e,t)};function d(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);u(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)};function p(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function m(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function h(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var g;(function(e){e[e.None=0]=`None`,e[e.Error=10]=`Error`,e[e.Warning=20]=`Warning`,e[e.Info=30]=`Info`,e[e.Debug=40]=`Debug`})(g||={});var _=function(e){return`[sandpack-client]: ${e}`};function v(e,t){return t===void 0&&(t=`Value is nullish`),l(e!=null,_(t)),e}var y=`"dependencies" was not specified - provide either a package.json or a "dependencies" value`,b=`"entry" was not specified - provide either a package.json with the "main" field or an "entry" value`;function x(e,t,n){return e===void 0&&(e={}),t===void 0&&(t={}),n===void 0&&(n=`/index.js`),JSON.stringify({name:`sandpack-project`,main:n,dependencies:e,devDependencies:t},null,2)}function S(e,t,n,r){var i,a,o=O(e),s=o[`/package.json`];if(!s)return v(t,y),v(r,b),o[`/package.json`]={code:x(t,n,r)},o;if(s){var c=JSON.parse(s.code);v(!(!t&&!c.dependencies),b),t&&(c.dependencies=f(f({},(i=c.dependencies)??{}),t??{})),n&&(c.devDependencies=f(f({},(a=c.devDependencies)??{}),n??{})),r&&(c.main=r),o[`/package.json`]={code:JSON.stringify(c,null,2)}}return o}function C(e){var t;if(e.title===`SyntaxError`){var n=e.title,r=e.path,i=e.message,a=e.line,o=e.column;return{title:n,path:r,message:i,line:a,column:o}}var s=w((t=e.payload)?.frames);if(!s)return{message:e.message};var c=E(s),l=T(s),u=D(s._originalFileName,e.message,l,c);return{message:u,title:e.title,path:s._originalFileName,line:s._originalLineNumber,column:s._originalColumnNumber}}function w(e){if(e)return e.find(function(e){return!!e._originalFileName})}function T(e){return e?` (${e._originalLineNumber}:${e._originalColumnNumber})`:``}function E(e){var t=e._originalScriptCode[e._originalScriptCode.length-1],n=t.lineNumber.toString().length,r=2,i=3,a=r+n+i+e._originalColumnNumber;return e._originalScriptCode.reduce(function(e,t){var r=t.highlight?`>`:` `,i=t.lineNumber.toString().length===n?`${t.lineNumber}`:` ${t.lineNumber}`,o=t.highlight?`
`+` `.repeat(a)+`^`:``;return e+`
`+r+` `+i+` | `+t.content+o},``)}function D(e,t,n,r){return`${e}: ${t}${n}
${r}`}var O=function(e){return typeof e==`string`?e.startsWith(`/`)?e:`/${e}`:Array.isArray(e)?e.map(function(e){return e.startsWith(`/`)?e:`/${e}`}):typeof e==`object`&&e?Object.entries(e).reduce(function(e,t){var n=t[0],r=t[1],i=n.startsWith(`/`)?n:`/${n}`;return e[i]=r,e},{}):null};export{g as SandpackLogLevel,f as __assign,p as __awaiter,d as __extends,m as __generator,h as __spreadArray,S as addPackageJSONIfNeeded,_ as createError,x as createPackageJSON,n as dequal,C as extractErrorDetails,l as invariant,O as normalizePath,v as nullthrows};