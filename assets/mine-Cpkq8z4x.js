import{a as e}from"./chunk-DHjUg-A5.js";import{_ as t,h as n,n as r,r as i,t as a}from"./emotion-react-jsx-runtime.browser.esm-DaEj45wX.js";import"./styles-nbVye3to.js";import{t as o}from"./classnames-UbaF2Eru.js";import{n as s,t as c}from"./createRegion--nBI1KF3.js";import{_ as l,a as u,c as d,d as f,f as p,g as m,h,i as g,l as _,m as v,n as y,o as ee,p as te,r as b,s as ne,t as re,u as x,v as S,y as ie}from"./_cacheHas-1DNlXidi.js";var ae=`[object Symbol]`;function oe(e){return typeof e==`symbol`||h(e)&&m(e)==ae}var C=oe,w=Array.isArray,se=1/0,ce=l?l.prototype:void 0,le=ce?ce.toString:void 0;function ue(e){if(typeof e==`string`)return e;if(w(e))return v(e,ue)+``;if(C(e))return le?le.call(e):``;var t=e+``;return t==`0`&&1/e==-se?`-0`:t}var de=ue,fe=x(S,`WeakMap`),pe=9007199254740991,me=/^(?:0|[1-9]\d*)$/;function he(e,t){var n=typeof e;return t??=pe,!!t&&(n==`number`||n!=`symbol`&&me.test(e))&&e>-1&&e%1==0&&e<t}var ge=he,_e=Object.prototype;function ve(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||_e)}var ye=ve;function be(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var xe=be,Se=`[object Arguments]`;function Ce(e){return h(e)&&m(e)==Se}var we=Ce,Te=Object.prototype,Ee=Te.hasOwnProperty,De=Te.propertyIsEnumerable,Oe=we(function(){return arguments}())?we:function(e){return h(e)&&Ee.call(e,`callee`)&&!De.call(e,`callee`)};function ke(){return!1}var Ae=ke,je=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Me=je&&typeof module==`object`&&module&&!module.nodeType&&module,Ne=Me&&Me.exports===je?S.Buffer:void 0,T=(Ne?Ne.isBuffer:void 0)||Ae,Pe=`[object Arguments]`,Fe=`[object Array]`,Ie=`[object Boolean]`,Le=`[object Date]`,Re=`[object Error]`,ze=`[object Function]`,Be=`[object Map]`,Ve=`[object Number]`,He=`[object Object]`,Ue=`[object RegExp]`,We=`[object Set]`,Ge=`[object String]`,Ke=`[object WeakMap]`,qe=`[object ArrayBuffer]`,Je=`[object DataView]`,Ye=`[object Float32Array]`,Xe=`[object Float64Array]`,Ze=`[object Int8Array]`,Qe=`[object Int16Array]`,$e=`[object Int32Array]`,et=`[object Uint8Array]`,tt=`[object Uint8ClampedArray]`,nt=`[object Uint16Array]`,rt=`[object Uint32Array]`,E={};E[Ye]=E[Xe]=E[Ze]=E[Qe]=E[$e]=E[et]=E[tt]=E[nt]=E[rt]=!0,E[Pe]=E[Fe]=E[qe]=E[Ie]=E[Je]=E[Le]=E[Re]=E[ze]=E[Be]=E[Ve]=E[He]=E[Ue]=E[We]=E[Ge]=E[Ke]=!1;function it(e){return h(e)&&d(e.length)&&!!E[m(e)]}var at=it,ot=typeof exports==`object`&&exports&&!exports.nodeType&&exports,D=ot&&typeof module==`object`&&module&&!module.nodeType&&module,O=D&&D.exports===ot&&ie.process,st=function(){try{return D&&D.require&&D.require(`util`).types||O&&O.binding&&O.binding(`util`)}catch{}}(),ct=st&&st.isTypedArray,lt=ct?ee(ct):at,ut=Object.prototype.hasOwnProperty;function dt(e,t){var n=w(e),r=!n&&Oe(e),i=!n&&!r&&T(e),a=!n&&!r&&!i&&lt(e),o=n||r||i||a,s=o?xe(e.length,String):[],c=s.length;for(var l in e)(t||ut.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||ge(l,c)))&&s.push(l);return s}var ft=dt;function pt(e,t){return function(n){return e(t(n))}}var mt=pt(Object.keys,Object),ht=Object.prototype.hasOwnProperty;function gt(e){if(!ye(e))return mt(e);var t=[];for(var n in Object(e))ht.call(e,n)&&n!=`constructor`&&t.push(n);return t}var _t=gt;function vt(e){return ne(e)?ft(e):_t(e)}var yt=vt,bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xt=/^\w*$/;function St(e,t){if(w(e))return!1;var n=typeof e;return n==`number`||n==`symbol`||n==`boolean`||e==null||C(e)?!0:xt.test(e)||!bt.test(e)||t!=null&&e in Object(t)}var k=St,Ct=`Expected a function`;function A(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(Ct);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(A.Cache||b),n}A.Cache=b;var wt=A,Tt=500;function Et(e){var t=wt(e,function(e){return n.size===Tt&&n.clear(),e}),n=t.cache;return t}var Dt=Et,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kt=/\\(\\)?/g,At=Dt(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(Ot,function(e,n,r,i){t.push(r?i.replace(kt,`$1`):n||e)}),t});function jt(e){return e==null?``:de(e)}var Mt=jt;function Nt(e,t){return w(e)?e:k(e,t)?[e]:At(Mt(e))}var Pt=Nt,Ft=1/0;function It(e){if(typeof e==`string`||C(e))return e;var t=e+``;return t==`0`&&1/e==-Ft?`-0`:t}var j=It;function Lt(e,t){t=Pt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[j(t[n++])];return n&&n==r?e:void 0}var Rt=Lt;function zt(e,t,n){var r=e==null?void 0:Rt(e,t);return r===void 0?n:r}var Bt=zt;function Vt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Ht=Vt;function Ut(){this.__data__=new u,this.size=0}var Wt=Ut;function Gt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Kt=Gt;function qt(e){return this.__data__.get(e)}var Jt=qt;function Yt(e){return this.__data__.has(e)}var Xt=Yt,Zt=200;function Qt(e,t){var n=this.__data__;if(n instanceof u){var r=n.__data__;if(!g||r.length<Zt-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new b(r)}return n.set(e,t),this.size=n.size,this}var $t=Qt;function M(e){this.size=(this.__data__=new u(e)).size}M.prototype.clear=Wt,M.prototype.delete=Kt,M.prototype.get=Jt,M.prototype.has=Xt,M.prototype.set=$t;var N=M;function en(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var tn=en;function nn(){return[]}var rn=nn,an=Object.prototype.propertyIsEnumerable,on=Object.getOwnPropertySymbols,sn=on?function(e){return e==null?[]:(e=Object(e),tn(on(e),function(t){return an.call(e,t)}))}:rn;function cn(e,t,n){var r=t(e);return w(e)?r:Ht(r,n(e))}var ln=cn;function un(e){return ln(e,yt,sn)}var dn=un,P=x(S,`DataView`),F=x(S,`Promise`),I=x(S,`Set`),fn=`[object Map]`,pn=`[object Object]`,mn=`[object Promise]`,hn=`[object Set]`,gn=`[object WeakMap]`,_n=`[object DataView]`,vn=f(P),yn=f(g),bn=f(F),xn=f(I),Sn=f(fe),L=m;(P&&L(new P(new ArrayBuffer(1)))!=_n||g&&L(new g)!=fn||F&&L(F.resolve())!=mn||I&&L(new I)!=hn||fe&&L(new fe)!=gn)&&(L=function(e){var t=m(e),n=t==pn?e.constructor:void 0,r=n?f(n):``;if(r)switch(r){case vn:return _n;case yn:return fn;case bn:return mn;case xn:return hn;case Sn:return gn}return t});var Cn=L,wn=S.Uint8Array;function Tn(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}var R=Tn;function En(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Dn=En,On=1,kn=2;function An(e,t,n,r,i,a){var o=n&On,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&kn?new y:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!Dn(t,function(e,t){if(!re(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var jn=An;function Mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var Nn=Mn;function Pn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var Fn=Pn,In=1,Ln=2,Rn=`[object Boolean]`,zn=`[object Date]`,Bn=`[object Error]`,Vn=`[object Map]`,Hn=`[object Number]`,Un=`[object RegExp]`,Wn=`[object Set]`,Gn=`[object String]`,Kn=`[object Symbol]`,qn=`[object ArrayBuffer]`,Jn=`[object DataView]`,Yn=l?l.prototype:void 0,z=Yn?Yn.valueOf:void 0;function Xn(e,t,n,r,i,a,o){switch(n){case Jn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qn:return!(e.byteLength!=t.byteLength||!a(new wn(e),new wn(t)));case Rn:case zn:case Hn:return _(+e,+t);case Bn:return e.name==t.name&&e.message==t.message;case Un:case Gn:return e==t+``;case Vn:var s=Nn;case Wn:var c=r&In;if(s||=Fn,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=Ln,o.set(e,t);var u=jn(s(e),s(t),r,i,a,o);return o.delete(e),u;case Kn:if(z)return z.call(e)==z.call(t)}return!1}var Zn=Xn,Qn=1,$n=Object.prototype.hasOwnProperty;function er(e,t,n,r,i,a){var o=n&Qn,s=dn(e),c=s.length;if(c!=dn(t).length&&!o)return!1;for(var l=c;l--;){var u=s[l];if(!(o?u in t:$n.call(t,u)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=o;++l<c;){u=s[l];var h=e[u],g=t[u];if(r)var _=o?r(g,h,u,t,e,a):r(h,g,u,e,t,a);if(!(_===void 0?h===g||i(h,g,n,r,a):_)){p=!1;break}m||=u==`constructor`}if(p&&!m){var v=e.constructor,y=t.constructor;v!=y&&`constructor`in e&&`constructor`in t&&!(typeof v==`function`&&v instanceof v&&typeof y==`function`&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p}var tr=er,nr=1,rr=`[object Arguments]`,ir=`[object Array]`,B=`[object Object]`,ar=Object.prototype.hasOwnProperty;function or(e,t,n,r,i,a){var o=w(e),s=w(t),c=o?ir:Cn(e),l=s?ir:Cn(t);c=c==rr?B:c,l=l==rr?B:l;var u=c==B,d=l==B,f=c==l;if(f&&T(e)){if(!T(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new N,o||lt(e)?jn(e,t,n,r,i,a):Zn(e,t,c,n,r,i,a);if(!(n&nr)){var p=u&&ar.call(e,`__wrapped__`),m=d&&ar.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new N,i(h,g,n,r,a)}}return f?(a||=new N,tr(e,t,n,r,i,a)):!1}var sr=or;function cr(e,t,n,r,i){return e===t?!0:e==null||t==null||!h(e)&&!h(t)?e!==e&&t!==t:sr(e,t,n,r,cr,i)}var lr=cr,ur=1,dr=2;function fr(e,t,n,r){var i=n.length,a=i,o=!r;if(e==null)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=n[i];var c=s[0],l=e[c],u=s[1];if(o&&s[2]){if(l===void 0&&!(c in e))return!1}else{var d=new N;if(r)var f=r(l,u,c,e,t,d);if(!(f===void 0?lr(u,l,ur|dr,r,d):f))return!1}}return!0}var pr=fr;function mr(e){return e===e&&!te(e)}var hr=mr;function gr(e){for(var t=yt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,hr(i)]}return t}var _r=gr;function vr(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var yr=vr;function br(e){var t=_r(e);return t.length==1&&t[0][2]?yr(t[0][0],t[0][1]):function(n){return n===e||pr(n,e,t)}}var xr=br;function Sr(e,t){return e!=null&&t in Object(e)}var Cr=Sr;function wr(e,t,n){t=Pt(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=j(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&d(i)&&ge(o,i)&&(w(e)||Oe(e)))}var Tr=wr;function Er(e,t){return e!=null&&Tr(e,t,Cr)}var Dr=Er,Or=1,kr=2;function Ar(e,t){return k(e)&&hr(t)?yr(j(e),t):function(n){var r=Bt(n,e);return r===void 0&&r===t?Dr(n,e):lr(t,r,Or|kr)}}var jr=Ar;function Mr(e){return function(t){return t?.[e]}}var Nr=Mr;function Pr(e){return function(t){return Rt(t,e)}}var Fr=Pr;function Ir(e){return k(e)?Nr(j(e)):Fr(e)}var Lr=Ir;function Rr(e){return typeof e==`function`?e:e==null?p:typeof e==`object`?w(e)?jr(e[0],e[1]):xr(e):Lr(e)}var zr=Rr;function Br(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==void 0&&(n=n===void 0?a:n+a)}return n}var Vr=Br;function Hr(e,t){return e&&e.length?Vr(e,zr(t,2)):0}var V=Hr,Ur=n(),H=t();const Wr=window.innerWidth,Gr=window.innerHeight,U=Math.floor(Wr/20),W=Math.floor(Gr*.95/U),Kr=20*W,qr=Math.floor(Kr*.2),Jr={width:20*U,height:W*U},Yr={width:U,height:U},Xr={width:U*3,height:U*3},G=[];for(let e=0;e<W;e++)for(let t=0;t<20;t++)G.push({x:t,y:e});const Zr=e=>{e.mark=!0},K=e=>{if(e.reveal)return;if(e.reveal=!0,e.mine)throw e.mark=!0,Error(`失败`);let{label:t}=e;t===0&&X(e).forEach(K)},Qr=e=>{let{mark:t,reveal:n}=e;t&&t.forEach(Zr),n&&n.forEach(K)},$r=e=>({mark:R(e.map(e=>e.mark)).flat(),reveal:R(e.map(e=>e.reveal)).flat()});var ei=e=>e.reveal&&e.mine||!e.reveal?1:0;const ti=e=>{if(e.mine)return{};let t=X(e);return V(t,ei)===e.label?{mark:t.filter(e=>!e.reveal)}:V(t,e=>e.mark?1:0)===e.label?{reveal:t.filter(e=>!e.mark)}:{}};var q=s();const J=q.getValue,ni=q.useValue,ri=q.set,Y=()=>R(G.map(J)),X=e=>{let{x:t,y:n}=e;return R([J({x:t-1,y:n-1}),J({x:t-1,y:n}),J({x:t-1,y:n+1}),J({x:t,y:n-1}),J({x:t,y:n+1}),J({x:t+1,y:n-1}),J({x:t+1,y:n}),J({x:t+1,y:n+1})])};G.forEach(({x:e,y:t})=>{ri({x:e,y:t},{x:e,y:t,mine:!1,reveal:!1,mark:!1,label:0})});var ii=c(0);const ai=()=>ii.set(e=>e+1),oi=ii.useValue;var si=e(o(),1),ci={block:`_block_16us8_1`},Z={cover:`_cover_1hi80_1`,reveal:`_reveal_1hi80_6`,mine:`_mine_1hi80_11`,mark:`_mark_1hi80_15`,label0:`_label0_1hi80_19`,label1:`_label1_1hi80_23`,label2:`_label2_1hi80_27`,label3:`_label3_1hi80_31`,label4:`_label4_1hi80_35`,label5:`_label5_1hi80_39`,label6:`_label6_1hi80_43`,label7:`_label7_1hi80_43`,label8:`_label8_1hi80_43`},li=({coordinate:e})=>{let t=ni(e);if(!t)return null;let{mine:n,reveal:i,mark:a,label:o}=t;return i?r(`div`,{className:(0,si.default)(ci.block,Z.reveal,{[Z[`label${o}`]]:!n,[Z.mine]:n}),style:Yr,children:n?`!`:o}):r(`div`,{className:(0,si.default)(ci.block,Z.cover,{[Z.mark]:a}),style:Yr,children:a&&`m`})},ui={content:`_content_1mign_1`,panel:`_panel_1mign_11`,header:`_header_1mign_17`},di=!1;const fi=()=>{Y().forEach(e=>{e.reveal=!1,e.mark=!1}),di=!1,ai()};fi();var pi=()=>{Y().forEach(e=>{e.mine=!1});let e=0;for(;e<qr;){let t=J({x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*W)});t.mine||(t.mine=!0,e++)}Y().forEach(e=>{e.label=V(X(e),`mine`)})},mi=e=>{for(let t=0;t<100;t++)if(pi(),!e.mine&&e.label===0)return},hi=e=>{Qr(ti(e))};const gi=e=>{let t=J(e);if(!t||t.mark)return;di||=(mi(t),!0);let{reveal:n}=t;n||K(t),hi(t),Qr($r(X(t).filter(e=>e.reveal).map(ti)))},_i=e=>{try{gi(e)}catch(e){console.error(e)}finally{ai()}};var vi=c();const yi=vi.useValue;var bi=e=>{vi.set(t=>!t||t.x!==e.x||t.y!==e.y?e:t)},xi=vi.reset,Si=(e,t,n)=>{let r=e.getBoundingClientRect(),i=t-r.left+e.scrollLeft,a=n-r.top+e.scrollTop;return{x:Math.floor(i/U),y:Math.floor(a/U)}},Q=e=>t=>{t.preventDefault();let n=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY;e({clientX:n,clientY:r})},$=(e,t)=>n=>{let r=n.clientX,i=n.clientY;t&&!n.buttons||e({clientX:r,clientY:i})},Ci=e=>((0,H.useEffect)(()=>{let t=e.current;if(!t)return;let n=({clientX:e,clientY:n})=>{bi(Si(t,e,n))},r=Q(n),i=$(n),a=({clientX:e,clientY:n})=>{let r=Si(t,e,n);bi(r),_i(r)},o=Q(a),s=$(a,!0),c=({clientX:e,clientY:n})=>{_i(Si(t,e,n)),xi()},l=Q(c),u=$(c);return document.body.addEventListener(`touchstart`,r),document.body.addEventListener(`mousedown`,i),document.body.addEventListener(`touchmove`,o,{passive:!1}),document.body.addEventListener(`mousemove`,s),document.body.addEventListener(`touchend`,l),document.body.addEventListener(`mouseup`,u),()=>{document.body.removeEventListener(`touchstart`,r),document.body.removeEventListener(`mousedown`,i),document.body.removeEventListener(`touchmove`,o),document.body.removeEventListener(`mousemove`,s),document.body.removeEventListener(`touchend`,l),document.body.removeEventListener(`mouseup`,u)}},[e]),e),wi={castRange:`_castRange_17m5f_1`};function Ti(){let e=yi();if(!e)return null;let{x:t,y:n}=e;return r(`div`,{className:wi.castRange,style:{...Xr,left:(t-1)*U,top:(n-1)*U}})}var Ei=(0,H.memo)(Ti);(0,Ur.createRoot)(document.body).render(r(()=>{oi();let e=(0,H.useRef)(null);Ci(e);let t=Y();return i(a,{children:[r(`div`,{className:ui.header,onMouseUp:fi,onTouchEnd:fi,children:t.filter(e=>e.mine&&!e.mark).length}),r(`div`,{className:ui.content,children:i(`div`,{className:ui.panel,style:Jr,ref:e,children:[G.map(e=>r(li,{coordinate:e},`${e.x}-${e.y}`)),r(Ei,{})]})})]})},{}));