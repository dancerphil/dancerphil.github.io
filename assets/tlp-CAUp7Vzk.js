import{o as e,t}from"./chunk-a1Y4OS11.js";import{_ as n,h as r,n as i,r as a,t as o}from"./emotion-react-jsx-runtime.browser.esm-gYJ-kLJ7.js";import{n as s,t as c}from"./styles-BkwWHfWw.js";import"./useSize-BHfrmQgs.js";import{E as l}from"./ContextIsolator-fcfJ5Omt.js";import{t as u}from"./button-BPSxO0Ws.js";import{i as d,n as f,o as p,r as m,s as ee,t as h}from"./es-DjxqyGrx.js";import{n as te}from"./modal-CI8_ViQf.js";import{l as ne}from"./PurePanel-D_ATzLtB.js";import"./classnames-C0n6PWQ2.js";import"./style-AMeryw3t.js";import"./CheckOutlined-C-me-Wyq.js";import"./TextArea-XOPvfpqY.js";import{t as re}from"./createRegion-Bi1Wsgrn.js";import"./preload-helper-CJWiGfV5.js";import{n as ie,r as ae,t as g}from"./es-CcDN6zP5.js";import"./marked.esm-CXLUZfUv.js";import{t as _}from"./emotion-styled-base.browser.esm-Cf05bw-2.js";var v={icon:{tag:`svg`,attrs:{viewBox:`64 64 896 896`,focusable:`false`},children:[{tag:`path`,attrs:{d:`M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z`}},{tag:`path`,attrs:{d:`M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z`}}]},name:`question-circle`,theme:`outlined`},y=e(n());function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}var oe=y.forwardRef((e,t)=>y.createElement(l,b({},e,{ref:t,icon:v}))),se=r(),ce=(0,y.createContext)(null);ce.displayName=`PanelGroupContext`;var x={group:`data-panel-group`,groupDirection:`data-panel-group-direction`,groupId:`data-panel-group-id`,panel:`data-panel`,panelCollapsible:`data-panel-collapsible`,panelId:`data-panel-id`,panelSize:`data-panel-size`,resizeHandle:`data-resize-handle`,resizeHandleActive:`data-resize-handle-active`,resizeHandleEnabled:`data-panel-resize-handle-enabled`,resizeHandleId:`data-panel-resize-handle-id`,resizeHandleState:`data-resize-handle-state`},S=10,le=y.useLayoutEffect,ue=y.useId,de=typeof ue==`function`?ue:()=>null,fe=0;function pe(e=null){let t=de(),n=(0,y.useRef)(e||t||null);return n.current===null&&(n.current=``+ fe++),e??n.current}function me({children:e,className:t=``,collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:a,id:o,maxSize:s,minSize:c,onCollapse:l,onExpand:u,onResize:d,order:f,style:p,tagName:m=`div`,...ee}){let h=(0,y.useContext)(ce);if(h===null)throw Error(`Panel components must be rendered within a PanelGroup container`);let{collapsePanel:te,expandPanel:ne,getPanelSize:re,getPanelStyle:ie,groupId:ae,isPanelCollapsed:g,reevaluatePanelConstraints:_,registerPanel:v,resizePanel:b,unregisterPanel:oe}=h,se=pe(o),S=(0,y.useRef)({callbacks:{onCollapse:l,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:s,minSize:c},id:se,idIsFromProps:o!==void 0,order:f});(0,y.useRef)({didLogMissingDefaultSizeWarning:!1}),le(()=>{let{callbacks:e,constraints:t}=S.current,a={...t};S.current.id=se,S.current.idIsFromProps=o!==void 0,S.current.order=f,e.onCollapse=l,e.onExpand=u,e.onResize=d,t.collapsedSize=n,t.collapsible=r,t.defaultSize=i,t.maxSize=s,t.minSize=c,(a.collapsedSize!==t.collapsedSize||a.collapsible!==t.collapsible||a.maxSize!==t.maxSize||a.minSize!==t.minSize)&&_(S.current,a)}),le(()=>{let e=S.current;return v(e),()=>{oe(e)}},[f,se,v,oe]),(0,y.useImperativeHandle)(a,()=>({collapse:()=>{te(S.current)},expand:e=>{ne(S.current,e)},getId(){return se},getSize(){return re(S.current)},isCollapsed(){return g(S.current)},isExpanded(){return!g(S.current)},resize:e=>{b(S.current,e)}}),[te,ne,re,g,se,b]);let ue=ie(S.current,i);return(0,y.createElement)(m,{...ee,children:e,className:t,id:se,style:{...ue,...p},[x.groupId]:ae,[x.panel]:``,[x.panelCollapsible]:r||void 0,[x.panelId]:se,[x.panelSize]:parseFloat(``+ue.flexGrow).toFixed(1)})}var he=(0,y.forwardRef)((e,t)=>(0,y.createElement)(me,{...e,forwardedRef:t}));me.displayName=`Panel`,he.displayName=`forwardRef(Panel)`;var ge;function _e(){return ge}var ve=null,ye=!0,be=null,xe=-1,Se=null;function Ce(e,t,n){let r=(t&Be)!==0,i=(t&Ve)!==0,a=(t&He)!==0,o=(t&Ue)!==0;if(be)return be({exceedsHorizontalMaximum:i,exceedsHorizontalMinimum:r,exceedsVerticalMaximum:o,exceedsVerticalMinimum:a,intersectsHorizontalDragHandle:e===`horizontal`||e===`intersection`,intersectsVerticalDragHandle:e===`vertical`||e===`intersection`,isPointerDown:n});if(t){if(r)return a?`se-resize`:o?`ne-resize`:`e-resize`;if(i)return a?`sw-resize`:o?`nw-resize`:`w-resize`;if(a)return`s-resize`;if(o)return`n-resize`}switch(e){case`horizontal`:return`ew-resize`;case`intersection`:return`move`;case`vertical`:return`ns-resize`}}function we(){Se!==null&&(document.head.removeChild(Se),ve=null,Se=null,xe=-1)}function Te(e,t,n){if(!ye)return;let r=Ce(e,t,n);if(ve!==r){if(ve=r,Se===null){Se=document.createElement(`style`);let e=_e();e&&Se.setAttribute(`nonce`,e),document.head.appendChild(Se)}if(xe>=0){var i;(i=Se.sheet)==null||i.removeRule(xe)}xe=Se.sheet?.insertRule(`*{cursor: ${r} !important;}`)??-1}}function Ee(e){return e.type===`keydown`}function De(e){return e.type.startsWith(`pointer`)}function Oe(e){return e.type.startsWith(`mouse`)}function ke(e){if(De(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Oe(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Ae(){if(typeof matchMedia==`function`)return matchMedia(`(pointer:coarse)`).matches?`coarse`:`fine`}function je(e,t,n){return n?e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y:e.x<=t.x+t.width&&e.x+e.width>=t.x&&e.y<=t.y+t.height&&e.y+e.height>=t.y}function Me(e,t){if(e===t)throw Error(`Cannot compare node with itself`);let n={a:Re(e),b:Re(t)},r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;C(r,`Stacking order can only be calculated for elements with a common ancestor`);let i={a:Le(Ie(n.a)),b:Le(Ie(n.b))};if(i.a===i.b){let e=r.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)},i=e.length;for(;i--;){let n=e[i];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(i.a-i.b)}var Ne=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Pe(e){let t=getComputedStyle(ze(e)??e).display;return t===`flex`||t===`inline-flex`}function Fe(e){let t=getComputedStyle(e);return!!(t.position===`fixed`||t.zIndex!==`auto`&&(t.position!==`static`||Pe(e))||+t.opacity<1||`transform`in t&&t.transform!==`none`||`webkitTransform`in t&&t.webkitTransform!==`none`||`mixBlendMode`in t&&t.mixBlendMode!==`normal`||`filter`in t&&t.filter!==`none`||`webkitFilter`in t&&t.webkitFilter!==`none`||`isolation`in t&&t.isolation===`isolate`||Ne.test(t.willChange)||t.webkitOverflowScrolling===`touch`)}function Ie(e){let t=e.length;for(;t--;){let n=e[t];if(C(n,`Missing node`),Fe(n))return n}return null}function Le(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Re(e){let t=[];for(;e;)t.push(e),e=ze(e);return t}function ze(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}var Be=1,Ve=2,He=4,Ue=8,We=Ae()===`coarse`,Ge=[],Ke=!1,qe=new Map,Je=new Map,Ye=new Set;function Xe(e,t,n,r,i){let{ownerDocument:a}=t,o={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:i},s=qe.get(a)??0;return qe.set(a,s+1),Ye.add(o),at(),function(){Je.delete(e),Ye.delete(o);let t=qe.get(a)??1;if(qe.set(a,t-1),at(),t===1&&qe.delete(a),Ge.includes(o)){let e=Ge.indexOf(o);e>=0&&Ge.splice(e,1),rt(),i(`up`,!0,null)}}}function Ze(e){let{target:t}=e,{x:n,y:r}=ke(e);Ke=!0,tt({target:t,x:n,y:r}),at(),Ge.length>0&&(ot(`down`,e),rt(),e.preventDefault(),et(t)||e.stopImmediatePropagation())}function Qe(e){let{x:t,y:n}=ke(e);if(Ke&&e.type!==`pointerleave`&&e.buttons===0&&(Ke=!1,ot(`up`,e)),!Ke){let{target:r}=e;tt({target:r,x:t,y:n})}ot(`move`,e),rt(),Ge.length>0&&e.preventDefault()}function $e(e){let{target:t}=e,{x:n,y:r}=ke(e);Je.clear(),Ke=!1,Ge.length>0&&(e.preventDefault(),et(t)||e.stopImmediatePropagation()),ot(`up`,e),tt({target:t,x:n,y:r}),rt(),at()}function et(e){let t=e;for(;t;){if(t.hasAttribute(x.resizeHandle))return!0;t=t.parentElement}return!1}function tt({target:e,x:t,y:n}){Ge.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Ye.forEach(e=>{let{element:i,hitAreaMargins:a}=e,o=i.getBoundingClientRect(),{bottom:s,left:c,right:l,top:u}=o,d=We?a.coarse:a.fine;if(t>=c-d&&t<=l+d&&n>=u-d&&n<=s+d){if(r!==null&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&Me(r,i)>0){let e=r,t=!1;for(;e&&!e.contains(i);){if(je(e.getBoundingClientRect(),o,!0)){t=!0;break}e=e.parentElement}if(t)return}Ge.push(e)}})}function nt(e,t){Je.set(e,t)}function rt(){let e=!1,t=!1;Ge.forEach(n=>{let{direction:r}=n;r===`horizontal`?e=!0:t=!0});let n=0;Je.forEach(e=>{n|=e}),e&&t?Te(`intersection`,n,Ke):e?Te(`horizontal`,n,Ke):t?Te(`vertical`,n,Ke):we()}var it;function at(){var e;(e=it)==null||e.abort(),it=new AbortController;let t={capture:!0,signal:it.signal};Ye.size&&(Ke?(Ge.length>0&&qe.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener(`contextmenu`,$e,t),r.addEventListener(`pointerleave`,Qe,t),r.addEventListener(`pointermove`,Qe,t))}),qe.forEach((e,n)=>{let{body:r}=n;r.addEventListener(`pointerup`,$e,t),r.addEventListener(`pointercancel`,$e,t)})):qe.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener(`pointerdown`,Ze,t),r.addEventListener(`pointermove`,Qe,t))}))}function ot(e,t){Ye.forEach(n=>{let{setResizeHandlerState:r}=n;r(e,Ge.includes(n),t)})}function st(){let[e,t]=(0,y.useState)(0);return(0,y.useCallback)(()=>t(e=>e+1),[])}function C(e,t){if(!e)throw console.error(t),Error(t)}function ct(e,t,n=S){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function lt(e,t,n=S){return ct(e,t,n)===0}function ut(e,t,n){return ct(e,t,n)===0}function dt(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],a=t[r];if(!ut(i,a,n))return!1}return!0}function ft({panelConstraints:e,panelIndex:t,size:n}){let r=e[t];C(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:i=0,collapsible:a,maxSize:o=100,minSize:s=0}=r;if(ct(n,s)<0)if(a){let e=(i+s)/2;n=ct(n,e)<0?i:s}else n=s;return n=Math.min(o,n),n=parseFloat(n.toFixed(S)),n}function pt({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:a}){if(ut(e,0))return t;let o=[...t],[s,c]=r;C(s!=null,`Invalid first pivot index`),C(c!=null,`Invalid second pivot index`);let l=0;if(a===`keyboard`){{let r=e<0?c:s,i=n[r];C(i,`Panel constraints not found for index ${r}`);let{collapsedSize:a=0,collapsible:o,minSize:l=0}=i;if(o){let n=t[r];if(C(n!=null,`Previous layout not found for panel index ${r}`),ut(n,a)){let t=l-n;ct(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{let r=e<0?s:c,i=n[r];C(i,`No panel constraints found for index ${r}`);let{collapsedSize:a=0,collapsible:o,minSize:l=0}=i;if(o){let n=t[r];if(C(n!=null,`Previous layout not found for panel index ${r}`),ut(n,l)){let t=n-a;ct(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{let r=e<0?1:-1,i=e<0?c:s,a=0;for(;;){let e=t[i];C(e!=null,`Previous layout not found for panel index ${i}`);let o=ft({panelConstraints:n,panelIndex:i,size:100})-e;if(a+=o,i+=r,i<0||i>=n.length)break}let o=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-o:o}{let r=e<0?s:c;for(;r>=0&&r<n.length;){let i=Math.abs(e)-Math.abs(l),a=t[r];C(a!=null,`Previous layout not found for panel index ${r}`);let s=a-i,c=ft({panelConstraints:n,panelIndex:r,size:s});if(!ut(a,c)&&(l+=a-c,o[r]=c,l.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(dt(i,o))return i;{let r=e<0?c:s,i=t[r];C(i!=null,`Previous layout not found for panel index ${r}`);let a=i+l,u=ft({panelConstraints:n,panelIndex:r,size:a});if(o[r]=u,!ut(u,a)){let t=a-u,r=e<0?c:s;for(;r>=0&&r<n.length;){let i=o[r];C(i!=null,`Previous layout not found for panel index ${r}`);let a=i+t,s=ft({panelConstraints:n,panelIndex:r,size:a});if(ut(i,s)||(t-=s-i,o[r]=s),ut(t,0))break;e>0?r--:r++}}}return ut(o.reduce((e,t)=>t+e,0),100)?o:i}function mt({layout:e,panelsArray:t,pivotIndices:n}){let r=0,i=100,a=0,o=0,s=n[0];return C(s!=null,`No pivot index found`),t.forEach((e,t)=>{let{constraints:n}=e,{maxSize:c=100,minSize:l=0}=n;t===s?(r=l,i=c):(a+=l,o+=c)}),{valueMax:Math.min(i,100-a),valueMin:Math.max(r,100-o),valueNow:e[s]}}function ht(e,t=document){return Array.from(t.querySelectorAll(`[${x.resizeHandleId}][data-panel-group-id="${e}"]`))}function gt(e,t,n=document){return ht(e,n).findIndex(e=>e.getAttribute(x.resizeHandleId)===t)??null}function _t(e,t,n){let r=gt(e,t,n);return r==null?[-1,-1]:[r,r+1]}function vt(e){return e instanceof HTMLElement?!0:typeof e==`object`&&!!e&&`tagName`in e&&`getAttribute`in e}function yt(e,t=document){return vt(t)&&t.dataset.panelGroupId==e?t:t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`)||null}function bt(e,t=document){return t.querySelector(`[${x.resizeHandleId}="${e}"]`)||null}function xt(e,t,n,r=document){let i=bt(t,r),a=ht(e,r),o=i?a.indexOf(i):-1;return[n[o]?.id??null,n[o+1]?.id??null]}function St({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:i,panelGroupElement:a,setLayout:o}){(0,y.useRef)({didWarnAboutMissingResizeHandle:!1}),le(()=>{if(!a)return;let e=ht(n,a);for(let t=0;t<i.length-1;t++){let{valueMax:n,valueMin:a,valueNow:o}=mt({layout:r,panelsArray:i,pivotIndices:[t,t+1]}),s=e[t];if(s!=null){let e=i[t];C(e,`No panel data found for index "${t}"`),s.setAttribute(`aria-controls`,e.id),s.setAttribute(`aria-valuemax`,``+Math.round(n)),s.setAttribute(`aria-valuemin`,``+Math.round(a)),s.setAttribute(`aria-valuenow`,o==null?``:``+Math.round(o))}}return()=>{e.forEach((e,t)=>{e.removeAttribute(`aria-controls`),e.removeAttribute(`aria-valuemax`),e.removeAttribute(`aria-valuemin`),e.removeAttribute(`aria-valuenow`)})}},[n,r,i,a]),(0,y.useEffect)(()=>{if(!a)return;let e=t.current;C(e,`Eager values not found`);let{panelDataArray:i}=e;C(yt(n,a)!=null,`No group found for id "${n}"`);let s=ht(n,a);C(s,`No resize handles found for group id "${n}"`);let c=s.map(e=>{let t=e.getAttribute(x.resizeHandleId);C(t,`Resize handle element has no handle id attribute`);let[s,c]=xt(n,t,i,a);if(s==null||c==null)return()=>{};let l=e=>{if(!e.defaultPrevented)switch(e.key){case`Enter`:{e.preventDefault();let c=i.findIndex(e=>e.id===s);if(c>=0){let e=i[c];C(e,`No panel data found for index ${c}`);let s=r[c],{collapsedSize:l=0,collapsible:u,minSize:d=0}=e.constraints;if(s!=null&&u){let e=pt({delta:ut(s,l)?d-l:l-s,initialLayout:r,panelConstraints:i.map(e=>e.constraints),pivotIndices:_t(n,t,a),prevLayout:r,trigger:`keyboard`});r!==e&&o(e)}}break}}};return e.addEventListener(`keydown`,l),()=>{e.removeEventListener(`keydown`,l)}});return()=>{c.forEach(e=>e())}},[a,e,t,n,r,i,o])}function Ct(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function wt(e,t){let n=e===`horizontal`,{x:r,y:i}=ke(t);return n?r:i}function Tt(e,t,n,r,i){let a=n===`horizontal`,o=bt(t,i);C(o,`No resize handle element found for id "${t}"`);let s=o.getAttribute(x.groupId);C(s,`Resize handle element has no group id attribute`);let{initialCursorPosition:c}=r,l=wt(n,e),u=yt(s,i);C(u,`No group element found for id "${s}"`);let d=u.getBoundingClientRect(),f=a?d.width:d.height;return(l-c)/f*100}function Et(e,t,n,r,i,a){if(Ee(e)){let t=n===`horizontal`,r=0;r=e.shiftKey?100:i??10;let a=0;switch(e.key){case`ArrowDown`:a=t?0:r;break;case`ArrowLeft`:a=t?-r:0;break;case`ArrowRight`:a=t?r:0;break;case`ArrowUp`:a=t?0:-r;break;case`End`:a=100;break;case`Home`:a=-100;break}return a}else return r==null?0:Tt(e,t,n,r,a)}function Dt({panelDataArray:e}){let t=Array(e.length),n=e.map(e=>e.constraints),r=0,i=100;for(let a=0;a<e.length;a++){let e=n[a];C(e,`Panel constraints not found for index ${a}`);let{defaultSize:o}=e;o!=null&&(r++,t[a]=o,i-=o)}for(let a=0;a<e.length;a++){let o=n[a];C(o,`Panel constraints not found for index ${a}`);let{defaultSize:s}=o;if(s!=null)continue;let c=e.length-r,l=i/c;r++,t[a]=l,i-=l}return t}function Ot(e,t,n){t.forEach((t,r)=>{let i=e[r];C(i,`Panel data not found for index ${r}`);let{callbacks:a,constraints:o,id:s}=i,{collapsedSize:c=0,collapsible:l}=o,u=n[s];if(u==null||t!==u){n[s]=t;let{onCollapse:e,onExpand:r,onResize:i}=a;i&&i(t,u),l&&(e||r)&&(r&&(u==null||lt(u,c))&&!lt(t,c)&&r(),e&&(u==null||!lt(u,c))&&lt(t,c)&&e())}})}function kt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function At({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:i,precision:a=3}){let o=n[i],s;return s=o==null?e==null?`1`:e.toFixed(a):r.length===1?`1`:o.toFixed(a),{flexBasis:0,flexGrow:s,flexShrink:1,overflow:`hidden`,pointerEvents:t===null?void 0:`none`}}function jt(e,t=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}function Mt(e){try{if(typeof localStorage<`u`)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error(`localStorage not supported in this environment`)}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Nt(e){return`react-resizable-panels:${e}`}function Pt(e){return e.map(e=>{let{constraints:t,id:n,idIsFromProps:r,order:i}=e;return r?n:i?`${i}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(`,`)}function Ft(e,t){try{let n=Nt(e),r=t.getItem(n);if(r){let e=JSON.parse(r);if(typeof e==`object`&&e)return e}}catch{}return null}function It(e,t,n){return(Ft(e,n)??{})[Pt(t)]??null}function Lt(e,t,n,r,i){let a=Nt(e),o=Pt(t),s=Ft(e,i)??{};s[o]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(a,JSON.stringify(s))}catch(e){console.error(e)}}function Rt({layout:e,panelConstraints:t}){let n=[...e],r=n.reduce((e,t)=>e+t,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(e=>`${e}%`).join(`, `)}`);if(!ut(r,100)&&n.length>0)for(let e=0;e<t.length;e++){let t=n[e];C(t!=null,`No layout data found for index ${e}`),n[e]=100/r*t}let i=0;for(let e=0;e<t.length;e++){let r=n[e];C(r!=null,`No layout data found for index ${e}`);let a=ft({panelConstraints:t,panelIndex:e,size:r});r!=a&&(i+=r-a,n[e]=a)}if(!ut(i,0))for(let e=0;e<t.length;e++){let r=n[e];C(r!=null,`No layout data found for index ${e}`);let a=r+i,o=ft({panelConstraints:t,panelIndex:e,size:a});if(r!==o&&(i-=o-r,n[e]=o,ut(i,0)))break}return n}var zt=100,Bt={getItem:e=>(Mt(Bt),Bt.getItem(e)),setItem:(e,t)=>{Mt(Bt),Bt.setItem(e,t)}},Vt={};function Ht({autoSaveId:e=null,children:t,className:n=``,direction:r,forwardedRef:i,id:a=null,onLayout:o=null,keyboardResizeBy:s=null,storage:c=Bt,style:l,tagName:u=`div`,...d}){let f=pe(a),p=(0,y.useRef)(null),[m,ee]=(0,y.useState)(null),[h,te]=(0,y.useState)([]),ne=st(),re=(0,y.useRef)({}),ie=(0,y.useRef)(new Map),ae=(0,y.useRef)(0),g=(0,y.useRef)({autoSaveId:e,direction:r,dragState:m,id:f,keyboardResizeBy:s,onLayout:o,storage:c}),_=(0,y.useRef)({layout:h,panelDataArray:[],panelDataArrayChanged:!1});(0,y.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,y.useImperativeHandle)(i,()=>({getId:()=>g.current.id,getLayout:()=>{let{layout:e}=_.current;return e},setLayout:e=>{let{onLayout:t}=g.current,{layout:n,panelDataArray:r}=_.current,i=Rt({layout:e,panelConstraints:r.map(e=>e.constraints)});Ct(n,i)||(te(i),_.current.layout=i,t&&t(i),Ot(r,i,re.current))}}),[]),le(()=>{g.current.autoSaveId=e,g.current.direction=r,g.current.dragState=m,g.current.id=f,g.current.onLayout=o,g.current.storage=c}),St({committedValuesRef:g,eagerValuesRef:_,groupId:f,layout:h,panelDataArray:_.current.panelDataArray,setLayout:te,panelGroupElement:p.current}),(0,y.useEffect)(()=>{let{panelDataArray:t}=_.current;if(e){if(h.length===0||h.length!==t.length)return;let n=Vt[e];n??(n=jt(Lt,zt),Vt[e]=n);let r=[...t],i=new Map(ie.current);n(e,r,i,h,c)}},[e,h,c]),(0,y.useEffect)(()=>{});let v=(0,y.useCallback)(e=>{let{onLayout:t}=g.current,{layout:n,panelDataArray:r}=_.current;if(e.constraints.collapsible){let i=r.map(e=>e.constraints),{collapsedSize:a=0,panelSize:o,pivotIndices:s}=Gt(r,e,n);if(C(o!=null,`Panel size not found for panel "${e.id}"`),!lt(o,a)){ie.current.set(e.id,o);let c=pt({delta:Wt(r,e)===r.length-1?o-a:a-o,initialLayout:n,panelConstraints:i,pivotIndices:s,prevLayout:n,trigger:`imperative-api`});kt(n,c)||(te(c),_.current.layout=c,t&&t(c),Ot(r,c,re.current))}}},[]),b=(0,y.useCallback)((e,t)=>{let{onLayout:n}=g.current,{layout:r,panelDataArray:i}=_.current;if(e.constraints.collapsible){let a=i.map(e=>e.constraints),{collapsedSize:o=0,panelSize:s=0,minSize:c=0,pivotIndices:l}=Gt(i,e,r),u=t??c;if(lt(s,o)){let t=ie.current.get(e.id),o=t!=null&&t>=u?t:u,c=pt({delta:Wt(i,e)===i.length-1?s-o:o-s,initialLayout:r,panelConstraints:a,pivotIndices:l,prevLayout:r,trigger:`imperative-api`});kt(r,c)||(te(c),_.current.layout=c,n&&n(c),Ot(i,c,re.current))}}},[]),oe=(0,y.useCallback)(e=>{let{layout:t,panelDataArray:n}=_.current,{panelSize:r}=Gt(n,e,t);return C(r!=null,`Panel size not found for panel "${e.id}"`),r},[]),se=(0,y.useCallback)((e,t)=>{let{panelDataArray:n}=_.current;return At({defaultSize:t,dragState:m,layout:h,panelData:n,panelIndex:Wt(n,e)})},[m,h]),S=(0,y.useCallback)(e=>{let{layout:t,panelDataArray:n}=_.current,{collapsedSize:r=0,collapsible:i,panelSize:a}=Gt(n,e,t);return C(a!=null,`Panel size not found for panel "${e.id}"`),i===!0&&lt(a,r)},[]),ue=(0,y.useCallback)(e=>{let{layout:t,panelDataArray:n}=_.current,{collapsedSize:r=0,collapsible:i,panelSize:a}=Gt(n,e,t);return C(a!=null,`Panel size not found for panel "${e.id}"`),!i||ct(a,r)>0},[]),de=(0,y.useCallback)(e=>{let{panelDataArray:t}=_.current;t.push(e),t.sort((e,t)=>{let n=e.order,r=t.order;return n==null&&r==null?0:n==null?-1:r==null?1:n-r}),_.current.panelDataArrayChanged=!0,ne()},[ne]);le(()=>{if(_.current.panelDataArrayChanged){_.current.panelDataArrayChanged=!1;let{autoSaveId:e,onLayout:t,storage:n}=g.current,{layout:r,panelDataArray:i}=_.current,a=null;if(e){let t=It(e,i,n);t&&(ie.current=new Map(Object.entries(t.expandToSizes)),a=t.layout)}a??=Dt({panelDataArray:i});let o=Rt({layout:a,panelConstraints:i.map(e=>e.constraints)});Ct(r,o)||(te(o),_.current.layout=o,t&&t(o),Ot(i,o,re.current))}}),le(()=>{let e=_.current;return()=>{e.layout=[]}},[]);let fe=(0,y.useCallback)(e=>{let t=!1,n=p.current;return n&&window.getComputedStyle(n,null).getPropertyValue(`direction`)===`rtl`&&(t=!0),function(n){n.preventDefault();let r=p.current;if(!r)return()=>null;let{direction:i,dragState:a,id:o,keyboardResizeBy:s,onLayout:c}=g.current,{layout:l,panelDataArray:u}=_.current,{initialLayout:d}=a??{},f=_t(o,e,r),m=Et(n,e,i,a,s,r),ee=i===`horizontal`;ee&&t&&(m=-m);let h=u.map(e=>e.constraints),ne=pt({delta:m,initialLayout:d??l,panelConstraints:h,pivotIndices:f,prevLayout:l,trigger:Ee(n)?`keyboard`:`mouse-or-touch`}),ie=!kt(l,ne);(De(n)||Oe(n))&&ae.current!=m&&(ae.current=m,!ie&&m!==0?ee?nt(e,m<0?Be:Ve):nt(e,m<0?He:Ue):nt(e,0)),ie&&(te(ne),_.current.layout=ne,c&&c(ne),Ot(u,ne,re.current))}},[]),me=(0,y.useCallback)((e,t)=>{let{onLayout:n}=g.current,{layout:r,panelDataArray:i}=_.current,a=i.map(e=>e.constraints),{panelSize:o,pivotIndices:s}=Gt(i,e,r);C(o!=null,`Panel size not found for panel "${e.id}"`);let c=pt({delta:Wt(i,e)===i.length-1?o-t:t-o,initialLayout:r,panelConstraints:a,pivotIndices:s,prevLayout:r,trigger:`imperative-api`});kt(r,c)||(te(c),_.current.layout=c,n&&n(c),Ot(i,c,re.current))},[]),he=(0,y.useCallback)((e,t)=>{let{layout:n,panelDataArray:r}=_.current,{collapsedSize:i=0,collapsible:a}=t,{collapsedSize:o=0,collapsible:s,maxSize:c=100,minSize:l=0}=e.constraints,{panelSize:u}=Gt(r,e,n);u!=null&&(a&&s&&lt(u,i)?lt(i,o)||me(e,o):u<l?me(e,l):u>c&&me(e,c))},[me]),ge=(0,y.useCallback)((e,t)=>{let{direction:n}=g.current,{layout:r}=_.current;if(!p.current)return;let i=bt(e,p.current);C(i,`Drag handle element not found for id "${e}"`);let a=wt(n,t);ee({dragHandleId:e,dragHandleRect:i.getBoundingClientRect(),initialCursorPosition:a,initialLayout:r})},[]),_e=(0,y.useCallback)(()=>{ee(null)},[]),ve=(0,y.useCallback)(e=>{let{panelDataArray:t}=_.current,n=Wt(t,e);n>=0&&(t.splice(n,1),delete re.current[e.id],_.current.panelDataArrayChanged=!0,ne())},[ne]),ye=(0,y.useMemo)(()=>({collapsePanel:v,direction:r,dragState:m,expandPanel:b,getPanelSize:oe,getPanelStyle:se,groupId:f,isPanelCollapsed:S,isPanelExpanded:ue,reevaluatePanelConstraints:he,registerPanel:de,registerResizeHandle:fe,resizePanel:me,startDragging:ge,stopDragging:_e,unregisterPanel:ve,panelGroupElement:p.current}),[v,m,r,b,oe,se,f,S,ue,he,de,fe,me,ge,_e,ve]),be={display:`flex`,flexDirection:r===`horizontal`?`row`:`column`,height:`100%`,overflow:`hidden`,width:`100%`};return(0,y.createElement)(ce.Provider,{value:ye},(0,y.createElement)(u,{...d,children:t,className:n,id:a,ref:p,style:{...be,...l},[x.group]:``,[x.groupDirection]:r,[x.groupId]:f}))}var Ut=(0,y.forwardRef)((e,t)=>(0,y.createElement)(Ht,{...e,forwardedRef:t}));Ht.displayName=`PanelGroup`,Ut.displayName=`forwardRef(PanelGroup)`;function Wt(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function Gt(e,t,n){let r=Wt(e,t),i=r===e.length-1?[r-1,r]:[r,r+1],a=n[r];return{...t.constraints,panelSize:a,pivotIndices:i}}function Kt({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){(0,y.useEffect)(()=>{if(e||n==null||r==null)return;let i=bt(t,r);if(i==null)return;let a=e=>{if(!e.defaultPrevented)switch(e.key){case`ArrowDown`:case`ArrowLeft`:case`ArrowRight`:case`ArrowUp`:case`End`:case`Home`:e.preventDefault(),n(e);break;case`F6`:{e.preventDefault();let n=i.getAttribute(x.groupId);C(n,`No group element found for id "${n}"`);let a=ht(n,r),o=gt(n,t,r);C(o!==null,`No resize element found for id "${t}"`),a[e.shiftKey?o>0?o-1:a.length-1:o+1<a.length?o+1:0].focus();break}}};return i.addEventListener(`keydown`,a),()=>{i.removeEventListener(`keydown`,a)}},[r,e,t,n])}function qt({children:e=null,className:t=``,disabled:n=!1,hitAreaMargins:r,id:i,onBlur:a,onClick:o,onDragging:s,onFocus:c,onPointerDown:l,onPointerUp:u,style:d={},tabIndex:f=0,tagName:p=`div`,...m}){let ee=(0,y.useRef)(null),h=(0,y.useRef)({onClick:o,onDragging:s,onPointerDown:l,onPointerUp:u});(0,y.useEffect)(()=>{h.current.onClick=o,h.current.onDragging=s,h.current.onPointerDown=l,h.current.onPointerUp=u});let te=(0,y.useContext)(ce);if(te===null)throw Error(`PanelResizeHandle components must be rendered within a PanelGroup container`);let{direction:ne,groupId:re,registerResizeHandle:ie,startDragging:ae,stopDragging:g,panelGroupElement:_}=te,v=pe(i),[b,oe]=(0,y.useState)(`inactive`),[se,S]=(0,y.useState)(!1),[ue,de]=(0,y.useState)(null),fe=(0,y.useRef)({state:b});le(()=>{fe.current.state=b}),(0,y.useEffect)(()=>{if(n)de(null);else{let e=ie(v);de(()=>e)}},[n,v,ie]);let me=r?.coarse??15,he=r?.fine??5;(0,y.useEffect)(()=>{if(n||ue==null)return;let e=ee.current;C(e,`Element ref not attached`);let t=!1;return Xe(v,e,ne,{coarse:me,fine:he},(e,n,r)=>{if(!n){oe(`inactive`);return}switch(e){case`down`:{oe(`drag`),t=!1,C(r,`Expected event to be defined for "down" action`),ae(v,r);let{onDragging:e,onPointerDown:n}=h.current;e?.(!0),n?.();break}case`move`:{let{state:e}=fe.current;t=!0,e!==`drag`&&oe(`hover`),C(r,`Expected event to be defined for "move" action`),ue(r);break}case`up`:{oe(`hover`),g();let{onClick:e,onDragging:n,onPointerUp:r}=h.current;n?.(!1),r?.(),t||e?.();break}}})},[me,ne,n,he,ie,v,ue,ae,g]),Kt({disabled:n,handleId:v,resizeHandler:ue,panelGroupElement:_});let ge={touchAction:`none`,userSelect:`none`};return(0,y.createElement)(p,{...m,children:e,className:t,id:i,onBlur:()=>{S(!1),a?.()},onFocus:()=>{S(!0),c?.()},ref:ee,role:`separator`,style:{...ge,...d},tabIndex:f,[x.groupDirection]:ne,[x.groupId]:re,[x.resizeHandle]:``,[x.resizeHandleActive]:b===`drag`?`pointer`:se?`keyboard`:void 0,[x.resizeHandleEnabled]:!n,[x.resizeHandleId]:v,[x.resizeHandleState]:b})}qt.displayName=`PanelResizeHandle`;const Jt=p.getDesignToken();var Yt=c(`position:relative;width:1px;.devops-resize-handle-line{position:absolute;width:1px;height:100%;background-color:`,Jt.colorBorder,`;}&[data-resize-handle-state="hover"],&[data-resize-handle-state="drag"]{.devops-resize-handle-line{width:3px;left:-1px;background-color:`,Jt.colorPrimaryBgHover,`;}}`,``);const Xt=({autoSaveId:e,left:t,center:n,right:r,leftProps:o,centerProps:s,rightProps:c})=>a(Ut,{direction:`horizontal`,autoSaveId:e,children:[t&&i(he,{order:1,...o,children:t}),t&&n&&i(qt,{className:Yt,children:i(`div`,{className:`devops-resize-handle-line`})}),n&&i(he,{order:2,...s,children:n}),(t||n)&&r&&i(qt,{className:Yt,children:i(`div`,{className:`devops-resize-handle-line`})}),r&&i(he,{order:3,...c,children:r})]}),Zt=[`1	世界是一切发生的事情。`,`1.1	世界是事实的总体，而不是事物的总体。`,`1.11	世界为诸事实所规定，为它们即是<emphasis>全部</emphasis>事实所规定。`,`1.12	因为事实的总体规定那发生的事情，也规定那所有未发生的事情。`,`1.13	在逻辑空间中的诸事实就是世界。`,`1.2	世界分解为诸事实。`,`1.21	每项事情可以发生或者不发生，其余的一切则仍保持原样。`,`2	发生的事情，即事实，就是诸事态<footnote>“Sachverhalt”一词较早的英译文中都按照罗素的用语译为“原子事实”（atomic fact）。鉴于维特根斯坦对该词的使用与罗素的用语意思不全相同，因此在这里按照《逻辑哲学论》较新的英译本（1961年 D.F.皮尔斯和 B.F.麦克吉尼斯译）译为“事态”（State of affairs）。——译者</footnote>的存在。`,`2.01	事态是对象（事物）的结合。`,`2.011	事物的本质在于能够成为事态的组成部分。`,`2.012	逻辑中没有偶然的东西：如果一个事物<emphasis>能够</emphasis>出现在一个事态中，那么该事态的可能性必定已经预含于该事物之中。`,`2.0121	如果一个事物本身能够独立存在，那么后来的适合于它的状况看来就是一种偶然的事情。
如果事物能够出现于事态之中，那么这一可能性必定一开始就已经存在于事物之中。
（在逻辑中没有纯粹是可能的事情。逻辑涉及每一种可能性，而一切可能性都是逻辑的事实。）
正如我们根本不能在空间之外思想空间对象，或者在时间之外思想时间对象一样，离开同其他对象结合的可能性，我们也<emphasis>不能</emphasis>思想一个对象。
如果我能够思想在事态中结合的对象，我就不能离开这种结合的<emphasis>可能性</emphasis>来思想对象。`,`2.0122	事物就其能够出现在一切<emphasis>可能的</emphasis>状况中而言是独立的，但是这种独立性的形式是一种与事态相联系的形式，即一种依赖的形式。（词以两种不同的方式——单独地和在命题中——出现是不可能的。）`,`2.0123	假如我知道一个对象，我也就知道它出现于诸事态中的所有可能性。
（每一个这种可能性必定在该对象的本性中。）
之后不可能发现新的可能性。`,`2.01231	如果我要知道一个对象，虽然我不一定要知道它的外在性质，但是我必须知道它的一切内在性质。`,`2.0124	如果给出所有的对象，那么同时也就给出了所有<emphasis>可能的</emphasis>事态。`,`2.013	每个事物都像是在一个可能事态的空间里。我可以设想这个空间是空的，但是我不能设想没有这空间的事物。`,`2.0131	空间对象必须处在无限的空间之中。（一个空间点就是一个主目位置。）
视域里的一个斑块，虽然不一定是红的，但它必须有某种颜色：所以说它被颜色空间[Farbenraum]所包围。音调必须具有<emphasis>某种</emphasis>高度，触觉对象必须具有<emphasis>某种</emphasis>硬度，等等。`,`2.014	对象包含着一切状况的可能性。`,`2.0141	对象出现在诸事态中的可能性就是对象的形式。`,`2.02	对象是简单的。`,`2.0201	每一个关于复合物的陈述可以分解为关于其各组成部分的陈述，分解为完全地描述该复合物的一些命题。`,`2.021	对象构成世界的实体。因此它们不能是复合的。`,`2.0211	假如世界没有实体，那么一个命题是否有意义就依赖于另一个命题是否为真。`,`2.0212	在这种情况下就不可能勾画出世界的任何图像（真的或假的）。`,`2.022	显然，一个想象的世界，无论它怎样不同于实在的世界，必有某种东西——一种形式——为它与实在的世界所共有。`,`2.023	正是诸对象构成这种不变的形式。`,`2.0231	世界的实体只<emphasis>能</emphasis>规定一种形式，而不能规定任何物质的属性。因为物质的属性只有通过命题来表述——只有通过对象的配置来构成。`,`2.0232	顺便说一下，对象是无色的。`,`2.0233	如果两个对象具有相同的逻辑形式，除了它们外在性质的差异之外，它们之间唯一的区别就是：它们是不同的。`,`2.02331	或者一个事物具有别的任何事物都没有的属性，这时我们可以直接用一个描述使它同别的事物区分开来并指谓它；或者另一种情形，有好几个事物，它们的全部属性都是共有的，这时就完全不可能从它们之中指出某一个来。
因为如果没有任何东西来区分一个事物，我就不能区分它，不然的话它总是会被区分开来的。`,`2.024	实体是独立于发生的事情而存在的。`,`2.025	它是形式和内容。`,`2.0251	空间、时间和颜色（有色性）是对象的形式。`,`2.026	如果世界要有一个不变的形式，就必须要有对象。`,`2.027	不变者、实存者和对象是一个东西。`,`2.0271	对象是不变的和实存的；它们的配置则是可变的和不定的。`,`2.0272	对象的配置构成事态。`,`2.03	在事态中对象就像链条的环节那样互相勾连。`,`2.031	在事态中对象之间以一定的方式相互关联。`,`2.032	对象在事态中发生联系的一定的方式，即是事态的结构。`,`2.033	形式是结构的可能性。`,`2.034	事实的结构由诸事态的结构组成。`,`2.04	存在的事态的总体即是世界。`,`2.05	存在的事态的总体也规定哪些事态不存在。`,`2.06	事态的存在和不存在即是实在。（我们还把事态的存在称为肯定的事实，把事态的不存在称为否定的事实。）`,`2.061	事态相互间是独立的。`,`2.062	从一个事态的存在或不存在不能推出另一个事态的存在或不存在。`,`2.063	全部实在即是世界。`,`2.1	我们给我们自己建造事实的图像。`,`2.11	图像描述逻辑空间中的情况，即事态的存在或不存在。`,`2.12	图像是实在的一种模型。`,`2.13	在图像中图像的要素与对象相对应。`,`2.131	在图像中图像的要素代表对象。`,`2.14	图像的要素以一定的方式相互关联而构成为图像。`,`2.141	图像是一种事实。`,`2.15	图像的要素以一定的方式相互关联，这表明事物也是以同样方式相直关联的。
图像要素的这种关联称为图像的结构，而这种结构的可能性则称为图像的图示形式。`,`2.151	图示形式是这种可能性，即事物之间的联系方式和图像要素之间的联系方式是相同的。`,`2.1511	图像就是<emphasis>这样</emphasis>依附于实在的；它直接触及实在。`,`2.1512	它就像一把衡量实在的标尺。`,`2.15121	只有分度线的端点才真正<emphasis>接触到</emphasis>被测量的对象。`,`2.1513	按照这种理解，图像也应包含使之成为图像的图示关系。`,`2.1514	图示关系是由图像要素和事物之间的相关构成的。`,`2.1515	这些相关像是图像要素的触角，图像通过这些触角而接触实在。`,`2.16	事实要成为图像，它和被图示者必须有某种共同的东西。`,`2.161	在图像和被图示者中必须有某种同一的东西，因此前者才能是后者的图像。`,`2.17	图像为了能以自己的方式——正确地或错误地——图示实在而必须和实在共有的东西，就是它的图示形式。`,`2.171	图像能够图承其形式为图像所具有的一切实在。
空间图像能够图示一切空间的东西，颜色图像能够图示一切有色的东西，等等。`,`2.172	然而图像不能图示它的图示形式；图像显示它的图示形式。`,`2.173	图像从外部表现它的对象。（它的观点就是它的表现形式。）因此图像会正确地或错误地表现它的对象。`,`2.174	然而图像本身不能处在它的表现形式之外。`,`2.18	任何图像，无论具有什么形式，为了能够一般地以某种方式正确或错误地图示实在而必须和实在共有的东西，就是逻辑形式，即实在的形式。`,`2.181	若图示形式为逻辑形式，图像即称为逻辑图像。`,`2.182	每一个图像<emphasis>同时也</emphasis>是一个逻辑图像。（另一方面，例如，并非每一个图像都 是一个空间图像。）`,`2.19	逻辑图像可以图示世界。`,`2.2	图像和被图示者共有逻辑图示形式。`,`2.201	图像用表现事态存在和不存在的可能性来图示实在。`,`2.202	图像表现逻辑空间中的一种可能状况。`,`2.203	图像包含它所表现的状况的可能性。`,`2.21	图像与实在符合或者不符合；它是正确的或者错误的，真的或者假的。`,`2.22	图像通过图示形式表现它所表现的东西，而与图像本身为真或为假无关。`,`2.221	图像所表现的东西是图像的意义。`,`2.222	图像的真或假就在于它的意义与实在符合或者不符合。`,`2.223	要能看出图像的真假，必须将它同实在比较。`,`2.224	单从图像自身不能看出它的真假。`,`2.225	没有先天为真的图像。`,`3	事实的逻辑图像是思想。`,`3.001	“事态是可以思想的”，意思是说，我们自己可以构造事态的图像。`,`3.01	真的思想的总体就是一幅世界的图像。`,`3.02	思想包含它所思想的情况的可能性。可以思想的东西也就是可能的东西。`,`3.03	我们不能思想非逻辑的东西，否则我们就必须非逻辑地思想。`,`3.031	常言道，上帝能够创造一切，只是不能创造速反逻辑规律的东西。这就是说，我们不能<emphasis>说</emphasis>一个“非逻辑的”世界会是什么样子。`,`3.032	在语言中不能表现任何“违反逻辑”的东西，就像在几何学中不能用坐标来表现违反空间规律的图形，或者给出一个并不存在的点的坐标一样。`,`3.0321	虽然我们能在空间上表现一个违反物理规律的事态，但是我们不能在空间上表现一个违反几何规律的事态。`,`3.04	如果一个思想是先天地正确的，那么它就是一个其可能性即保证了其真理性的思想。`,`3.05	仅当一个思想的真从它自身（无须同任何东西比较）就能看出时，我们才有关于一个思想为真的先天的知识。`,`3.1	思想在命题中得到了一种可由感官感知到的表达。`,`3.11	我们用命题中的可由感官感知的记号（声音的或书写的记号等等）作为可能情况的投影。
投影的方法就是思考命题的意义。`,`3.12	我们用以表达思想的记号我称为命题记号。一个命题就是一个处在对世界的投影关系中的命题记号。`,`3.13	命题包括投影所包括的一切，而不包括被投影者。
因此命题包括的是被投影者的可能性，而不是被投影者本身。
因此命题中也不包含命题的意义，而只包含表达其意义的可能性。
（“命题的内容”是指有意义的命题的内容。）
命题中包含命题意义的形式而非其内容。`,`3.14	命题记号的构成，在于其中的要素（语词）是以一定方式相互关联的。
命题记号即是事实。`,`3.141	命题不是词的混合。——（就像音乐的主旋律不是音调的混合一样。）
命题是可以有节奏地说出的［artikuliert］。`,`3.142	只有事实才能表达意义，一组名称不能表达意义。`,`3.143	虽然命题记号即是事实，但是这一点却被通常的书写和印刷的表达形式所掩盖。
因为，例如在一个印刷出来的命题中，命题记号和词之间看起来并没有重大差别。
（这可能就是使弗雷格把命题称为复合名称的原因。）`,`3.1431	如果我们设想一个命题记号是由一些空间对象（例如桌子、椅子和书本）组成，而不是由一些书写记号组成，它的本质就会看得很清楚。
于是这些东西的空间分布就表达出这个命题的意义。`,`3.1432	我们必不可说：“复合记号‘aRb’说的是 a 和 b 处在关系 R 中”，而必须说：“‘a’和‘b’”处于某种关系中<emphasis>这一事实</emphasis>说的是，aRb <emphasis>这一事实</emphasis>。”`,`3.144	情况可以描述，但是不能<emphasis>命名</emphasis>。
（名称像是一些点；命题像是一些箭头——它们具有意义。）`,`3.2	在命题中思想可以这样来表达，使得命题记号的要素与思想的对象相对应。`,`3.201	我称这些要素为“简单记号”，称这命题为“完全分析了的”命题。`,`3.202	命题中使用的简单记号称为名称。`,`3.203	名称意指对象。对象是名称的指谓。（“A”和“A”是同一个记号。）`,`3.21	简单记号在命题记号中的配置；对应于对象在情况中的配置。`,`3.22	对象只能<emphasis>被命名</emphasis>。记号是对象的代表。我只能谈<emphasis>到</emphasis>对象，而不能<emphasis>用语词说出它们来</emphasis>。命题只能说事物是<emphasis>怎样的</emphasis>，而不能说它们是<emphasis>什么</emphasis>。`,`3.23	要求简单记号的可能性，就是要求意义的确定性。`,`3.24	关于复合物的命题与关于其组成部分的命题有一种内在的关系。
复合物只能通过对它的描述而给出，这描述可以是正确的或错误的。说到一个复合物的命题，如果这个复合物不存在，那么这个命题不是无意义的，而只是假的。
当一个命题要素标示一个复合物时，可以从它在其中出现的命题的不确定性看出来。我们<emphasis>知道</emphasis>，这种情形下这个命题有些东西是没有规定的。（概括性记号总是<emphasis>包含</emphasis>一种原型。）
把复合物的符号压缩为简单符号，可以用定义来表达。`,`3.25	命题有一个而且只有一个完全的分析。`,`3.251	命题以确定的可以清楚陈述的方式表达它所表达的东西：命题是可以有节奏地说出的。`,`3.26	名称不可用定义来作任何进一步的分析：名称是一种初始记号。`,`3.261	每个被定义的记号<emphasis>通过</emphasis>那些定义它的记号而起标示作用；定义则指明这一途径。
两个记号，如果一个是初始记号，而另一个是用一些初始记号定义的记号，则二者不能以相同的方式起标示作用。名称<emphasis>不能</emphasis>用定义来分解。（任何一个自身独立地具有指谓的记号也是如此。）`,`3.262	记号不能表达的东西，其应用显示之。记号隐略了的东西，其应用清楚地说出之。`,`3.263	初始记号的指谓可以通过解释来说明。解释就是包含初始记号的命题。所以只有已经知道这些记号的指谓，才能理解它们。`,`3.3	只有命题才有意义；只有在命题的联系关系中名称才有指谓。`,`3.31	命题中表征其意义的每个部分我都称为表达式（或符号）。
（命题本身是一个表达式。）
凡是能够为诸命题所共有、对于命题的意义具有本质重要性的，都是表达式。
一个表达式标志一个形式和一个内容。`,`3.311	表达式以它能够在其中出现的所有命题的形式为前提。它是一类命题的共同特征的标记。`,`3.312	因此表达式表现为它所表征的那些命题的一般形式。
事实上，在这一形式中表达式为<emphasis>常项</emphasis>，而其余的一切都是<emphasis>变项</emphasis>。`,`3.313	因此表达式为一变项所表现，这变项的值就是那些包含该表达式的命题。
（在极限情况下，变项成为常项，表达式成为命题。）
我称这样一种变项为“命题变项”。`,`3.314	表达式只有在命题中才有指谓。所有变项都可理解为命题变项。
（连变名也一样。）`,`3.315	如果我们把命题的一个组成部分改为变项，就有了一类命题，它们全都是由此得来的变项命题的值。这个类一般还依赖于我们按任意约定所给予的原来命题各组成部分的指谓。但是，如果把其中已任意规定了指谓的所有记号都改为变项，仍然会得到一个这样的类。这个类不再依赖于任何约定，而仅仅依赖于命题的本性。它相应于一种逻辑形式——一种逻辑原型。`,`3.316	一个命题变项可以取一些什么值是某种被规定了的东西。
值的规定<emphasis>即是</emphasis>变项。`,`3.317	规定命题变项的值就是<emphasis>给出</emphasis>以这变项为共同特征的<emphasis>那些命题</emphasis>。
规定就是描述这些命题。
因此规定只涉及符号，而不涉及它们的指谓。
对于规定来说<emphasis>唯一</emphasis>重要的事情在于，<emphasis>它仅仅是对符号的描述</emphasis>，<emphasis>而对符号所标示的东西不作任何陈述</emphasis>。
命题的描述如何产生，那是不重要的。`,`3.318	像弗雷格和罗素一样，我把命题看成是其中包含的表达式的函项。`,`3.32	记号是一个符号中可以被感官感知到的东西。`,`3.321	故同一个记号（书写记号或声音记号等等）可以为两个不同的符号所共有——这时两者是以不同的方式在标示。`,`3.322	如果我们应用同一个记号，而以不同的标示方式来标示两个不同的对象，这 样做决不能指示这两者有一个共同的特征。当然，这是因为这记号是未加规定的。因此 我们可以选用两个不同的记号，这样，标示者一方还保持有什么共同点呢？`,`3.322	如果我们应用同一个记号，而以不同的<emphasis>标示方式</emphasis>来标示两个不同的对象，这样做决不能指示这两者有一个共同的特征。当然，这是因为这记号是未加规定的。因此我们可以选用两个不同的记号，这样，标示者一方还保持有什么共同点呢？`,`3.323	在日常语言中经常碰到同一个词有着不同的标示方式——因而属于不同的符号——，或者有着不同标示方式的两个词以表面上相似的方式应用于命题之中。
就如“是”（ist）这个词既作为系词，也作为相等的记号和存在的表达式<footnote>德语“ist”一间也可用作表示“存在’、“有”。——译者</footnote>出现，“存在”（existieren）作为像“去”（gehen）一样的不及物动词出现；“同一的”（identisch）作为一个形容词出现；我们说到<emphasis>某事</emphasis>，同时也意味着说到<emphasis>某事</emphasis>的发生。
（在命题“Gtün ist grün<footnote>“格林是不成熟的。”——译者</footnote>”中，第一个词“Grün”是一个人的专名，最后一个词“grün”是一个形容词，这两个词不仅具有不同的指谓，而且它们是<emphasis>不同的符号</emphasis>。）`,`3.324	这样就容易发生最根本的混淆（整个哲学充满着这类混淆）。`,`3.325	为了避免这类错误，我们必须使用一种能够排除这类错误的记号语言，其中不将同一记号用于不同的符号中，也不以表面上相似的方式应用那些有着不同的标示方式的记号：也就是说，要使用一种遵从<emphasis>逻辑</emphasis>语法——逻辑句法——的语言记号。
（弗雷格和罗素的概念记号系统就是这样的一种语言，诚然它也还未能排除一切错误。）`,`3.326	为了通过其记号来辨识一个符号，我们必须在有意义的使用中观察它。`,`3.327	记号只有结合它的符合逻辑句法的应用才能规定一种逻辑形式。`,`3.328	如果一个记号是<emphasis>无用的</emphasis>，它也就是无指谓的。这就是奥卡姆准则的要旨<footnote>指奥卡姆的名言：“如无必要，勿增实体”；哲学史上称之为“奥卡姆剃刀”。——译者</footnote>。
（如果一切情况都表明一个记号具有指谓，那么这个记号就是具有指谓的。）`,`3.33	在逻辑句法中，记号的指谓决不应起任何作用。逻辑句法应该无须提到记号的<emphasis>指谓</emphasis>而建立起来；它<emphasis>仅仅</emphasis>以表达式的描述为前提。`,`3.331	根据这一见解我们回过来看罗素的“类型论”：罗素的错误显然在于，他在建立记号的规则时必须提到记号的指谓。`,`3.332	没有一个命题能够作出关于自身的陈述，因为一个命题记号不能包含于它自身之中（这就是全部的“类型论”）。`,`3.333	一个函项所以不能成为它自身的主目，因为函项的记号已经包含着其主目的原型，而且它不能包含自身。
让我们假设函项 F（fx）可以成为它自身的主目，这时就会有一个命题“F（F（fx））”，其中的外函项 F 和内函项 F 必定有不同的指谓，因为内函项具有 ϕ（fx）的形式，而外函项则具有 Ψ（ϕ（fx））的形式。只有字母“F”对于两个函项是共同的，但是字母本身不标示任何东西。
如果我们把“F（F（u））”写作“（∃ϕ）：F（ϕu）·ϕu＝Fu”，这一点就立刻清楚了。
这样罗素的悖论就消解了。`,`3.334	只要我们知道每一个别记号如何起标示作用，逻辑句法的规则就应当是自明的。`,`3.34	命题具有本质特征和偶然特征。
偶然特征是随同产生命题记号的特定方式而来的特征，本质特征则是命题为了能够表达其意义所必不可少的那些特征。`,`3.341	因此一个命题中本质的东西，是所有能够表达相同意义的命题共有的东西。
同样地，一般说来，一个符号中本质的东西，是所有能够达到同一目的的符号共有的东西。`,`3.3411	因此可以说：一个对象的真正的名称，是所有标示这个对象的符号共有的东西。由此可以依次得出，任何一种组合对于一个名称都不是本质的。`,`3.342	虽然我们的记号系统中确有某种随意的东西，但是如下<emphasis>这一点</emphasis>却不是随意的： 即<emphasis>只要</emphasis>我们随意地规定了一个东西，某种其它的东西就必然要发生。（这一点来自记号系统的<emphasis>本质</emphasis>。）`,`3.3421	一种特定的标示样式也许是不重要的，但它是一种<emphasis>可能的</emphasis>标示样式，这一点永远是重要的。在哲学中一般地正是这样：个别的情形总是一再表明是不重要的，但是每一个别情形的可能性都揭示了关于世界本质的某种东西。`,`3.343	定义是从一种语言翻译为另一种语言的规则。凡是正确的记号语言都应该按照这种规则可以翻译为任何其它一种语言：<emphasis>这一点</emphasis>是一切正确的记号语言所共有的。`,`3.344	在一个符号中起标示作用的东西，是依据逻辑句法规则可以代换这个符号的一切符号所共有的东西。`,`3.3441	例如我们可以这样来表述所有真值函项记号系统共同的东西：它们的共同之处在于，比如说，它们每一种都<emphasis>能够</emphasis>用“～P”（“非 P”）和“P V q”（“P 或 q”）构 成的记号系统来<emphasis>替换</emphasis>。
（这就表明了一种特定记号系统的可能性如何能够揭示某种一般东西的方式。）`,`3.3442	复合物记号在分析中不能这样随意地分解，以致在不同的命题结合中它的每一次分解都不相同。`,`3.4	一个命题规定逻辑空间中的一个位置。命题的各组成部分的存在——有意义的命题的存在，即保证了这种逻辑位置的存在。`,`3.41	命题记号加上逻辑坐标，即是逻辑位置。`,`3.411	几何位置和逻辑位置的一致之处在于，二者都是某物存在的可能性。`,`3.42	一个命题虽然只能规定逻辑空间中的一个位置，然而整个逻辑空间也应该已经由它而给出。
（不然的话，通过否定、逻辑和、逻辑积等等就会在坐标上不断引入新的要氛）
（围绕着一个图像的逻辑脚手架规定着逻辑空间。一个命题有贯通整个逻辑空间的力量。）`,`3.5	被使用的、被思考的命题记号即是思想。`,`4	思想是有意义的命题。`,`4.001	命题的总体即是语言。`,`4.002	人有能力构造语言，可以用它表达任何意义，而无须想到每一个词怎样具有指谓和指谓的是什么。——就像人们说话时无须知道每个声音是怎样发生的一样。
日常语言是人的机体的一部分，而且也像机体那样复杂。
人不可能直接从日常语言中懂得语言逻辑。
语言掩饰着思想。而且达到这种程度，就像不能根据衣服的外形来推出它所遮盖的思想的形式一样；因为衣服外形的设计不是为了揭示身体的形状，而是为了全然不同的目的。
理解日常语言所要依赖的种种默契是极其复杂的。`,`4.003	关于哲学问题所写的大多数命题和问题，不是假的而是无意义的。因此我们根本不能回答这类问题，而只能确定它们的无意义性。哲学家们的大多数命题和问题，都是因为我们不懂得我们语言的逻辑而产生的。
（它们都是像善是否比美更为同一或者更不同一之类的问题。）
因而用不着奇怪，一些最深刻的问题实际上却根本<emphasis>不是</emphasis>问题。`,`4.0031	全部哲学都是一种“语言批判”（当然不是在毛特纳的意义上的批判。）罗素的功绩在于指明了一个命题表面的逻辑形式不一定就是它真正的逻辑形式。`,`4.01	命题是实在的图像。
命题是我们所想象的实在的模型。`,`4.011	乍看起来，一个命题——例如印在纸上的某个命题——不像是它所论及的实在的一个图像。但是书写的音符乍看起来也不像是一首乐曲的图像，我们的声音记号（字母）也不像是我们口语的图像。
然而，即使在通常的意义下，这些记号语言也证明是它们所表现的东西的图像。`,`4.012	显然，一个“aRb”形式的命题使我们产生一个图像的印象。这种情况下这个记号显然是被标示者的一个相像物。`,`4.013	如果我们深入到图像特性的本质，就会看到，这种特性并<emphasis>不</emphasis>因<emphasis>表面的不规则性</emphasis>（如乐谱中使用 ♯ 和 ♭）而蒙受损害。
因为就是这种不规则性也图示它们想要表达的东西；不过用的是另外一种方式。`,`4.014	留声机唱片、音乐思想、乐谱、声波，彼此之间都处在一种图示的内在关系之中，这就是语言和世界之间具有的关系。
它们的逻辑结构都是共同的。
（就像童话里的两个少年，他们的两匹马和他们的百合花。在某种意义上，他们都是同一的。）`,`4.0141	有一条总的规则，使得音乐家能从总谱读出交响乐，使得我们能够通过唱片的沟纹放出交响乐来.而且应用原规则还可以从交响乐重新推得总谱。这些看起来完全不同的东西之间的内在相似性正在于此。这条规则就是将交响乐投射到音符语言上去的投影法则，也是把这种音符语言翻译为唱片语言的规则。`,`4.015	所有的比喻以及所有的表达方式的图示性质，其可能性都是基于图示的逻辑。`,`4.016	为了理解命题的本质，我们可以看一看象形文字，它图示着它所描述的事实。
从象形文字发展而来的字母文字，并未失去图示的本质。`,`4.02	我们看出这一点是基于如下事实：无须向我们解释我们就理解命题记号的意义。`,`4.021	命题是实在的图像；因为当我理解一个命题，我就知道它所表述的情况，而且无须向我解释其意义，我就理解这个命题。`,`4.022	命题<emphasis>显示</emphasis>其意义。
命题<emphasis>显示当</emphasis>它为真时事情是怎样的，而且<emphasis>宣称</emphasis>事情就是这样的。`,`4.023	命题对实在的确定必须达到二者取一：是或者否。
为此命题必须完全地描述实在。
命题是对事态的描述。
正如一个对象是通过给出其外部属性来加以描述一样命题是通过实在的内部属性来描述实在的。
命题借助一种逻辑的脚手架来构造一个世界，因此<emphasis>如果</emphasis>一个命题为真，就可从中看出所有合乎逻辑的东西是怎样的。人们可以从假的命题<emphasis>作出推论</emphasis>。`,`4.024	理解一个命题意味着知道若命题为真事情该是怎样的。
（因此，不知道一个命题是否为真也可以理解它。）
理解一个命题的组成部分也就理解这个命题。`,`4.025	把一种语言翻译为另一种语言时，我们并不是把一种语言的每一个<emphasis>命题</emphasis>翻译为另一种语言的<emphasis>命题</emphasis>，而是只翻译命题的组成部分。
（字典不仅翻译名词，也翻译动词、形容词和连接词等等，它以同样方式对待所有这些词。）`,`4.026	必须向我们解释简单记号（词）的指谓，我们才能理解它们。
但是我们可以用命题清楚地表达自己的意思。`,`4.027	命题能够传达<emphasis>新的</emphasis>意义，这一点属于命题的本质。`,`4.03	命题必须用已有的表达式来传达新的意义。
命题传达情况，因此它必定<emphasis>在本质上</emphasis>与情况有关联。
而这种关联恰恰在于，命题是情况的逻辑图像。
命题仅仅在它是一个图像时才能陈述某种东西。`,`4.031	在命题中情况就像是用试验的方法组合起来的。
可以径直说：“这个命题表述如此这般的情况”，而不说：“这个命题有如此这般的意义”。`,`4.0311	一个名称代表一个事物，另一个名称代表另一个事物，而且它们是彼此组合起来的；这样它们整个地就像一幅活的画一样表现一个事态。`,`4.0312	命题的可能性建立在对象以记号为其代表物这一原理的基础上。
我的一个基本的思想是：“逻辑常项”不是代表物，事实的<emphasis>逻辑</emphasis>是不能有代表物的。`,`4.032	只有当一个命题是合乎逻辑地组合起来的才是一个情况的图像。
（甚至命题“Ambulo”<footnote>拉丁文动词“ambuldare”的第一人称现在时，意为：我走路、我散步。——译者</footnote>也是组合的，因为它的词干配合另一种词尾，或它的词尾配合另一种词干，都会产生不同的意义。）`,`4.04	在一个命题和它所表述的情况中，应该恰好具有同样多的可以区分开来的部分。
两者必定具有同样的逻辑（数学）的多样性。（参照赫兹的《力学》论动力学模型。）`,`4.041	这种数学的多样性本身当然不能再被图示，因为图示时不可能摆脱这种多样性。`,`4.0411	例如，如果我们想把“（x）·fx”所表达的东西，通过在“fx”前面加上一个附标来表达，如写作“Alg·fx” <footnote>“alg”是“Allgemeine”（一般、普遍）的缩写.本条下面的下标‘a’和主目位置的‘A’也是该词的缩写。——译者</footnote>，那是不恰当的：我们会不知道那个附标概括的是什么。如果想用一个下标“a”来标示，如写作“<katex>f(x_a)</katex>”，也不恰当：我们会不知道那个概括记号的范围。
如果试图在主目位置上引入一个标记来表达，如写作“（A，A）·F（A，A），仍然不恰当：我们会不能确立诸变项的同一性。如此等等。
所有这些标示方式都不恰当，因为它们没有必须的数学多样性。`,`4.0412	同样的道理，唯心主义者以“空间眼镜”解释空间关系的视觉是不恰当的，因为它不能解释这些关系的多样性。`,`4.05	实在是与命题相比较的。`,`4.06	命题只因为是实在的图像，才能为真或者为假。`,`4.061	决不可忽略命题有一种独立于事实的意义，否则就很容易认为真和假是记号和它们所标示的东西之间具有同等地位的关系。
例如，这时人们就可以说，“p”以真的方式标示“～p”以假的方式所标示的东西，等等。`,`4.062	我们能否用假命题——只要我们知道它们被认为是假的——来表达自己，就像我们一直用真命题表达自己一样呢？不能！因为如果我们用一个命题来说一些事物处于一定情况，而且它们确实如此，则这个命题为真；如果我们用“p”意指“～p”，而且情况确如我们所指的那样，那么在新的理解下“p”为真而不为假。`,`4.0621	然而记号“p”和“～p”<emphasis>能</emphasis>说同样的东西，这一点很重要，因为它表明实在中没有与记号“～”相对应的东西。
一个命题中出现的否定，不足以表征这个命题的意义（～～”p”＝p）。
命题“p”和“～p”具有相反的意义，但是和它们相对应的是同一个实在。`,`4.063	可用一个比喻来说明真这个概念：设想白纸上有一个黑斑块：通过指明这纸上的每一点是黑的还是白的，就可描述这个斑块的形状。一个点是黑的事实，相应于一个肯定的事实，一个点是白（非黑）的事实，则相应于一个否定的事实。如果我在纸面上指出一个点（即弗雷格所谓的真值），这就相应于一个为判断而提出的假定，如此等等。
但是为了能够说出一个点是黑的或者白的，我必须首先知道一个点在什么情况下称为黑的和在什么情况下称为白的：为了能够说“p”为真（或者假），我必须规定在何种惰况下我称“p”为真，并由此而规定这命题的意义。
这一比喻的不足之处在于：即使我们不知道什么是黑的和白的，我们也可以指出纸上的一点；但是如果一个命题没有意义，是没有什么东西与它相对应的，因为它并不标示一个具有可以称为“假”或“真”这种属性的东西（即真值）。一个命题的动词，并非如弗雷格所认为的，“为真”或者“为假”，而是“为真”的东西必须已经包含着动词。`,`4.064	每个命题必须<emphasis>已经</emphasis>具有一个意义：肯定并不能给命题以意义，因为所肯定的东西正好就是命题的意义。这一点同样也适用于否定，等等。`,`4.0641	可以说，否定必定已经与被否定命题所规定的逻辑位置有关。
否定命题规定一个<emphasis>不同于</emphasis>被否定命题所规定的逻辑位置。
否定命题借助被否定命题的逻辑位置来规定一个逻辑位置，因为它是在后者逻辑位置之外来描述后者的。
被否定命题可以再被否定，这本身就表明，被否定者已经是一个命题，而不仅仅是命题的某个起始部分。`,`4.1	命题表述事态的存在和不存在。`,`4.11	真命题的总体就是全部自然科学（或各门自然科学的总体）。`,`4.111	哲学不是自然科学之一。
（“哲学”一词所指的东西，应该位于各门自然科学之上或者之下，而不是同它们并列。）`,`4.112	哲学的目的是从逻辑上澄清思想。
哲学不是一门学说，而是一项活动。
哲学著作从本质上来看是由一些解释构成的。
哲学的成果不是一些“哲学命题”，而是命题的澄清。
可以说，没有哲学，思想就会模糊不清：哲学应该使思想清晰，并且为思想划定明确的界限。`,`4.1121	心理学不比任何其它自然科学更为接近哲学。
知识论是心理学的哲学。
我对记号语言的研究，和哲学家们认为对逻辑哲学如此重要的那种思想过程的研究，难道不是一致的吗？只是在大多数情形下，他们都纠缠于一些非本质的心理学考察，在我的方法这里也有类似的危险。`,`4.1122	达尔文的理论不比自然科学中任何其它一种假设更与哲学有关。`,`4.113	哲学为自然科学划定可以在其中进行争论的范围。`,`4.114	哲学应当为能思考的东西划定界限，从而也为不能思考的东西划定界限。
哲学应当从内部通过能思考的东西为不能思考的东西划定界限。`,`4.115	哲学将通过清楚地表达可说的东西来指谓那不可说的东西。`,`4.116	凡是能思考的东西都能清楚地思考。凡是可以说的东西都可以清楚地说出来。`,`4.12	命题能够表述全部实在，但是不能表述它们为了能够表述实在而必须和实在共有的东西——即逻辑形式。
为了能够表述逻辑形式，我们必须能够和命题一起置身于逻辑之外，也就是说，置身于世界之外。`,`4.121	命题不能表述逻辑形式：后者反映于命题之中。
自行反映在语言中的东西，语言不能表述。
语言中表达了<emphasis>自己</emphasis>的东西，<emphasis>我们</emphasis>不能用语言来表达。
命题<emphasis>显示</emphasis>实在的逻辑形式。
命题展示出这种逻辑形式。`,`4.1211	因此，一个命题“fa”显示：对象 a 出现在该命题的意义中：两个命题“fa”和“ga”则显示：二者说的是同一个对象。
如果两个命题互相矛盾，则它们的结构显示这一点；如果其中一个从另一个推导出来，也由其结构显示出来。如此等等。`,`4.1212	<emphasis>能</emphasis>显示出来的东西，<emphasis>不能</emphasis>说出来。`,`4.1213	现在我们也理解了我们的这种感觉：只要我们的记号语言中一切都得到正确处理，我们也就有了一个正确的逻缉观点。`,`4.122	在某种意义上我们可以谈对象和事态的形式属性，或者，对事实而言，谈它们的结构属性，以及在同一意义上谈它们的形式关系和结构关系。
［我也可以不说“结构属性”而说“内部属性”；不说“结构关系”而说“内部关系”。
我引入这些表达式，是为了指明在哲学家当中广为流行的混淆内部关系和真正的（外部）关系的根源。］
不过，这些内部属性和关系的存在不能通过命题来断言，而是在表述有关事态和涉及有关对象的命题中它们自己显示出来。`,`4.1221	事实的一个内部属性也可以称为这个事实的一个特征（如在我们所说的面部特征的意义上。）`,`4.123	一个属性，如果不能设想它的对象不具有它，它就是一个内部属性。
（因此，这个蓝色同那个蓝色处在浅些或者深些的内部关系中。<emphasis>这</emphasis>两个对象不处在这种关系中是不可设想的。） （在这里，“对象”一词的变化不定的用法和“属性”、“关系”这两个词的变化不定的用法是一致的。）`,`4.124	一个可能情况的某个内部属性的存在，不是用命题来表达，而是在表述这个情况的命题中，通过该命题的一个内部属性自己表达出来。
断言命题具有一种形式属性和否认它具有一种形式属性，同样是无意义的。`,`4.1241	说一种形式具有这种属性而另一种形式具有那种属性，是不可能把两种形式彼此区分开来的：因为这样就要假定二者之中任一属性归属任一形式是有意义的。`,`4.125	可能情况之间的某种内部关系的存在，通过表述这些情况的命题之间的某种内部关系在语言中自己表达出来。`,`4.1251	这里我们就得到了关于“是否所有关系都是内部的或者外部的”这个争论不休的问题的回答。`,`4.1252	一个按照<emphasis>内部</emphasis>关系依次序排列的系列，我称为形式系列。 数列不是按照外部关系，而是按照内部关系依次序排列的。
命题系列也是如此：
“aRb”
“（∃x）：aRx·xRb”
“（∃x, y）：aRx·xRy·yRb”
如此等等。
（如果 b 对 a 处在上述关系之一，我称 b 为 a 的一个后继。）`,`4.126	现在我们也可以在形式属性的意义上来谈形式概念。
（我引入这个表达式，是为了弄清楚那贯穿于整个传统逻辑中的混淆形式概念和真正概念的根源。）
当某种东西归入形式概念而成为后者的一个对象，这一点是不能用命题来表达的，而是在这个对象的记号自身中显示出来。（一个名称显示它标示一个对象，一个数的记号显示它标示一个数，等等。）
形式概念确实不能和专有概念一样从函项来表述。
因为它们的特征，即形式属性，是不能用函项来表达的。
形式属性的表达式是一定符号的特征。
因此，代表一个形式概念特征的记号，是其指谓属于该概念的所有符号的特有特征。
因此，一个形式概念的表达式是一个以这种特有特征为唯一常项的命题变项。`,`4.127	命题变项标示形式概念，命题变项的值标示属于该形式概念的对象。`,`4.1271	每一个变项都是一个形式概念的记号。
因为每一个变项都表示一个为它的所有值具有的不变形式，而这一形式就可以看作为这些值的形式属性。`,`4.1272	因此变名“x”就是<emphasis>对象</emphasis>这个伪概念的专有记号。
凡属正确地使用“对象”（“事物”、“物”，等等）一词的地方，在概念记号系统中总是用变项名称来表达的。
例如，在命题“有两个对象，它们……”中，就用“（∃x，y）…”来表达。
一旦以别种方式来使用这个词，如把它作为专有概念词使用，就只能造成无意义的似是而非的命题。
因此，例如，不能像说“有一些书”那样，说“有一些对象”。同样也不能说“有 100 个对象”，或者，“有 <katex>\\aleph_0</katex><footnote>“ℵ₀”希伯来文字母，表示数学上的无穷数。——译者</footnote>个对象”。
因而说<emphasis>对象的总数</emphasis>是无意义的。
这一点同样适用于“复合物”、“事实”、“函项”、“数”这些词，等等。
它们全都标示形式概念，因而在概念记号系统中用变项来表述，而不是（如弗雷格和罗素所认为的）用函项或者类来表述。
诸如“1是一个数”，“只有一个零”以及一切类似的表达式，都是无意义的。
（说“只有一个 1”就和说“2＋2 在 3 点钟的时候等于 4”一样是无意义的。）`,`4.12721	一个形式概念是随着属于它的任何一个对象的给定而立即给定的，因此，不能把属于一个形式概念的对象<emphasis>和</emphasis>这个形式概念本身一起作为初始观念引入。因此，比如说，不能如罗素那样，把函项概念和特定的函项两者一起作为初始观念引入；或者，把数的概念和确定的数两者一起作为初始观念引入。`,`4.1273	如果我们要在概念记号系统中表达一般命题“b 是 a 的一个后继”，就需要有一个形式系列的一般项的表达式：<centered>aRb，
（∃x）：aRx·xRb，
（∃x，y）：aRx·xRy·yRb，
……</centered>一个形式系列的一般项必须用变项来表达，因为“该形式系列的项”这个概念是一个形式概念。（这一点为弗雷格和罗素所忽略：因此他们用以表达上述那种一般命题的方式是不正确的，其中包含着一种恶性循环。）
我们可以通过给出第一项和由前一命题产生下一项的运算的一般形式来规定形式系列的一般项。`,`4.1274	问一个形式概念是否存在是无意义的，因为不可能有一个命题是对这个问题的回答。
（因此，例如，不能提问“是否存在不可分析的主谓式命题？”这种问题。）`,`4.128	逻辑形式是<emphasis>无</emphasis>数的。
因此在逻辑中没有特殊的数，因此也没有哲学的一元论和二元论的可能性，等等。`,`4.2	命题的意义是它与事态的存在和不存在的可能性符合和不符合。`,`4.21	最简单的命题，即基本命题，断言有一个事态的存在。`,`4.211	不可能有基本命题同它相矛盾，这是一个基本命题的标志。`,`4.22	基本命题由名称组成。它是名称的一种关联，一种联结。`,`4.221	显然，对命题的分析必须达到由名称的直接结合而组成的基本命题。
这就发生了一个问题：命题的结合是怎样产生的？`,`4.2211	即使世界无限复杂，因此每个事实都是由无限多个事态组成，而且每个事态又都是由无限多个对象组合起来，那也仍然必须有诸对象和事态。`,`4.23	名称只有同基本命题发生关联才能在命题中出现。`,`4.24	名称是简单符号，我用单个的字母（“x”、“y”、“z”）来表示。
我把基本命题写作名称的函项，所以它们具有“fx”，“ϕ（x，y）”的形式，等等。
或者我用字母p，q，r来表示它们。`,`4.241	当我使用的两个记号具有同一指谓时，我就在它们之间放入记号“＝”来表达这一点。
因此“a＝b”就意味着记号“b”可以替换记号“a”。
（如果我用等式引进一个新记号“b”，规定它可用以替换已知记号“a”，那么，像罗素那样，我把这个等式（定义）写成“a＝bDef.<footnote>“Def.”为“Definition”（定义）一词的编写。——译者</footnote>”的形式。定义就是一条记号规则。）`,`4.242	因此，“a＝b”形式的表达式不过是一种表述的辅助手段。关于记号“a”和“b”的指谓，它们并没有陈述什么东西。`,`4.243	如果不知道两个名称是标示同一个事物还是标示两个不同事物，我们能够理解这两个名称吗？——如果不知道在一个命题中出现的两个名称的指谓是相同还是不同，我们能够理解这个命题吗？
假如我知道一个英文词和一个具有相同指谓的德文词的指谓：那么我就不可能不知道二者是具有相同指谓的，我必定能把其中一个翻译为另一个。
像“a＝a”这样的表达式以及从中推得的那些表达式，既不是基本命题，也不是另一类有意义的记号。（下面将会表明这一点。）`,`4.25	若一个基本命题为真，事态就存在；若一个基本命题为假，事态就不存在。`,`4.26	若列举出所有为真的基本命题，就完全地描述了世界。世界通过列举所有的基本命题加上列举其中哪些为真哪些为假而被完全地描述。`,`4.27	关于 n 个事态的存在和不存在，有 <katex>K_n=\\sum\\limits_{ν=0}^{n} \\binom{n}{ν}</katex> 种可能性。这些事态的任何一种组合都可存在而同时别的组合不存在。`,`4.28	和这些组合相应的即是同等数目的关于这 n 个基本命题的真（和假）的可能性。`,`4.3	基本命题的真值可能性意指事态存在和不存在的可能性。`,`4.31	我们可用如下这种图式来表述真值可能性（“W”指“真”，“F”指“假”；在基本命题行下面的“W”和“F”的各行，以易于理解的方式标明各种真值可能性）。<custom />`,`4.4	命题是与基本命题的真值可能性符合和不符合的表达式。`,`4.41	基本命题的真值可能性是命题真和假的条件。`,`4.411	这也许立即使人想到，引入基本命题乃是理解所有其它命题的基础。的确，对一般命题的理解<emphasis>显然</emphasis>是依赖于对基本命题的理解的。`,`4.42	关于一个命题与n个基本命题的真值可能性符合和不符合，有 <katex>\\sum\\limits_{K=0}^{K_n} \\binom{K_n}{K}=L_n</katex> 种可能情况。`,`4.43	在图式中我们可用与真值可能性相关的标记“W”（为真）来表达与真值可能性的符合。
没有这个标记就意指不符合。`,`4.431	与基本命题的真值可能性符合和不符合的表达式，表达命题的真值条件。
命题即是其真值条件的表达式。
（因此，弗雷格在解释他的概念记号系统的记号时以真值条件为出发点，是完全正确的。但是弗雷格对真值概念的解释是错误的：如果“真”和“假”真的是对象，而且是～p等等中的主目，那么依照弗雷格的方法，～p的意义就根本是未确定的。）`,`4.44	由标记“W”与真值可能性相关而产生的记号，就是一个命题记号。`,`4.441	很清楚，关于记号“F”和“W”的复合物，并没有对象（或对象的复合物）与之相对应；正好就像没有任何对象与横线、竖线或括号相对应一样。——不存在“逻辑对象”。
当然，这也同样适用于所有和“W”与“F”的图式表达的东西相同的记号。`,`4.442	例如，以下就是一个命题记号：<custom />（弗雷格的“断定号”“⊢”逻辑上是完全无指谓的：在弗雷格（和罗素）的著作中，它不过表示作者主张用这个记号标记的命题是真的。因此，“⊢”不是命题的组成部分，就像命题的编号不是命题的组成部分一样。一个命题不可能宣称自己为真。）
如果一个图式中真值可能性的排列次序是由组合规则一次性地固定好的，那么最后一列本身就是一个真值条件的表达式。将这一列写成为一行，上述命题记号就成为：<centered>“（WW—W）（p，q）”</centered>或者，更清楚一点：<centered>“（WWFW）（p，q）”</centered>（左边括号中的位数由右边括号中的项数决定。）`,`4.45	对于 n 个基本命题有 <katex>L_n</katex> 组可能的真值条件。
从一定数目基本命题的真值可能性得来的真值条件组可以排成一个系列。`,`4.46	在可能的真值条件组中有两种极端情况。一种情况是，一个命题对于所有基本命题的真值可能性都为真。我们称该真值条件是<emphasis>重言式的</emphasis>。
第二种情况是，一个命题对于所有真值可能性都为假：该真值条件是<emphasis>矛盾的</emphasis>。
在第一种情况下，我们称这命题为重言式，在第二种情况下，称这命题为矛盾式。`,`4.461	命题显示它们所说的东西，重言式和矛盾式则显示它们什么也没有说。
重言式没有真值条件，因为它无条件地为真；而矛盾式则不在任何条件下为真。
重言式和矛盾式是缺少意义的。
（就像两个箭头由此指向相反方向的一个点。）
（例如，当我知道或者下着雨或者没有下雨时，关于天气我就什么也不知道。）`,`4.4611	但是，重言式和矛盾式不是无意义的。它们是符号系统的一部分，正如“0”是算术符号系统的一部分。`,`4.462	重言式和矛盾式不是实在的图像。它们不表述任何可能情况。因为前者容许<emphasis>每一种</emphasis>可能情况，后者则排除<emphasis>任何一种</emphasis>可能情况。
在重言式中，与世界符合的条件——表现关系——互相抵消，以致它与实在没有任何表现关系。`,`4.463	命题的真值条件规定它给事实留出的范围。
（一个命题，一个图像或者一个模型，在否定的意义上就像一个固体，限制着其它物体的活动自由；在肯定的意义上就像用固体物质围住的一片空间，其中有一个物体活动的场所。）
重言式为实在留出了全部——整个无限的——逻辑空间；矛盾式则占满了全部逻辑空间，一点也没有留给实在。因而二者都不以任何方式规定实在。`,`4.464	重言式的真是确定的，命题的真是可能的，矛盾式的真是不可能的。
（确定的，可能的，不可能的：这里就有了我们在概率论中所需要的最重要的分度标志。）`,`4.465	一个重言式和一个命题的逻辑积，与这个命题说的是同一回事情。因此，这积与这命题是同一的。因为没有改变一个符号的意义就不能改变它的本质。`,`4.466	记号的一定的合乎逻辑的结合，对应着其指谓的一定的合乎逻辑的结合。能与<emphasis>每一种任意的</emphasis>结合对应的只能是非结合的记号。
换句话说，对于每一种情况都为真的命题，根本不可能是记号的结合；因为，如果它们是记号的结合，就只能有对象的一定的结合与它们相对应。
（而不合乎逻辑的结合是<emphasis>没有</emphasis>一种对象的结合与之相对应的。）
重言式和矛盾式是记号结合的极限情形：即记号结合的解体。`,`4.4661	当然，在重言式和矛盾式中，记号也是互相结合着的，即它们彼此之间有一定的关系；但是这些关系是无指谓的，对符号而言它们不是本质的东西。`,`4.5	看来现在可以给出最一般的命题形式：即给出一个关于<emphasis>任何一种</emphasis>记号语言的命题的描述，使得每一种可能的意义都能够用适合这种描述的符号来表达，而且，在适当地选择名称指谓的前提下，每一个适合这种描述的符号都能表达一种意义。
显然，在这种描述中<emphasis>只能</emphasis>包含对于最一般的命题形式为本质的东西，否则，它就不会是最一般的形式。
一般的命题形式的存在，为以下事实所证明：即没有任何一个命题，其形式是不能须知（即构造）的。命题的一般形式是：事情是如此这般的。`,`4.51	假如向我给出了<emphasis>所有的</emphasis>基本命题：那么问题就只在于我能用它们构造出一些什么命题。这样我就有了<emphasis>全部</emphasis>命题，而且<emphasis>这</emphasis>就确定了这全部命题的界限。`,`4.52	命题包括从所有基本命题的总体（自然，也从其确实是<emphasis>所有</emphasis>基本命题的<emphasis>总体</emphasis>）中所能得出的一切。（因此，在一定的意义上可以说，<emphasis>一切</emphasis>命题都是基本命题的概括。）`,`4.53	一般的命题形式是变项。`,`5	命题是基本命题的真值函项。
（基本命题是自身的真值函项。）`,`5.01	基本命题是命题的真值主目。`,`5.02	函项的主目很容易和名称的附标相混淆。因为从主目和附标我都能看出包含它们的那些记号的指谓。
例如，当罗素写“<katex>＋_c</katex>”时，其中“c”就是一个附标，它指明整个记号是用于基数的加号。但是这种标记法是一种任意约定的结果，因而完全可能选择一个简单的记号来代替“<katex>＋_c</katex>”；可是，在“～p”中，“p”不是附标而是主目：除非已经先理解了“p”的意义，“～p”的意义就<emphasis>不可能</emphasis>理解。（在名称尤利乌斯·恺撒中，“尤利乌斯”是一个附标。附标总是对对象的描述的一部分，我们把它附加到对象的名称上面：例如尤利乌斯家族中的<emphasis>这位</emphasis>恺撒。）
如果我没有弄错，弗雷格关于命题和函项的指谓理论，就是建立在混淆主目和附标的基础之上的。弗雷格认为逻辑命题是名称，而它们的主目则是这些名称的附标。`,`5.1	真值函项可以排成系列。
这是概率论的基础。`,`5.101	一定数目的基本命题的真值函项，可以按以下这种图式列出：<custom />我将用命题的<emphasis>真值基础</emphasis>这个名称来称呼其真值主目使该命题为真的那些真值可能性。`,`5.11	如果为一定数目的命题所共有的真值基础，同时也是某个命题的真值基础，那么我们就说，这个命题的真是从另外那些命题的真得来的。`,`5.12	特别是，如果命题“q”的所有真值基础也是命题“p”的真值基础，那么命题“p”的真就是从“q”的真得来的。`,`5.121	一个命题的真值基础包含在另一个命题的真值基础之中：p 从 q 得出来。`,`5.122	如果 p 从 q 得出来，则“p”的意义包含在“q”的意义之中。`,`5.123	如果上帝创造一个世界，其中某些命题为真，那么由此它也就创造了一个世界，其中所有从这些命题得出来的命题也同样为真。同样，它也不可能在创造出一个命题“p”为真的世界的同时，而不创造出这个命题的所有对象。`,`5.124	一个命题肯定每一个从它得出来的命题。`,`5.1241	“p·q”既是肯定“p”的命题之一，也是肯定“q”的命题之一。
两个命题，如果没有一个有意义的命题肯定它们两者，它们就是彼此反对的。
凡与另一个命题矛盾的命题，都否定这个命题。`,`5.13	一个命题的真从另一些命题的真得出来，这一点我们可以从这些命题的结构看出来。`,`5.131	如果一个命题的真从另一些命题的真得出来，这一点为这些命题的形式相互之间的关系所表达：我们无须通过把这些命题结合成为一个单独的命题，来建立起它们之间的这些关系；相反地，这些关系是内在的，它们的存在是这些命题存在的一个直接结果。`,`5.1311	当我们从 p V q 和～p 推出 q 时，命题形式“p V q”和“～p”之间的关系在这里被我们的标示方式所掩盖。但是，例如，若将“ p V q”写为“p|q·|·p|q”， 将“～p”写为“p|p（p|q。既非 p也非 q），其内在联系就显而易见了。
（从（x）·fx可以推出 fa，这表明符号（x）·fx本身也包含着概括。）`,`5.132	如果 p 从 q 得出来，则我能作出从 q 到 p 的推论，即从 q 推出 p 来。
单从这两个命题即可了解推论的特性。
只有这两个命题本身才能证明此推论的正确。
如弗雷格和罗素著作中用以证明推论为正确的“推演律”是缺少意义的，因而是多余的。`,`5.133	一切演绎推理都是先天形成的。`,`5.134	一个基本命题不能从另一个基本命题推演出来。`,`5.135	从一种情况的存在无法推论出另一种完全不同的情况的存在。`,`5.136	没有证明这样一种推论为正确的因果联系。`,`5.1361	我们<emphasis>不能</emphasis>从现在的事件推出将来的事件。相信因果联系是<emphasis>迷信</emphasis>。`,`5.1362	意志自由在于不可能知道尚属未来的行为。仅当因果性像逻辑推论一样是一种<emphasis>内在的</emphasis>必然性，我们才能知道这些行为。——知与所知的联系是逻辑必然性的联系。
（如果 p是重言式，则“A知道p是发生的事情”便是缺乏意义的。）`,`5.1363	如果不能从一个命题对于我们是自明的而<emphasis>推出</emphasis>它为真，则它的自明性就不能保证我们相信它为真是正确的。`,`5.14	如果一个命题是从另一个命题得出来的，那么后者所说较前者为多，前者所说较后者为少。`,`5.141	如果 p 从 q 得出来且 q 从 p 得出来，则二者为同一个命题。`,`5.142	重言式从一切命题得出来：它什么也没有说。`,`5.143	矛盾式是没有一个命题与其它命题共有的命题共性，重言式是彼此间没有任何共同东西的所有命题的共性。
可以说，矛盾式隐迹于一切命题之外；重言式则隐迹于一切命题之内。
矛盾式是命题的外部界限；重言式则是居于诸命题中心的非实在的点。`,`5.15	如 <katex>w_r</katex> 是命题“r”的真值基础数，<katex>w_{rs}</katex> 是同属命题“s”和“r”的真值基础数，则我们称比值 <katex>w_{rs}:w_r</katex> 为命题“r”给予命题“s”的<emphasis>概率</emphasis>度。`,`5.151	在如上述 5. 101 那样的图式中，设 <katex>w_r</katex> 是命题 r 的“w”数，<katex>w_{rs}</katex> 是和命题 r 的那些“w”同列的命题 s 的“w”数。则命题 r 给命题 s 以概率 <katex>w_{rs}:w_r</katex>。`,`5.1511	没有概率命题特有的特殊对象。`,`5.152	彼此之间役有共同的真值主目的命题，我们称它们是相互独立的。
两个基本命题彼此给予概率 <katex>\\frac{1}{2}</katex>。
如果 p 从 q 得出来，则命题“q”给予命题“p”概率 1。逻辑推论的确实性是概率的一种极限情况。
（应用于重言式和矛盾式。）`,`5.153	就其自身而言，一个命题既不是概率的也不是非概率的。一个事件或者发生，或者不发生。没有中间状况。`,`5.154	设在一个罐子里有相等数量的白球和黑球（且没有任何别种颜色的球）。我一个一个地取出球来，又将它放回罐里。用这种试验我能够确定，随着不断地这样做下去，取出来的黑球数和白球数是彼此接近的。
所以<emphasis>这</emphasis>不是一个数学的真实。
如果我说：“我取到一个白球的概率和取到一个黑球的概率是相等的”，这就意昧着，我所知道的全部情况（包括作为假设的自然律）给予一个事件发生的概率不<emphasis>大于</emphasis>另一个事件发生的概率。也就是说，正如从以上的说明所不难理解的，给予每个事件以概率 <katex>\\frac{1}{2}</katex>。
通过试验我能够确认的是：这两个事件的发生是独立于我并不详细知道的种种情况的。`,`5.155	概率命题的最小单元是：诸情况——我对它们别无所知——对一特定事件的发生给予某一概率度。`,`5.156	由此可见，概率是一种概括。
它包含着对一种命题形式的一般的描述。
仅当缺少确定性时我们才使用概率——虽然我们关于一个事实的知识是不完全的，但是关于它的形式我们确实知道<emphasis>某种东西</emphasis>。
（一个命题也许是一定情况的不完全的图像，但它总归是<emphasis>某种东西</emphasis>的完全的图像。）
一个概率命题是另外一些命题的一种摘要。`,`5.2	命题的结构之间具有内在的关系。`,`5.21	为了在我们的表达方式中突出这些内在关系，可以把一个命题表现为一个运算的结果，这个运算通过另外一些命题（即该运算的基础）而产生出这个命题来。`,`5.22	运算就是其结果和基础两者结构之间关系的表达式。`,`5.23	必须对一个命题施以运算才能产生出别的命题来。`,`5.231	当然，这要依赖于它们形式的属性，依赖于它们形式的内在相似性。`,`5.232	整编成一个系列所依赖的内在关系，等价于一个从一项产生出另一项来的运算。`,`5.233	运算只能出现在一个命题以逻辑上有意义的方式产生于其它命题的地方，也即命题的逻辑构造开始的地方。`,`5.234	基本命题的真值函项是以基本命题为基础的运算的结果（我称这些运算为真值运算。）`,`5.2341	p 的真值函项的意义是 p 的意义的真值函项。
否定、逻辑加、逻辑乘等等都是运算。
（否定将命题的意义反转。）`,`5.24	运算显示于变项中，它显示我们怎样可以从命题的一种形式得到另一种形式。
运算表达形式之间的差异。
（运算的基础与其结果之间所共有的恰为这些基础本身。）`,`5.241	运算标志的不是一种形式，而是一种形式之间的差异。`,`5.242	从“p”产生“q”的运算，同样也从“q”产生“r”，如此等等。表达这一点的唯一方式是：“p”、“q”、“r”等等必须是为一定的形式关系给出一般表达式的变项。`,`5.25	运算的出现并不表征命题的意义。
的确，运算是无所陈述的，只有它的结果才有所陈述，而这又依赖于运算的基础。
（运算和函项决不能互相混淆。）`,`5.251	一个函项不可能是它自身的主目，然而一个运算的结果可以成为该运算自身的基础。`,`5.252	只有这样，从一个形式系列中的一项到另一项（在罗素和怀特海的等级系统中是从一个类型到另一个类型）的推移才是可能的。（罗素和怀特海不承认这种推移的可能性，但是他们自己却一再地利用这种可能性。）`,`5.2521	一个运算重复地应用于其自身的结果，我称之为运算的连续应用（“o’o’o’a”是三次连续应用运算“o’ξ”于“a”的结果。）
我也在同样的意义上谈到连续应用<emphasis>几个</emphasis>运算于若干个命题。`,`5.2522	因此我把形式系列 a，o’a，o’o’a，……的通项记为“[a，x，o’x]”。这个括起来的表达式是一个变项：其中第一项是形式系列的首项，第二项是系列中任意选取的项 x 的形式，第三项是系列中紧接 x 之后的那一项的形式。`,`5.2523	连续应用一个运算的概念和“如此等等”这个概念是等价的。`,`5.253	一个运算可以取消另一个运算的作用，运算可以互相抵销。`,`5.254	运算可以消失（如在“～～p”中的否定：～～p＝p）。`,`5.3	所有命题都是基本命题的真值运算结果。
真值运算是从基本命题产生出真值函项的方法。
依据真值运算的本性，就如从基本命题产生出它们的真值函项一样，以同样的方法也可以从真值函项产生出新的真值函项。当一个真值运算施用于基本命题的真值函项，总是产生出基本命题的另一个真值函项，即另一个命题。对基本命题真值运算的结果再作一次真值运算，其结果总可等同于对基本命题施用<emphasis>某一单独的</emphasis>真值运算。
每个命题都是对基本命题作真值运算的结果。`,`5.31	即使“p”、“q”、“r”等等不是基本命题，4.31 的图式也是有指谓的。
容易看出，即使“p”和“q”是基本命题的真值函项，4.442中的命题记号也仍然是表达基本命题的一个真值函项。`,`5.32	所有真值函项都是把有限数量的真值运算连续应用于基本命题的结果。`,`5.4	这就表明，没有（在弗雷格和罗素的意义上的）“逻辑对象”或“逻辑常项”。`,`5.41	因为：所有的对于真值函项的真值运算结果，只要它们是基本命题的同一个真值函项，就都是等同的。`,`5.42	显然，V、⊃等等不是右和左等等那种意义上的关系。
弗雷格和罗素的逻辑“初始记号”的交叉定义已足以表明，它们不是初始记号，更不是关系的记号。
显然，通过“～”和“V”定义的“⊃”和在“V”的定义中与“～”一起出现的那个“⊃”是等同的；而且后面这个“V”与前一个“V”也是等同的，如此等等。`,`5.43	从一个事实 p 会得出无数<emphasis>其它事实</emphasis>，即～～p，～～～p等等，这看起来有点令人难以置信。同样使人惊讶的是，无数的逻辑（数学）命题是从半打“初始命题”得出来的。
但是一切逻辑命题之所说都是相同的，即什么也没有说。`,`5.44	真值函项不是实质函项。
例如，肯定可以由双否定产生，团此否定是否在某种意义上就包含在肯定之中呢？“～～p”是否定～p，还是肯定 p，还是两者都是呢？
命题“～～p”并不是把否定作为一个对象而与之相关；而另一方面，否定的可能性在肯定中又是早就预定了的。
而且，如果存在一个称为“～”的对象，那么就会得出，“～～p”说了某种不同于“p”所说的东西。这是因为一个命题涉及“～”，而另一个命题则否。`,`5.441	这些表面的逻辑常项的这种消失，也发现于“～（∃x）·～fx”的情形，它与“（x）·fx”的所说是一样的；或者也发生于“（∃x）·fx·x＝a”的情形，它与“fa”说的是一回事情。`,`5.442	如果给定一个命题，那么以它为基础的一切真值运算的给果也<emphasis>随之</emphasis>给定。`,`5.45	如果有了逻辑的初始记号，那么任何正确的逻辑就必须能够清楚地表明这些记号彼此之间的相对地位，并证明它们存在的合理性。以其初始记号<emphasis>为基础</emphasis>的逻辑的构造，必须是清楚的。`,`5.451	如果逻辑有一些初始概念，它们就应该是互相独立的。如果引入了一个初始概念，那么在它出现的一切结合里，它都是应该是已经引入了的。因此，它不能先对一种结合引入，尔后又对另一种结合再次引入。例如，一旦引入了否定，我们就应该既在“～p”形式的命题中理解它，也在“～（pVq）”、“（∃x）·～fx”等等这样的命题中同样地理解它。我们不应先对一类情况引入它，然后又对另一类情况引入它，因为这样一来，它的指谓在两类情况中是否相同，就值得怀疑，而且没有理由在两类情况下应用同一种记号结合方式。
（简言之，弗雷格（在《算术的基本定律》中）关于通过定义引入记号的意见，经过适当的修改，也适用于初始记号的引入。）`,`5.452	在逻辑的符号系统中引入任何一种新的手段都必然是一个重大事件。在逻辑中，一种新的手段不能以所谓漫不经心的态度在括号或者脚注中引入。
（如在罗素和怀特海的《数学原理》中就出现了用文字表达的定义和初始命题。为什么这里忽然出现文字呢？这是需要说明理由的，但是没有提出理由，也必然提不出理由，因为这种程序事实上是非法的。）
但是，如果证明在某处引入一种新的手段是必要的，我们就应立即追问：这种手段在哪些地方是<emphasis>必须</emphasis>用到的？必须弄清楚它在逻辑中的地位。`,`5.453	在逻辑中一切数都需要说明理由。
或者不如说，必须弄清楚，逻辑中是没有数的。
不存在特别的数。`,`5.454	逻辑中没有并列，也不可能有分类。
逻辑中不可能有普遍和特殊的区分。`,`5.4541	逻辑问题的解决必定是简单的，因为它们设立了简单性的标准。
人们一直猜想，必定有一个领域，其中对问题的回答对称地——先天地——结合着而构成一个自足的系统。
这个领域遵从如下规则：简单性是真理的标志。`,`5.46	如果我们恰当地引入逻辑记号，那么我们也就同时引入了它们的一切结合——不仅“pVq”，也有“～（pV～q）”等等——的意义。同时我们也就引入了括号的一切可能结合的效用；因此很清楚，真正一般的初始记号不是“pVq”、“（∃x）·fx” 等等，而是它们的结合的最一般形式。`,`5.461	和真实的关系不同，像 V 和 ⊃ 这种逻辑的伪关系是需要用到括号的，这一点看起来不太重要，事实上却具有重大意义。
的确，对这些表面上的初始记号使用括号，本身即已表明它们不是真正的初始记号。当然没有人会认为，括号具有独立的指谓。`,`5.4611	逻辑运算的记号是标点符号。`,`5.47	很清楚，关于一切命题的形式，凡是我们<emphasis>事先</emphasis>可以说的，我们必须能够<emphasis>一下子都</emphasis>说出来。
实际上基本命题自身已经包含了全部逻辑运算。因为“fa”与“（∃x）·fx·x＝a”所说的完全一样。
凡有组合的地方，就有主目和函项，而有了这些就已经有了全部的逻辑常项。
可以说，唯一的逻辑常项就是<emphasis>一切</emphasis>命题根据它们的本性所彼此共有的东西。
而这就是一般的命题形式。`,`5.471	一般的命题形式是命题的本质。`,`5.4711	给出命题的本质，意味着给出一切描述的本质，也即给出世界的本质。`,`5.472	描述最一般的命题形式，就是描述逻辑中那个唯一的一般的初始记号。`,`5.473	逻辑必须照顾自己。
如果一个记号是<emphasis>可能的</emphasis>，它就应该能起标示作用。凡在逻辑中为可能的都是容许的。（“苏格拉底是同一的”之所以不意指什么，是因为没有称为“同一的”这种属性。这个命题所以无意义，是因为我们无法作出一种任意的规定来，而不是因为这符号本身是不容许的。）
在一定的意义上，我们不可能在逻辑上犯错误。`,`5.4731	由于语言本身能防止各种逻辑错误，所以罗素多次说到的自明性才会在逻辑中成为多余的。——逻辑之所以是先天的，就在于<emphasis>不可能</emphasis>非逻辑地思考。`,`5.4732	我们不能给予一个记号以错误的意义。`,`5.47321	奥卡姆法则当然不是一条随意的规则，也不是一条因其在实践上的成功而获得了证明的规则：它表明，记号语言中<emphasis>非必要</emphasis>的单位不指谓任何东西。
满足<emphasis>一个</emphasis>目的的记号逻辑上是等价的；<emphasis>不</emphasis>满足<emphasis>任何</emphasis>目的的记号逻辑上是无指谓的。`,`5.4733	弗雷格说：每一个合法则地构造的命题都应当具有意义；而我说：每一个可能的命题都是合法则地构造的，而且，如果它没有意义，那只能是因为我们未能给予它的某些组成部分以<emphasis>指谓</emphasis>。
（尽管我们认为自己已经这样做了。）
因此，“苏格拉底是同一的”之所以什么也没有说，是由于我们没有给予“同一的”这个词以<emphasis>任何形容词的</emphasis>指谓。而当它作为同一性记号出现时，它是以完全不同的方式——另外一种标示关系——来标示的，因而在这两种情况下的符号也是完全不同的：这两个符号不过偶然地具有共同的记号。`,`5.474	必要的基本运算的数目<emphasis>唯一地</emphasis>取决于我们的记号系统。`,`5.475	这只是构造一个具有一定度数，即一定的数学多样性的记号系统的问题。`,`5.476	很清楚，这里涉及的不是必须给以标示的<emphasis>一定数目的初始概念</emphasis>，而是一项规则的表达式。`,`5.5	每一个真值函项都是连续应用运算“（……W）（ξ，……）”于基本命题的结果。
这个运算否定右边一对括号里的全部命题，我称之为这些命题的否定。`,`5.501	一个以命题作为项的括号表达式，如果括号里各项的次序是无关紧要的，我就用一个“<katex>(\\bar{ξ})</katex>”形式的记号来表示。“ξ”是一个变项，它的值是括号表达式的各个项。变项上面的横线表示，它代表括号里变项所有的值。
（例如，若 ξ 有三个值 P、Q、R，则（ξ）＝（P，Q，R）。）变项的值是规定了的。
这规定就是对变项所代表的命题的描述。
括号表达式中各项的描述是怎样产生的，这一点无关紧要。
我们可以区分三种描述：1.直接列举，这时可以简单地用作为变项取值的常项代换变项。2.给出一个函项 fx，它对所有 x 值的取值即为要描述的命题。3.给出一个决定命题构成的形式规则，这时括号表达式中的各项就是一个形式系列的所有的项。`,`5.502	因此，我写作“<katex>N(\\bar{ξ})</katex>”以代替“（……W）（ξ，……）”。
<katex>N(\\bar{ξ})</katex>是对命题变项 ξ 所有的值的否定。`,`5.503	显然，我们不难表达：命题如何可以用此运算来构成和如何不可以用它来构成；故而为此必可找到一个精确的表达式。`,`5.51	如果 ξ 只有一个值，则 <katex>N(\\bar{ξ})</katex>＝～p（非 p）；如果它有两个值，则 <katex>N(\\bar{ξ})</katex>＝～p·～q（既非 p 也非 q）。`,`5.511	包容一切而反映着世界的逻辑之所以能够运用这种特别的钩子和装置，是因为它们全都彼此结合着成为一张无比精细的网——一面巨大的镜子。`,`5.512	若“p”为假，则“～p”为真。因而，在真命题“～p”中，“p”是一个假命题。那么波线“～”怎样能使“p”与实在相符合呢？
但是在“～p”中起否定作用的并不是“～”，而是这个记号系统中所有否定 p 的记号共有的东西。
也就是说，是构成“～p”、“～～～p”、“～p V ～p”、“～p·～p”等等（以至无穷）所遵循的共同规则，这一共同的因素反映着否定。`,`5.513	可以说，肯定 p 和 q 两者的一切符号所共同的东西，就是命题“p·q”；而肯定 p 或者 q 的一切符号所共同的东西，就是命题 p V q”。
同样可以说，两个命题如果彼此之间没有任何共同的东西，它们就是互相反对的，而且每个命题只有一个否定，因为只有一个命题完全在它之外。
因此在罗素的记号系统中也同样表明，“q：p V ～p”和“q”说的是一回事情，“p V ～p”则什么也没有说。`,`5.514	一个记号系统一旦建立起来，其中就有一条用以构造一切否定 p 的命题的规则，一条用以构造一切肯定 p 的命题的规则，一条用以构造一切肯定 p 或 q 的命题的规则，等等。这些规则等价于一些符号，它们的意义就反映在符号之中。`,`5.515	在我们的符号中必须表明，只有命题才能相互之间从“V”、“·”等等结合起来。
情况的确如此，因为“p”和“q”的符号本身已假定了“V”、“～”等等。如果在“p V q”中记号“p”不代表一个复合记号，那么它自身单独地就不能有意义：而在这种情况下，和“p”具有相同意义的记号“p V p”、“p·p”等等也就不能有意义。而如果“p V p” 没有意义，“p V q”也就不可能有任何意义。`,`5.5151	一个否定命题的记号必须要用肯定命题的记号来构成吗？为什么不能用一个否定的事实来表达一个否定命题呢？（例如，设“a”不处在对“b”的一定关系之中，就可以说为：aRb 不是实情。）
但是即使在这里，否定命题其实也是间接地用肯定命题来构成的。
肯定<emphasis>命题</emphasis>必须以否定<emphasis>命题</emphasis>的存在为前提，反之亦然。`,`5.52	若 ξ 的值是函项 fx 对于所有 x 值的全部取值，则 <katex>N(\\bar{ξ})</katex>＝～（∃x）·fx。`,`5.521	我把<emphasis>所有</emphasis>这个概念同真值函项分离开来。
弗雷格和罗素是联系逻辑积或逻辑和而引入概括的。这样就难以理解隐含着这两个概念的命题“（∃x）·fx”和“（x）·fx”。`,`5.522	概括记号的特点在于，第一，它指示一个逻辑原型；第二，它突出了常项。`,`5.523	概括记号是以主目的身份出现的。`,`5.524	如果给出了一些对象，那么同时也就给出了<emphasis>所有</emphasis>对象。
如果给出了一些基本命题，那么同时也就给出了<emphasis>所有</emphasis>基本命题。`,`5.525	像罗素那样将命题“（∃x）·fx”译述为“fx是<emphasis>可能的</emphasis>”，是不正确的。
一种情况的必然、可能或者不可能，不是用命题来表达，而是由表达式是一个重言式、一个有意义的命题或者一个矛盾式来表达。
我们常常要援引的惯例必须已经存在于符号本身之中。`,`5.526	我们可以用完全概括的命题，即不必首先把每个名称对应于一个特定的对象，来完全地描述世界。
然后，为了达到习惯的表达方式，我们只需在“有一个而且只有一个 x，使得……”这个表达式后面加上一句话：“而且 x 是 a”。`,`5.5261	一个完全概括的命题，像每个其它命题一样，是组合的。（这一点为我们在“（∃x，ϕ）·ϕx”中必须分开地提及“ϕ”和“x”这一事实所表明。两者都独立地处在对世界的标示关系中，就像非概括命题的情形一样。）
组合符号的标志是：它和<emphasis>别的</emphasis>符号有某种共同的东西。`,`5.5262	<emphasis>每一个</emphasis>命题的真或假都在世界的一般构造中引起某种改变。而且基本命题的总体为世界的构造所留下的可能范围，正好就是所有的概括命题所界定的范围。
（如果有一个基本命题为真，那就意味着无论如何有<emphasis>多于一个</emphasis>的基本命题为真。）`,`5.53	我用记号的同一，而不是用等号，来表达对象的同一。对象的不同则用记号的不同来表达。`,`5.5301	显然，同一不是对象之间的一种关系。例如，只要考察一下“（x）：fx·⊃·x ＝a”这个命题，这一点就很清楚了。这个命题只是说，<emphasis>只有</emphasis> a 满足函项 f，而不是说，只有对 a 具有一定关系者满足函项f。
当然，也可以说，<emphasis>只有</emphasis> a 才对 a 具有这种关系；但是为了表达这点，就需要同一记号本身。`,`5.5302	罗素的“＝”的定义是不充分的，因为我们不能根据它说两个对象共有它们的一切属性。（即使这个命题决非正确的，它也仍然具有<emphasis>意义</emphasis>。）`,`5.5303	大致说来：说<emphasis>两个</emphasis>东西是同一的，这是无意义的，而说<emphasis>一个</emphasis>东西和它自身同一，就是根本什么也没有说。`,`5.531	因此我不写“f（a，b）·a＝b”，而写“f（a，a）”（或者“f（b，b）”。不写 “f（a，b）·～a＝b”，而写“f（a，b）”。`,`5.532	以此类推：我不写“（∃x，y）·f（x，y）·x＝y”，而写“（∃x）·f（x，x）”； 不写（∃x，y）·f（x，y）·～x＝y”，而写“（∃x，y）·f（x，y）”。 （这样，罗素的“（∃x，y）·fxy”就成为：“（∃x，y）·f（x，y）·V（∃x）·f（x，x）”。）`,`5.5321	因此，例如，我们不写“（x）：fx⊃x＝a”，而写“（∃x）·fx⊃·fa：～（∃x，y）·fx·fy”。
因而，命题“只有一个 x 满足 f（ ）”将读作“（∃x）·fx：～（∃x，y）·fx·fy。`,`5.533	所以，同一记号不是概念记号系统的必要组成部分。`,`5.534	现在我们看到，在一个正确的概念记号系统中，像“a＝a”，“a＝b·b＝c·⊃a ＝c”，“（x）·x＝x”，“（∃x）·x＝a”等等伪似命题是根本不能写的。`,`5.535	这也就消解了所有和这类伪似命题联系在一起的问题。
至此，罗素的“无穷公理”所带来的一切问题都已获致解决。
无穷公理所要说的，可以通过存在无限多个具有不同指谓的名称，在语言中自行表达出来。`,`5.5351	在某些情形下，人们情不自禁地要使用“a＝a”或者“p⊃p”之类形式的表达式。当人们想要谈论原型，即命题、事物等等时，就出现这种情形。所以，在罗素的《数学原则》中，“p是命题”——这是无意义的——被翻译为符号“p⊃p”，而且把它作为假设置于某些命题前面，以保证处在这些命题主目位置上的只能是命题。 （把假设 p⊃p 置于一个命题前面，以保证它的主目具有正确形式，这是无意义的，因为对于以非命题为主目这个假设不是假的而是无意义的，而且因为错误种类的主目也使得这个命题本身成为无意义的，所以在防止错误的主目这一点上，命题本身和为此目的而附加的无意义的假设是同样地有用，或者说，是同样地无用。）`,`5.5352	同样地人们想用“～（∃x）·x＝x”来表达“没有<emphasis>事物</emphasis>”。但是，即使这是一个命题，如果确实“有一些事物”，但这些事物与自身不是同一的，这个命题不也同样为真吗？`,`5.54	在一般的命题形式中，命题只是作为真值运算基础而出现于别的命题之中。`,`5.541	初看起来，一个命题也可能以别种方式在另一个命题中出现。
特别是在某些心理学的命题形式中，如“A 相信 p 是真的”，或者“A 思考 p”等等。
这里如果只是肤浅地考察，就好像命题 p 同对象 A 处在某种关系之中。
（在当今的知识论中（罗素、摩尔等），正是这样来理解这些命题的。）`,`5.542	但是很清楚，“A 相信 p”，“A 思考 p”，“A 说 p”都是“‘p’说 p”的形式：这里涉及到的不是一个事实和一个对象的相关，而是借助于其对象相关的诸事实的相关。`,`5.5421	这也表明，没有像当今肤浅的心理学中所设想的心灵——主体等等——这类东西。
的确，一个组合的心灵就已经不再是心灵了。`,`5.5422	对命题形式“A 判断 p”的正确解释必须表明：使判断成为一种无意义是不可能的。（罗素的理论不满足这个条件。）`,`5.5423	感知一个复合物的意思就是感知到它的各组成部分以如此这般的方式互相关联着。
这也能很好地解释，为何有两种可能的方式把如下图形<custom />看成为立方体；以及所有类似的现象。因为我们确实看到两个不同的事实。
（如果我先看定诸 a 角，对诸 b 角只是瞥及，于是诸 a 角显得在前；反之则诸 b 角显得在前。）`,`5.55	现在我们必须先天地回答关于基本命题的一切可能形式的问题。
基本命题由名称组成。可是我们既然不能给出具有不同指谓的名称的数目，我们也就不能给出基本命题的组成。`,`5.551	我们的基本原则是：凡一般地可以由逻辑决定的问题，必须能够当即决定。
（如果我们处在必须通过观察世界来回答这类问题的境地，那就表明我们已经陷入了完全错误的思路。）`,`5.552	我们为了理解逻辑所需要的“经验”，不是某物是如何如何的，而是某物<emphasis>存在</emphasis>：但这恰恰<emphasis>不是</emphasis>经验。
逻辑<emphasis>先于</emphasis>任何经验——某物<emphasis>是如此这般的</emphasis>。
逻辑先于关于“<kaiti>如何</kaiti>”的问题，而不先于关于“<kaiti>什么</kaiti>”的问题。`,`5.5521	如果不是这样，我们怎么能够应用逻辑呢？也可以这样说：假如即使没有世界也有一个逻辑，那么，为何有了一个世界就有一个逻辑呢？`,`5.553	罗素说，在事物（个体）的不同数目之间存在着简单的关系。但是，在什么数目之间？又如何断定这种关系？——依靠经验吗？
（没有地位特殊的数。）`,`5.554	任何特殊形式的提出都是完全任意的。`,`5.5541	例如，我能否处于一种需要27位关系的记号来标示某种事物的状况，应该可以先天地回答这个问题。`,`5.5542	但是，我们真的可以这样来提问吗？我们能够建立一种记号形式而不知道是否有任何东西与之对应吗？
能否有意义地提问：为有某事发生，必须<emphasis>存在</emphasis>什么东西？`,`5.555	显然，关于基本命题，我们具有某种与其特定的逻辑形式无关的概念。
但是，当有一个系统使我们得以建造符号时，那么这个系统，而非单个的符号，才是逻辑上重要的东西。`,`5.556	不可能有基本命题形式的等级系列。我们只能预见我们自己构造的东西。`,`5.5561	经验的实在受到对象总体的限制。这种限制也在基本命题的总体中表现出来。
等级系列是独立于实在的，而且必须独立于实在。`,`5.5562	如果我们根据纳粹逻辑的理由知道必须有基本命题，那么，凡是理解具有未分析形式的命题的人也必定知道这一点。`,`5.5563	事实上，我们日常语言中的所有命题，正如它们本来的那样，在逻辑上是完全有条理的。——我们必须在这里提及的最简单的东西，不是类似于真，而是完整的真本身。
（我们的问题不是抽象的，而且也许是所有问题中最为具体的。）`,`5.557	逻辑的<emphasis>应用</emphasis>决定有什么样的基本命题。
逻辑不能预期属于其应用的东西。
显然，逻辑不能与其应用冲突。
但是逻辑必须同其应用接触。
因此，逻辑不能和其应用互相重迭。`,`5.5571	如果我不能先天地举出有一些什么基本命题，那么要举出它们就必定会导致明显的无意义。`,`5.6	<emphasis>我的语言的界限</emphasis>意味着我的世界的界限。`,`5.61	逻辑充满世界：世界的界限也就是逻辑的界限。
所以在逻辑上我们不能说：世界上有这个和这个，而没有那个。
因为这看来就假定了我们会排除某些可能性，而这是不可能的事情，不然逻辑就必须超出世界的界限，因为只有超出世界的界限它才也能从另外一边来察看这些界限。
我们不能思考我们所不能思考的东西；因此我们也不能<emphasis>说</emphasis>我们所不能思考的东西。`,`5.62	这一段话为解决唯我论中有多少真理的问题提供了钥匙。
唯我论者<emphasis>意味</emphasis>的东西是完全正确的，不过它不能<emphasis>说</emphasis>，而只能自己显示出来。
世界是<emphasis>我的</emphasis>世界：这表现在<emphasis>语言</emphasis>（我所唯一理解的语言）的界限就意味<emphasis>我的</emphasis>世界的界限。`,`5.621	世界和人生是一回事。`,`5.63	我是我的世界。（小宇宙。）`,`5.631	没有思考着或想象着的主体这种东西。
如果我写一本书叫作《我所发现的世界》，我也应该在其中报道我的身体，并且说明哪些部分服从我的意志，哪些部分不服从我的意志，等等。这是一种孤立主体的方法，或者不如说，是在一种重要意义上表明并没有主体的方法；因为在这本书里唯独不能谈到的就是主体。`,`5.632	主体不属于世界，然而它是世界的一个界限。`,`5.633	在世界上<emphasis>哪里</emphasis>可以找到一个形而上主体呢？
你会说这就正好像眼睛和视域的情形一样。但是事实上你看<emphasis>不</emphasis>见眼睛。
而且<emphasis>在视野里</emphasis>没有任何东西使得你能推论出那是被一只眼睛看到的。`,`5.6331	视域肯定不具有如图这样的形式：<custom />`,`5.634	与此有联系的一点是，我们的经验中也没有一部分同时是先天的。
我们看到的一切也可能是别种样子。
我们通常能够描述的一切也可能是别种样子。
没有先天的事物秩序。`,`5.64	这里可以看到，严格贯彻的唯我论与纯粹的实在论是一致的。唯我论的自我收缩为无广延的点，保留的是与它相关的实在。`,`5.641	因此，确实有种意义使哲学可以用非心理学的方式来谈论自我。
由于“世界是我的世界”而使自我进入哲学之中。
哲学上的自我并不是人，也不是人的身体或者心理学所考察的人的心灵，而是形而上主体，是世界的界限——而不是它的一个部分。`,`6	真值函项的一般形式是：<centered><katex>［\\bar{p}，\\bar{ξ}，N(\\bar{ξ})］</katex></centered>这也是命题的一般形式。`,`6.001	它只是说明：每个命题都是连续应用运算 <katex>N(\\bar{ξ})</katex> 于基本命题的结果。`,`6.002	如果有了怎样构成一个命题的一般形式，那么也就随之有了怎样通过一个运算可以从一个命题产生出另一个命题的一般形式。`,`6.01	因此运算 <katex>Ω'(\\bar{η})</katex> 的一般形式是：<centered><katex>［\\bar{ξ},N(\\bar{ξ})］'(\\bar{η})(=［\\bar{η},\\bar{ξ},N(\\bar{ξ})］)</katex>。</centered> 这是由一个命题过渡到另一个命题的最一般的形式。`,`6.02	<emphasis>由此</emphasis>我们就达到了数。我给出如下定义：<centered><katex>x=Ω^{0'}x</katex> Def.
并且 <katex>Ω^{'}Ω^{ν'}x＝Ω^{ν+1'}x</katex> Def.</centered>这样，根据这些记号规则我把系列<centered><katex>x，Ω'x，Ω'Ω'x，Ω'Ω'Ω'x，</katex>……</centered>写作：<centered><katex>Ω^{0'}x，Ω^{0+1'}x，Ω^{0+1+1'}x，^{0+1+1+1'}x，</katex>……</centered>因此，我不写作“<katex>［x，ξ，Ω'ξ］</katex>”，而写作：<centered>“<katex>［Ω^{0'}x，Ω^{ν'}x，Ω^{ν+1'}x］</katex>”</centered>而且我给出如下定义：<custom /><centered>（以及依此类推）</centered>`,`6.021	数是一个运算的阶次。`,`6.022	数的概念不过是一切数所共有的东西，即数的一般形式。
数的概念是变数。
数相等的概念就是一切特定的数相等情形的一般形式。`,`6.03	整数的一般形式是：<katex>［0，\\bar{ξ}，\\bar{ξ}＋1］</katex>。`,`6.031	类的理论在数学中完全是多余的。
与此相关联的一点是：数学中所需要的概括，不是<emphasis>偶然的</emphasis>概括。`,`6.1	逻辑命题是重言式。`,`6.11	因此，逻辑命题什么也没有说。（它们是分析命题。）`,`6.111	凡是使一个逻辑命题显得像是具有内容的理论都是假的。例如，人们也许认为，词“真”和“假”标示着和其它属性一起的两种属性，于是，每个命题都具有这两种属性之一，看起来就是一个很奇怪的事实。按照这种理论，这个事实看起来决不是自明的，正如命题“所有玫瑰花不是黄的就是红的”一样，即使它为真，也不是自明的。的确，这使得逻辑命题获得了自然科学命题的全部特征，而这也就肯定地标志着逻辑命题遭到了误解。`,`6.112	要正确地说明逻辑命题，就必须在所有命题中给与它们以独特的地位。`,`6.113	逻辑命题的特有标志是，仅仅从符号人们就能认出它们为真，这个事实包含着全部的逻辑哲学。 
因此，一个同样也是非常重要的事实是：非逻辑命题的真或假<emphasis>不能</emphasis>单从命题本身看出来。`,`6.12	逻辑命题是重言式，这<emphasis>显示</emphasis>语言和世界的形式的——逻辑的——属性。
命题成分<emphasis>以这种特定方式</emphasis>联结起来构成重言式，这就表明了这些命题成分的逻辑特征。
如果一些命题以一定方式联结起来构成重言式，那么它们必定具有一定的结构性质。所以，当它们<emphasis>以这种方式</emphasis>结合起来而构成重言式时，就表明它们具有这些结构性质。`,`6.1201	例如，命题“p”和“～p”在结合“～（p·～p）”中构成一个重言式，这就表明它们是互相矛盾的。命题“p⊃q”、“p”、“q”在形式“（p⊃q）·（p）：?：（q）” 中互相结合起来构成一个重言式，这就表明 q 从 p 并且 p⊃q 得出来。“（x）·fx：⊃： fa”是一个重言式，就表明 fa 从（x）·fx 得出来，等等。`,`6.1202	很清楚，用矛盾式取代重言式也能达到同样的目的。`,`6.1203	为了看出一个表达式是重言式，在其中没有概括记号出现的情形下，可以应用如下的直观方法：我将“p”、“q”、“r’等等，写为“WpF”、“WqF”、“WrF”等等。
用括号来表达真值组合，如：<custom index="1" />并且用线段表示整个命题的真或假与其真值主目的真值组合之间的相关，方式如下<custom index="2" />这样，如上述这个记号就表述命题p⊃q。现在我想以举例的方式来考察一下命题～（p·～p）（矛盾律），看它是否为重言式。在我们的记号法中，形式“<katex>～\\bar{ξ}</katex>”写为：<custom index="3" />形式“<katex>\\bar{ξ}·η</katex>”则写为：<custom index="4" />因而，命题～（p·～q）就表为：<custom index="5" />如果在这里我们用“p”代换“q”，并考察最外层的 W 和 F 与最里层的 W 和 F 的结合，那么就得出，整个命题的真相关于其主目的<emphasis>一切</emphasis>真值组合，而其假则不与其主目的任何真值组合相关。`,`6.121	逻辑命题通过把一些命题结合成为什么也没有说的命题而展现这些命题的逻辑性质。
这种方法也可称为置零法。在逻辑命题中各命题之间达到平衡，而这种平衡状态则指明这些命题在逻辑上必须怎样构成。`,`6.122	由此得出，不用逻辑命题也行；因为在一个合适的记号系统中，我们只须仔细考察命题本身就能看出命题的形式属性。`,`6.1221	例如，若两个命题“p”和“q”在组合“p⊃q”中构成重言式，那么很清楚，q 是从 p 得来的。
例如，我们从这两个命题本身看出：“q”从“p⊃q·p”得出来，但是我们同样也可以用<emphasis>如下</emphasis>方式来表明这一点：我们将其结合为形式“p⊃q·p：?：q”，并且表明这是一个重言式。`,`6.1222	这就颇有启发地说明，为何逻辑命题不可被经验确证，就像它不可被经验驳倒一样。一个逻辑命题不仅必须不被任何可能的经验驳倒，它也必须不被任何可能的经验确证。`,`6.1223	现在清楚了，为什么人们常觉得好像我们要“<emphasis>设立</emphasis>”“逻辑真理”。道理就在于，我们可以要求设立逻辑真理，就如我们可以要求设立一种合适的记号系统一样。`,`6.1224	现在也清楚了，逻辑为何被称为形式和推论的理论。`,`6.123	很清楚，逻辑规律不能反过来又遵从逻辑规律。
（并不像罗素所认为的，每个“类型”都有一个特殊的矛盾律；一个规律就够了，因为它不应用于自身。）`,`6.1231	逻辑命题的特征<emphasis>不</emphasis>是普遍有效性。普遍不过意味着偶然地适合于一切事物。非概括命题和概括命题一样，也可以是重言式的。`,`6.1232	逻辑的普遍有效性同“凡人皆有死”这类命题的偶然的普遍有效性相对比，可以称为本质的普遍有效性。如罗素的“可归约性公理”这类命题不是逻辑命题，这就说明了我们的这种感觉：即使这些命题为真，也只能是一件碰巧的偶然事情。`,`6.1233	可能设想一个世界，其中可归约性公理是无效的。因此很清楚，我们的世界实际上是否也像这样的，这个问题同逻辑毫无关系。`,`6.124	逻辑命题描述世界的脚手架。或者不如说，它们展示世界的脚手架。它们不“论及”什么。它们假定名称具有指谓。基本命题具有意义，这就是它们同世界的联系。显然，符号——它们本质上具有确定的特性——的一定结合是重言式，这种情况必定指示着关于世界的某种东西。这是关键所在。我们说过，在我们使用的符号中，有些东西是随意的，有些东西则不是随意的。逻辑中只表达后者，这就意味着，逻辑领域不是<emphasis>我们</emphasis>借助记号来自由表达的地方，而是绝对必要的记号自身表现其本性的地方。如果我们知道任何一种记号语言的逻辑句法，那么也就有了所有的逻辑命题。`,`6.125	即使按照旧逻辑的观点，事先描述所有的“真”逻辑命题，也是可能的。`,`6.1251	因而在逻辑中<emphasis>绝不</emphasis>可能有出乎意料的东西。`,`6.126	通过对<emphasis>符号</emphasis>的逻辑属性的演算，可以演算一个命题是否属于逻辑命题。
当我们“证明”一个逻辑命题时，就是这样做的。因为无须关心意义和指谓，我们只是应用<emphasis>处理记号的规则</emphasis>来从其它命题构造逻辑命题。
逻辑命题的证明过程如下：我们连续应用总是由初始的重言式重又生成重言式的一定运算来从别的逻辑命题产生出待证明的逻辑命题。（而且，事实上从一个重言式只能<emphasis>得出</emphasis>重言式来。）
当然，这种指明逻辑命题是重言式的方法，对于逻辑是完全不重要的，因为作为证明的出发点的那些命题，必定无须任何证明就表明自己是重言式。`,`6.1261	在逻辑中，中间过程和结果的地位是等同的。（因此没有出乎意料的东西。）`,`6.1262	逻辑中的证明只是一种使得在复杂的情况下易于辨识重言式的机械的便利方法。`,`6.1263	如果一个有意义的命题可以<emphasis>逻辑地</emphasis>证明是从一些别的命题得来，一个逻辑命题<emphasis>也是</emphasis>如此的话，那就的确太奇怪了。一开始就很清楚，一个有意义的命题的证明和逻辑<emphasis>中</emphasis>的证明必然是根本不同的两回事情。`,`6.1264	有意义的命题陈述某件事情，它的证明表明确是如此。在逻辑中每个命题都是一种证明的形式。
每个逻辑命题都是一个用记号表示的 modus ponens<footnote>modus ponens，假言推理的肯定式。 ——译者</footnote>。（而 modus ponens 不能用一个命题来表达。）`,`6.1265	对逻辑始终可以这样来理解：每个逻辑命题都是它自身的证明。`,`6.127	所有逻辑命题都是同等地位的：其中并没有本质上为初始命题和本质上为派生命题之分。
每个重言式本身表明它是一个重言式。`,`6.1271	很清楚，“逻辑的初始命题”的数目是任意的，因为可以从单独一个初始命题，例如，从弗雷格的那些初始命题简单地构成的一个逻辑积，推演出逻辑来。（弗雷格也许会说，这样我们就不再有一个直接自明的初始命题了。但是一位像弗雷格这样的严谨的思想家竟会援引自明的程度作为逻辑命题的标准，那是很奇怪的。）`,`6.13	逻辑不是一种学说，而是世界的一个映像。
逻辑是先验的。`,`6.2	数学是一种逻辑方法。
数学命题是等式，因此都是伪命题。`,`6.21	数学命题不表达思想。`,`6.211	在现实生活中我们要得到的并非数学命题；或者说，我们应用数学命题<emphasis>只是</emphasis>为了从一些不属于数学的命题推论出另一些同样也不属于数学的命题。
（“我们使用这个词或者这个命题究竟为了什么？”这个问题在哲学中往往导致有价值的领悟。）`,`6.22	逻辑命题在重言式中显示的世界的逻辑，数学在等式中显示出来。`,`6.23	如果两个表达式用等号连接起来，这就意味着它们可以彼此代换。但是事实是否如此，两个表达式本身必可显示出来。
两个表达式可以彼此代换，这表明它们的逻辑形式的特征。`,`6.231	肯定可以看作双重否定，这是肯定的一个性质。
“1＋1＋1＋1”可以看作“（1＋1）＋（1＋1）”，这是“1＋1＋1＋1”的一个性质。`,`6.232	弗雷格说，上述两个表达式有相同的指谓，但是有不同的意义。
但对于等式来说，具有根本意义的一点是：为了显示用等号连接的两个表达式有相同的指谓，等式并非必要，因为这一点从两个表达式本身即可以看出来。`,`6.2321	而数学命题证明的可能性，不过意味着数学命题的正确性可以直接察知，而无须将它们表达的东西本身同事实比较以确定其正确性。`,`6.2322	两个表达式指谓的同一是不能<emphasis>断言</emphasis>的。因为，为了能够断言关于它们指谓的任何东西，我就必须知道它们的指谓，而一旦知道了它们的指谓，也就知道了它们所指的是否相同。`,`6.2323	等式不过标志我考察两个表达式的角度，即它们的指谓相等的角度。`,`6.233	在解决数学问题中是否需要直觉，这个问题应该这样回答：这里语言已经提供了必须的直觉。`,`6.2331	<emphasis>演算</emphasis>过程正好引进了这种直觉。
演算并非试验。`,`6.234	数学是一种逻辑的方法。`,`6.2341	数学方法的本质特征在于它是用等式来工作的。正是由于这种方法，每个数学命题本身必须足以表明自己的成立。`,`6.24	数学用来得到等式的方法是代换法。因为等式表达两个表达式的可代换性；我们从一定数目的等式出发，按照等式的条件，通过代换不同的表达式而推进到新的等式。`,`6.241	因此，命题 2×2＝4 的证明进行如下：<centered><katex>{(Ω^{ν})^{μ}}'x={Ω^{ν\\timesμ}}'x</katex> Def.
<katex>{Ω^{2\\times2}}'x={(Ω^{2})^{2}}'x={(Ω^{2})^{1+1}}'x</katex>
<katex>={Ω^{2}}'{Ω^{2}}'x={Ω^{1+1}}'{Ω^{1+1}}'x=(Ω'Ω)'(Ω'Ω)'x</katex>
<katex>=Ω'Ω'Ω'Ω'x={Ω^{1+1+1+1}}'x={Ω^4}'x</katex></centered>`,`6.3	逻辑的探究就是对<emphasis>所有符合规律性的东西</emphasis>的探究。逻辑之外的一切都是偶然的。`,`6.31	所谓的归纳律不可能是一条逻辑规律，因为它显然是一个有意义的命题。——因此它也不可能是一条先天的规律。`,`6.32	因果律不是规律而是一种规律的形式。`,`6.321	“因果律”是一个通名。正如在力学中有一些“极小原理”。如最小作用律，在物理学中也有一些因果律，即具有因果形式的规律。`,`6.3211	的确，人们在精确地知道怎样表述“最小作用律”以前，就已经猜测到应该有<emphasis>一个</emphasis>这样的规律。（在这里，像通常那样，一定的先天的东西被证明是某种纯属逻辑的东西。）`,`6.33	我们并非先天地<emphasis>相信</emphasis>一种守恒律，而是先天地<emphasis>知道</emphasis>一种逻辑形式的可能性。`,`6.34	如充足理由律、自然界的连续性原理和最小耗损原理等等，所有这些命题都是关于科学命题可能的规范形式的先天领悟。`,`6.341	例如，牛顿力学给世界的描述提供了一种统一的形式。让我们设想一个上面有着一些不规则黑斑的白色表面。于是我们可以说，不管这些斑块构成一种什么图像，只要用一张足够精细的方格网覆盖住这个表面，然后说出每一个方格是黑的还是白的，我就总是能够使对这个表面的描述达到任意程度的近似。用这个办法我就给这个表面的描述提供了一种统一的形式。这种形式是任意选择的，因为我可以用一张三角形格子或者六角形格子的网来达到同样的效果。也许用三角形格子的网会使描述更为简单：也就是说，用较稀的三角形网格也许比用较密的四方形网格能够更精确地描述这个表面（或者相反），如此等等。不同的网相当于不同的描述世界的系统。力学规定了一种描述世界的形式：它指出，所有描述世界的命题都必须以一定的方式从若干给定的命题——力学公理而得到。这样它就提供了建筑科学大厦的砖块，而且指出：不管你想建筑怎样的大厦，你总得必须使用而且只能使用这些砖块。
（正如借助数字系统我们能够写出任何数目一样，借助力学系统我们也应该能够写出任何物理学命题。）`,`6.342	现在我们可以看出逻辑和力学的相对地位。（这张网也可由不只一种形状的网眼组成：例如，我们可以用三角形和六角形两种网眼。）以一种给定形式的网来描述一个如上所述的图像，这一可能性关于这图像本身并无所说。（因为这种可能性对于所有这类图像都是有效的。）但是，这图像能够用具有<emphasis>特定</emphasis>大小网眼的特定的网来<emphasis>完全地</emphasis>描述，这件事<emphasis>确实</emphasis>说明了这图像的特征。
同样，世界可以用牛顿力学来描述，这关于世界并无所说；但是恰如实际上所用的描述世界的<emphasis>这种确定方式</emphasis>，却告诉了我们关于世界的某些东西。用一种力学可以比用另一种力学更为简单地描述世界，也告诉了我们关于世界的某些东西。`,`6.343	力学是一种按照单一的计划来构造我们描述世界所需的全部<emphasis>真</emphasis>命题的尝试。`,`6.3431	物理学定律借助其全部的逻辑机制而间接地说及世界的对象。`,`6.3432	我们不应忘记，力学对世界的描述都是完全一般的描述。例如，它从不提到<emphasis>特定的</emphasis>质点：它只是谈论<emphasis>任何一个不论怎样的质点</emphasis>。`,`6.35	虽然我们上述图像中的斑块是几何图形，但是几何学显然根本不能谈论它的实际形状和位置。而网是<emphasis>纯粹</emphasis>几何学的，它的全部属性可以先天地给出来。
像充足理由律等等这样的定律，涉及的是网而不是网所描述的东西。`,`6.36	要是有因果律，也就可以说“有自然律”。不过，这当然不可说，而是自已显露出来的。`,`6.361	可以用赫兹的话来说：只有<emphasis>遵从规律的</emphasis>联系才是<emphasis>可以思考</emphasis>的。`,`6.3611	我们不能将一个过程和“时间之流”——不存在这种东西——相比较，而只能将它同另一个过程（如计时器的运行过程）相比较。
因此，我们只有依靠另外一种过程才能描述一段时间的经过。
对于空间也有完全类似的情形。例如，当人们说，两个（相互排斥的）事件中一个也不能发生，因为<emphasis>没有任何东西导致发生</emphasis>一个事件而不发生另一个事件，这实际上是由于，除非有某种不对称，我们就不能描述这两件事当中的<emphasis>一件</emphasis>。而<emphasis>如果有</emphasis>这种不对称，我们就可以认为它是一件事发生而另一件事不发生的原因。`,`6.36111	康德的关于右手和左手不能使之重合的问题，在平面中就已经存在，甚至也存在于一维空间中：<centered><katex>\\cdots\\underset{\\text{a}}{\\circ——\\times}\\cdots\\underset{\\text{b}}{\\times——\\circ}\\cdots</katex></centered>如其中两个全等的图形 a 和 b，除非越出这个空间，就不能使之重合。右手和左手事实上是真正地全等的，人们不能使它们重合与这一事实没有关系。
假如能够在四维空间中旋转，右手套就可以戴到左手上面。`,`6.362	凡能描述的就能够发生；而为因果律所排除的东西是不可描述的。`,`6.363	归纳程序的实质在于，我们承认能够同我们的经验协调的<emphasis>最简单的</emphasis>规律为真。`,`6.3631	但是这种程序只有心理的依据而没有逻辑的依据。
很清楚，相信实际上只会发生最简单的可能事件是没有根据的。`,`6.36311	太阳会在明天出来是一个假设：这意味着我们不<emphasis>知道</emphasis>它是否会出来。`,`6.37	由于另外某个事件的发生，一个事件就必定发生，这种强制性是没有的。只有一种<emphasis>逻辑的</emphasis>必然性。`,`6.371	整个现代的世界观都建立在一种幻觉的基础上，即认为所谓的自然律是自然现象的解释。`,`6.372	所以，当代人们站在自然律面前，就像古代人们站在神和命运面前一样，把它视为某种神圣不可侵犯的东西。
事实上他们两者都是正确的，也都是错误的：虽然古代人们的观点更为清楚一些，因为他们承认有一个明白的界限，而现代的系统则力求显得似乎<emphasis>一切东西</emphasis>都已经得到解释。`,`6.373	世界是独立于我的意志的。`,`6.374	即使我们所希望的一切都会发生，这也只能说是命运的恩赐，因为在意志和世界之间没有保证这一点的<emphasis>逻辑的</emphasis>联系，而假定的物理的联系又不是我们自己所能意愿的东西。`,`6.375	正如只有<emphasis>逻辑的</emphasis>必然性一样，也只有<emphasis>逻辑的</emphasis>不可能性。`,`6.3751	例如，在视域的一个位置上同时显现两种颜色是不可能的，而且是逻辑上的不可能，因为它为颜色的逻辑结构所排斥。
让我们设想这种矛盾在物理学中是如何表现的：大体上是这样的——一个质点不可能同时具有两个速度；也就是说，它不可能同时处在两个位置；也就是说，同一时刻处在不同位置的质点不可能是同一的。
（很清楚，两个基本命题的逻辑积可以既不是重言式也不是矛盾。说视野中的一个点同时具有两种不同颜色，这个陈述是一个矛盾。）`,`6.4	所有命题都是同等价值的。`,`6.41	世界的意义必定在世界之外。世界中一切事情就如它们之所是而是，如它们之所发生而发生；世界<emphasis>中</emphasis>不存在价值——如果存在价值，那它也会是无价值的。
如果存在任何有价值的价值，那么它必定处在一切发生的和既存的东西之外。因为一切发生的和既存的东西都是偶然的。
使它们成为非偶然的那种东西，不可能<emphasis>在</emphasis>世界<emphasis>之中</emphasis>，因为如果在世界之中，它本身就是偶然的了。
它必定在世界之外。`,`6.42	所以也不可能有伦理命题。
命题不能表达更高的东西。`,`6.421	很清楚，伦理是不可说的。
伦理是超验的。
（伦理和美学是同一个东西。）`,`6.422	当列出一个“你应该……”形式的伦理规范时，人们首先的一个想法就是：如果我不这样做又怎么样呢？可是很清楚，伦理与通常意义下的奖和惩没有什么关系。所以关于行为<emphasis>后果</emphasis>的问题必定是不重要的。——至少那些后果不是重大事件。但是这问题的提出必有某种正确的东西。确实应该有某种伦理的奖励和伦理的惩罚，但是这些必须就包含在行动本身之中。
（同样也很清楚，奖励应该是某种愉快的东西，而惩罚应该是某种不愉快的东西。）`,`6.423	作为伦理主体的意志是不可说的。
而作为一种现象的意志只有心理学才感到兴趣。`,`6.43	如果善的意志或恶的意志可以改变世界，那么它只能改变世界的界限，而不能改变事实，即不能改变可以用语言表达的东西。
简言之，其结果必然是世界整个地变成另外的样子。也就是说，世界必定作为整体而消长。
幸福者的世界不同于不幸者的世界。`,`6.431	同样地，在死这一点上，世界不是改变，而是终止。`,`6.4311	死不是生活里的一件事情：人是没有经历过死的。
如果我们不把永恒性理解为时间的无限延续，而是理解为无时间性，那么此刻活着的人，也就永恒地活着。
人生之为无穷，正如视域之为无限。`,`6.4312	不仅人的灵魂在时间上的不灭，或者说它在死后的永存，是没有保证的，而且在任何情形下，这个假定都达不到人们所不断追求的目的。难道由于我的永生就能把一些谜解开吗？这种永恒的人生难道不像我们此刻的人生一样是一个谜吗？时空之中的人生之谜的解答，在于时空<emphasis>之外</emphasis>。
（所要解答的肯定不是自然科学的问题。）`,`6.432	世界上的事物是<emphasis>怎样的</emphasis>，对于更高者完全无关紧要。上帝不<emphasis>在</emphasis>世<emphasis>上</emphasis>现身。`,`6.4321	事实都只算是提出问题，而非问题的解答。`,`6.44	世界是<emphasis>怎样的</emphasis>这一点并不神秘，而世界存在着，这一点是神秘的。`,`6.45	用永恒观点来观察世界，就是把它看作一个整体——一个有界限的整体。
把世界作为一个有限整体的感觉是神秘的。`,`6.5	若解答不可说，其问题也就不可说。
<emphasis>谜</emphasis>是不存在的。
当一个问题可以提出，它也就<emphasis>可能</emphasis>得到解答。`,`6.51	怀疑论不是不可反驳的，而是因为它试图在不能提出问题的地方产生怀疑，所以显然是无意义的。
因为怀疑只能存在于有一定问题的地方，一定问题只能存在于有一定解答的地方，而解答则只能存在于有某种东西<emphasis>可说</emphasis>的地方。`,`6.52	我们觉得，即使一切<emphasis>可能的</emphasis>科学问题都已得到解答，也还完全没有触及到人生问题。当然那时不再有问题留下来，而这也就正是解答。`,`6.521	人生问题的解答在于这个问题的消除。
（有些人在长期怀疑之后发现他们明白了人生的意义，但是又不能说出来这意义究竟是什么，不就是这个道理吗？）`,`6.522	确实有不可说的东西。它们<emphasis>显示</emphasis>自己，它们是神秘的东西。`,`6.53	哲学中正确的方法是：除了可说的东西，即自然科学的命题——也就是与哲学无关的某种东西之外，就不再说什么，而且一旦有人想说某种形而上学的东西时，立刻就向他指明，他没有给他的命题中的某些记号以指谓。虽然有人会不满意这种方法——他不觉得我们是在教他哲学——但是<emphasis>这</emphasis>却是唯一严格正确的方法。`,`6.54	我的命题应当是以如下方式来起阐明作用的：任何理解我的人，当他用这些命题为梯级而超越了它们时，就会终于认识到它们是无意义的。（可以说，在登上高处之后他必须把梯子扔掉。）
他必须超越这些命题，然后他就会正确看待世界。`,`7	对于不可说的东西我们必须保持沉默。`];var Qt=_(`div`,{target:`eh1i7b61`})({name:`vetbs0`,styles:`display:grid`}),$t=_(`div`,{target:`eh1i7b60`})({name:`rm6o55`,styles:`border-style:solid;border-color:#aaa;text-align:center;border-width:0;width:50px`}),en=m(2),tn=f(2),nn=c({name:`138hpv0`,styles:`border-top-width:1px!important`}),rn=c({name:`ccjhqj`,styles:`border-right-width:1px!important`}),an=c({name:`wf74ae`,styles:`border-bottom-width:1px!important`}),on=c({name:`1t95p66`,styles:`border-left-width:1px!important`});const sn=({rowSeparate:e=1,col:t,colSeparate:n=-1,values:r})=>i(Qt,{className:c(`grid-template-columns:repeat(`,t,`, 1fr);`,``),children:r.map((r,a)=>{let o=Math.floor(a/t),c=a%t;return i($t,{className:s(o===e?s(en,nn):``,c===n?s(tn,on):``,c===t-1?``:rn,an),children:r},a)})});var cn=_(`text`,{target:`eiewcif4`})({name:`1wbhht`,styles:`font-size:12px;fill:black;user-select:none`}),ln=_(`line`,{target:`eiewcif3`})({name:`vgrzyq`,styles:`stroke:black;stroke-width:1.5`}),w={a1:[40,140],a2:[140,140],a3:[140,40],a4:[40,40]},T={b1:[80,100],b2:[180,100],b3:[180,0],b4:[80,0]};const un=()=>a(`svg`,{className:d(200),viewBox:`0 0 200 150`,children:[i(ln,{x1:w.a1[0],y1:w.a1[1],x2:w.a2[0],y2:w.a2[1]}),i(ln,{x1:w.a2[0],y1:w.a2[1],x2:w.a3[0],y2:w.a3[1]}),i(ln,{x1:w.a3[0],y1:w.a3[1],x2:w.a4[0],y2:w.a4[1]}),i(ln,{x1:w.a4[0],y1:w.a4[1],x2:w.a1[0],y2:w.a1[1]}),i(ln,{x1:T.b1[0],y1:T.b1[1],x2:T.b2[0],y2:T.b2[1]}),i(ln,{x1:T.b2[0],y1:T.b2[1],x2:T.b3[0],y2:T.b3[1]}),i(ln,{x1:T.b3[0],y1:T.b3[1],x2:T.b4[0],y2:T.b4[1]}),i(ln,{x1:T.b4[0],y1:T.b4[1],x2:T.b1[0],y2:T.b1[1]}),i(ln,{x1:w.a1[0],y1:w.a1[1],x2:T.b1[0],y2:T.b1[1]}),i(ln,{x1:w.a2[0],y1:w.a2[1],x2:T.b2[0],y2:T.b2[1]}),i(ln,{x1:w.a3[0],y1:w.a3[1],x2:T.b3[0],y2:T.b3[1]}),i(ln,{x1:w.a4[0],y1:w.a4[1],x2:T.b4[0],y2:T.b4[1]}),i(cn,{x:w.a1[0]-3,y:w.a1[1]+12,children:`a`}),i(cn,{x:w.a2[0]-3,y:w.a2[1]+12,children:`a`}),i(cn,{x:w.a3[0]-6,y:w.a3[1]-5,children:`a`}),i(cn,{x:w.a4[0]-6,y:w.a4[1]-5,children:`a`}),i(cn,{x:T.b1[0]+1,y:T.b1[1]+12,children:`b`}),i(cn,{x:T.b2[0]+1,y:T.b2[1]+12,children:`b`}),i(cn,{x:T.b3[0]-3,y:T.b3[1]-5,children:`b`}),i(cn,{x:T.b4[0]-3,y:T.b4[1]-5,children:`b`})]});var dn=_(`svg`,{target:`eiewcif2`})({name:`15c4nl0`,styles:`width:300px;height:100px`}),fn=_(`circle`,{target:`eiewcif1`})({name:`zdx0bd`,styles:`fill:white;stroke:black;stroke-width:1.5`}),pn=_(`path`,{target:`eiewcif0`})({name:`sju5qp`,styles:`fill:none;stroke:black;stroke-width:1.5`}),mn=50,hn=50,gn=4,_n=300,vn=-80,yn=300,bn=180;const xn=()=>a(dn,{viewBox:`0 0 300 100`,children:[i(pn,{d:`M ${mn} ${hn}
                      C ${_n} ${vn},
                        ${yn} ${bn},
                        ${mn} ${hn}`}),i(fn,{cx:mn,cy:hn,r:gn}),i(cn,{x:mn-50,y:hn+4,children:`眼睛 -`})]}),E=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Sn=(e,t)=>t?{x:-e.y,y:e.x}:{x:e.y,y:-e.x},Cn=(e,t)=>({x:e.x*t,y:e.y*t});var D=_(`text`,{target:`e1vzqiyf2`})({name:`1wbhht`,styles:`font-size:12px;fill:black;user-select:none`}),wn=_(`line`,{target:`e1vzqiyf1`})({name:`10zi3xa`,styles:`stroke:#aaa;stroke-width:1.5`}),Tn=_(`line`,{target:`e1vzqiyf0`})({name:`vgrzyq`,styles:`stroke:black;stroke-width:1.5`}),En=({start:e,end:t,isLeftBracket:n,curveScale:r=.05})=>{let i={x:t.x-e.x,y:t.y-e.y},a=Sn(i,n),o=[e],s=e=>{let t=o[o.length-1],n=E(t,e);o.push(n)};return s(Cn(a,r)),s(Cn(i,.1)),s(Cn(i,.3)),s(Cn(i,.1)),s(Cn(a,.05)),s(Cn(a,-.05)),s(Cn(i,.1)),s(Cn(i,.3)),s(Cn(i,.1)),s(Cn(a,-r)),`
        M ${o[0].x} ${o[0].y}
        Q ${o[1].x} ${o[1].y} ${o[2].x} ${o[2].y}
        L ${o[3].x} ${o[3].y}
        Q ${o[4].x} ${o[4].y} ${o[5].x} ${o[5].y}
        Q ${o[6].x} ${o[6].y} ${o[7].x} ${o[7].y}
        L ${o[8].x} ${o[8].y}
        Q ${o[9].x} ${o[9].y} ${o[10].x} ${o[10].y}
    `.trim()},O={leftW:{x:30,y:70},left:{x:50,y:70},leftF:{x:70,y:70},rightW:{x:230,y:70},right:{x:250,y:70},rightF:{x:270,y:70}},k={leftW:{x:30,y:100},left:{x:50,y:100},leftF:{x:70,y:100},leftFW:{x:50,y:70},leftWF:{x:50,y:130},rightW:{x:210,y:100},right:{x:230,y:100},rightF:{x:250,y:100}},A={up:{x:0,y:-10},down:{x:0,y:10}},Dn={ww:{start:E(O.leftW,A.up),end:E(O.rightW,A.up),isLeftBracket:!1},wf:{start:E(O.leftW,A.up),end:E(O.rightF,A.up),isLeftBracket:!1,curveScale:.12},fw:{start:E(O.leftF,A.down),end:E(O.rightW,A.down),isLeftBracket:!0},ff:{start:E(O.leftF,A.down),end:E(O.rightF,A.down),isLeftBracket:!0,curveScale:.12}},On={fw:{start:E(O.leftF,A.up),end:E(O.rightW,A.up),isLeftBracket:!1},ff:{start:E(O.leftF,A.up),end:E(O.rightF,A.up),isLeftBracket:!1,curveScale:.12},ww:{start:E(O.leftW,A.down),end:E(O.rightW,A.down),isLeftBracket:!0},wf:{start:E(O.leftW,A.down),end:E(O.rightF,A.down),isLeftBracket:!0,curveScale:.12}},kn={fww:{start:E(k.leftFW,A.up),end:E(k.rightW,A.up),isLeftBracket:!1},fwf:{start:E(k.leftFW,A.up),end:E(k.rightF,A.up),isLeftBracket:!1,curveScale:.12},wfw:{start:E(k.leftWF,A.down),end:E(k.rightW,A.down),isLeftBracket:!0},wff:{start:E(k.leftWF,A.down),end:E(k.rightF,A.down),isLeftBracket:!0,curveScale:.12}};const An=()=>a(`svg`,{viewBox:`0 0 300 150`,width:`300`,height:`150`,children:[i(`path`,{d:En(Dn.ww),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(Dn.wf),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(Dn.fw),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(Dn.ff),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(D,{x:O.leftW.x-4,y:O.leftW.y+4,children:`W`}),i(D,{x:O.left.x-4,y:O.left.y+4,children:`p`}),i(D,{x:O.leftF.x-4,y:O.leftF.y+4,children:`F`}),i(D,{x:O.rightW.x-4,y:O.rightW.y+4,children:`W`}),i(D,{x:O.right.x-4,y:O.right.y+4,children:`q`}),i(D,{x:O.rightF.x-4,y:O.rightF.y+4,children:`F`})]}),jn=()=>a(`svg`,{viewBox:`0 0 300 150`,width:`300`,height:`150`,children:[i(`path`,{d:En(Dn.ww),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(Dn.wf),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(Dn.fw),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(Dn.ff),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(D,{x:O.leftW.x-4,y:O.leftW.y+4,children:`W`}),i(D,{x:O.left.x-4,y:O.left.y+4,children:`p`}),i(D,{x:O.leftF.x-4,y:O.leftF.y+4,children:`F`}),i(D,{x:O.rightW.x-4,y:O.rightW.y+4,children:`W`}),i(D,{x:O.right.x-4,y:O.right.y+4,children:`q`}),i(D,{x:O.rightF.x-4,y:O.rightF.y+4,children:`F`}),i(wn,{x1:130,y1:41,x2:145,y2:112}),i(wn,{x1:150,y1:95,x2:148,y2:112}),i(wn,{x1:170,y1:115,x2:155,y2:118}),i(D,{x:140,y:125,children:`W`}),i(D,{x:147,y:14,children:`F`})]}),Mn=()=>a(`svg`,{viewBox:`0 0 100 200`,width:`100`,height:`200`,children:[i(D,{x:k.leftW.x-4,y:k.leftW.y+4,children:`W`}),i(D,{x:k.left.x-4,y:k.left.y+4,children:`ξ`}),i(D,{x:k.leftF.x-4,y:k.leftF.y+4,children:`F`}),i(D,{x:k.leftFW.x-4,y:k.leftFW.y+4,children:`W`}),i(D,{x:k.leftWF.x-4,y:k.leftWF.y+4,children:`F`}),i(Tn,{x1:k.leftW.x+4,y1:k.leftW.y+8,x2:k.leftWF.x-4,y2:k.leftWF.y-8}),i(Tn,{x1:k.leftF.x-4,y1:k.leftF.y-8,x2:k.leftFW.x+4,y2:k.leftFW.y+8})]}),Nn=()=>a(`svg`,{viewBox:`0 0 300 150`,width:`300`,height:`150`,children:[i(`path`,{d:En(On.ww),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(On.wf),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(On.fw),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(On.ff),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(D,{x:O.leftW.x-4,y:O.leftW.y+4,children:`W`}),i(D,{x:O.left.x-4,y:O.left.y+4,children:`ξ`}),i(D,{x:O.leftF.x-4,y:O.leftF.y+4,children:`F`}),i(D,{x:O.rightW.x-4,y:O.rightW.y+4,children:`W`}),i(D,{x:O.right.x-4,y:O.right.y+4,children:`η`}),i(D,{x:O.rightF.x-4,y:O.rightF.y+4,children:`F`}),i(wn,{x1:130,y1:95,x2:125,y2:24}),i(wn,{x1:170,y1:26,x2:162,y2:122}),i(wn,{x1:150,y1:45,x2:160,y2:122}),i(wn,{x1:150,y1:121,x2:157,y2:124}),i(D,{x:120,y:20,children:`W`}),i(D,{x:158,y:135,children:`F`})]}),Pn=()=>a(`svg`,{viewBox:`0 0 300 200`,width:`300`,height:`200`,children:[i(`path`,{d:En(kn.wfw),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(kn.wff),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(kn.fww),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(`path`,{d:En(kn.fwf),fill:`none`,stroke:`black`,strokeWidth:`1.5`}),i(D,{x:k.leftW.x-4,y:k.leftW.y+4,children:`W`}),i(D,{x:k.left.x-4,y:k.left.y+4,children:`q`}),i(D,{x:k.leftF.x-4,y:k.leftF.y+4,children:`F`}),i(D,{x:k.leftFW.x-4,y:k.leftFW.y+4,children:`W`}),i(D,{x:k.leftWF.x-4,y:k.leftWF.y+4,children:`F`}),i(D,{x:k.rightW.x-4,y:k.rightW.y+4,children:`W`}),i(D,{x:k.right.x-4,y:k.right.y+4,children:`p`}),i(D,{x:k.rightF.x-4,y:k.rightF.y+4,children:`F`}),i(Tn,{x1:k.leftW.x+4,y1:k.leftW.y+8,x2:k.leftWF.x-4,y2:k.leftWF.y-8}),i(Tn,{x1:k.leftF.x-4,y1:k.leftF.y-8,x2:k.leftFW.x+4,y2:k.leftFW.y+8}),i(wn,{x1:133,y1:60,x2:142,y2:38}),i(wn,{x1:155,y1:40,x2:160,y2:166}),i(wn,{x1:133,y1:141,x2:154,y2:167}),i(wn,{x1:155,y1:159,x2:157,y2:166}),i(D,{x:140,y:35,children:`W`}),i(D,{x:170,y:15,children:`F`}),i(Tn,{x1:153,y1:25,x2:168,y2:15}),i(D,{x:155,y:179,children:`F`}),i(D,{x:175,y:199,children:`W`}),i(Tn,{x1:163,y1:178,x2:174,y2:188})]});var Fn=window.innerWidth>window.innerHeight;const In=`Consolas, Menlo, Courier, monospace`,Ln={fontSize:Fn?`16px`:`clamp(16px, 3vmin, 30px)`,fontSizeSmall:Fn?`14px`:`clamp(14px, 2.4vmin, 24px)`,keyWidth:`clamp(15vmin, calc(50vw - 400px), 200px)`,contentPadding:`20px 0 20px clamp(20px, calc(50vw - 400px), 200px)`,contentWidth:`clamp(450px, calc(100vw - 400px), 800px)`};var Rn=c({name:`k6iag4`,styles:`position:relative;::after{content:'.';position:absolute;bottom:0.15em;left:0;right:0;text-align:center;font-size:1.4em;color:#333;line-height:0;}`});const zn=({children:e})=>e.split(``).map((e,t)=>i(`span`,{className:Rn,children:e},t));var Bn=c({name:`1jdkqc0`,styles:`font-size:12px;color:#999;cursor:help;margin:0 3px 0 1px`});const Vn=({children:e})=>i(ee,{title:e,children:i(`sup`,{children:i(oe,{className:Bn})})}),Hn=({children:e})=>{let t=(0,y.useRef)(null);return(0,y.useEffect)(()=>{if(t.current)try{ae(e,t.current,{throwOnError:!1})}catch(e){console.error(`Katex rendering error:`,e)}},[e]),i(`span`,{ref:t})},Un=_(`span`,{target:`e1oq7icp1`})({name:`tjm4n5`,styles:`font-family:'KaiTi','楷体','STKaiti','华文楷体','SimKai',serif;font-size:17px`}),Wn=_(`div`,{target:`e1oq7icp0`})(`text-align:center;width:`,Ln.contentWidth,`;`),Gn=_(`div`,{target:`ebn8goc1`})(`display:flex;align-items:center;flex-wrap:wrap;gap:40px;padding:`,Ln.contentPadding,`;`);var Kn=_(`div`,{target:`ebn8goc0`})({name:`oosbp6`,styles:`display:flex;align-items:center;flex-wrap:wrap;gap:10px`}),qn=`pqrWWWFWWWFWWWFFFWFWFWFFFFF`.split(``),Jn=[`p`,`q`,`W`,`W`,`F`,`W`,`W`,`F`,`F`,`F`],Yn=[`p`,`W`,`F`];const Xn=()=>a(Gn,{children:[a(Kn,{children:[i(sn,{col:3,values:qn}),`，`]}),a(Kn,{children:[i(sn,{col:2,values:Jn}),`，`]}),a(Kn,{children:[i(sn,{col:1,values:Yn}),`。`]})]});var Zn=_(`div`,{target:`e13ljz3r2`})(`font-size:13px;font-family:`,In,`;padding:`,Ln.contentPadding,`;`),Qn=_(`div`,{target:`e13ljz3r1`})(`width:`,Ln.contentWidth,`;display:flex;justify-content:center;`),$n=_(`div`,{target:`e13ljz3r0`})({name:`2qga7i`,styles:`text-align:right`}),er=[`p`,`q`,``,`W`,`W`,`W`,`F`,`W`,`W`,`W`,`F`,``,`F`,`F`,`W`],tr=[`（WWWW）（p，q）重言式（如果 p 则 p，且如果 q 则 q。）（p⊃p·q⊃q）`,`（FWWW）（p，q）用话来说：非 p 且 q 两者。（～（p·q）`,`（WFWW）（p，q）用话来说：如果 q 则 p。（q⊃p）`,`（WWFW）（p，q）用话来说：如果 p 则 q。（p⊃q）`,`（WWWF）（p，q）用话来说：p 或 q。（p V q）`,`（FFWW）（p，q）用话来说：非 q。（～q）`,`（FWFW）（p，q）用话来说：非 p。（～p）`,`（FWWF）（p，q）用话来说：p 或 q，但非 p 且 q。（p·～q：V：q·～p）`,`（WFFW）（p，q）用话来说：如果 p 则 q，且如果 q 则 p。（p≡q）`,`（WFWF）（p，q）用话来说：p`,`（WWFF）（p，q）用话来说：q`,`（FFFW）（p，q）用话来说：既非 p 亦非 q。（～p·～q 或 p|q）`,`（FFWF）（p，q）用话来说：p 且非 q。（p·～q）`,`（FWFF）（p，q）用话来说：q 且非 p。（q·～p）`,`（WFFF）（p，q）用话来说：p 且 q。（p·q）`,`（FFFF）（p，q）矛盾式（p 且非 p，和 q 且非 q）（p·～p·q·～q）`];const nr=({dataKey:e,index:t})=>{if(e===`4.31`)return i(Xn,{});if(e===`4.442`)return i(Gn,{children:i(sn,{col:3,values:er})});if(e===`5.101`)return i(Zn,{children:tr.map((e,t)=>i(`div`,{children:e},t))});if(e===`5.5423`)return i(Wn,{children:i(un,{})});if(e===`5.6331`)return i(Wn,{children:i(xn,{})});if(e===`6.02`)return i(Qn,{children:a($n,{children:[`0 ＋ 1 ＝ 1 `,i(`span`,{className:f(20),children:`Def.`}),i(`br`,{}),`0 ＋ 1 ＋ 1 ＝ 2 `,i(`span`,{className:f(20),children:`Def.`}),i(`br`,{}),`0 ＋ 1 ＋ 1 ＋ 1 ＝ 3 `,i(`span`,{className:f(20),children:`Def.`})]})});if(e===`6.1203`){if(t===`1`)return i(Wn,{children:i(An,{})});if(t===`2`)return i(Wn,{children:i(jn,{})});if(t===`3`)return i(Wn,{children:i(Mn,{})});if(t===`4`)return i(Wn,{children:i(Nn,{})});if(t===`5`)return i(Wn,{children:i(Pn,{})})}},rr=({dataKey:e,node:t})=>(0,y.useMemo)(()=>{let{nodeName:n,textContent:r,childNodes:a}=t;switch(n){case`emphasis`:return i(zn,{children:r});case`footnote`:return i(Vn,{children:r});case`katex`:return i(Hn,{children:r});case`kaiti`:return i(Un,{children:r});case`centered`:return i(Wn,{children:[...a].map((t,n)=>i(rr,{dataKey:e,node:t},n))});case`custom`:return i(nr,{dataKey:e,index:t.getAttribute(`index`)});case`#text`:return i(o,{children:r});default:return console.warn(`Unknown node type: ${n}`),i(o,{children:r})}},[e,t]);var ir=_(`div`,{target:`ebqe6yq1`})({name:`wwwzmf`,styles:`display:flex;padding:8px 15px;border:1px solid transparent;overflow:hidden;&.active{background-color:#f0f8ff;border-color:#d0e7ff;border-radius:4px;}&.related{background-color:#f4faff;}&.hide{display:none;}&.collapsed{border-bottom:4px solid #f2f2f2;}`}),ar=_(`div`,{target:`ebqe6yq0`})(`width:`,Ln.keyWidth,`;font-family:`,In,`;flex-shrink:0;`),or=i(Vn,{children:`标记各个命题的十进数表明这些命题的逻辑重要性和在我的叙述中对它们的强调。命题 n.1，n.2，n.3 等等是对命题 n 的评述；命题 n.m1，n.m2 等等是对命题 n.m 的评述；余类推。`}),sr=new DOMParser;const cr=({item:e})=>{let[t,n]=e.split(`	`),r=sr.parseFromString(`<container>${n}</container>`,`application/xml`);return a(ir,{"data-key":t??`0`,children:[a(ar,{children:[t,t===`1`&&or]}),i(`div`,{children:[...r.documentElement.childNodes].map((e,n)=>i(rr,{node:e,dataKey:t},n))})]})};var lr=re();const ur=lr.getValue,dr=lr.set;var fr=re();const pr=fr.useValue,mr=fr.reset,hr=e=>{let t=lr.getValue(),n=e.dataset.key;fr.set(n),t?.forEach(t=>{t!==e&&(t.classList.remove(`active`),t.classList.remove(`related`),t.dataset.key.startsWith(n)&&t.classList.add(`related`))}),e.classList.remove(`related`),e.classList.add(`active`),window.location.hash=`#${n}`};var gr=_(`div`,{target:`e4up7yr0`})({name:`1fiuwws`,styles:`position:relative;color:#fff;text-align:center;background-color:#159957;background-image:linear-gradient(120deg, #155799, #159957);padding:80px 100px`});const _r=()=>a(gr,{children:[i(`h3`,{children:`汉译世界学术名著丛书——商务印书馆`}),i(`h1`,{className:h(50),children:`逻辑哲学论`}),i(`h2`,{children:`〔奥〕维特根斯坦 著`}),i(`h2`,{children:`贺绍甲 译`})]});var vr=e=>{e.preventDefault();let t=document.querySelector(`.active`);if(!t)return;let n=t[e.code===`ArrowUp`?`previousElementSibling`:`nextElementSibling`];n&&n.dataset.key&&(hr(n),n.scrollIntoView({behavior:`smooth`,block:`center`}))};const yr=()=>{g({code:`ArrowUp`,keydown:vr}),g({code:`ArrowDown`,keydown:vr})};var br=`vercel.ai.error`,xr=Symbol.for(br),Sr,Cr=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[Sr]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,br)}static hasMarker(e,t){let n=Symbol.for(t);return typeof e==`object`&&!!e&&n in e&&typeof e[n]==`boolean`&&e[n]===!0}};Sr=xr;var j=Cr,wr=`AI_APICallError`,Tr=`vercel.ai.error.${wr}`,Er=Symbol.for(Tr),Dr,Or=class extends j{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:a,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:c}){super({name:wr,message:e,cause:o}),this[Dr]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=a,this.isRetryable=s,this.data=c}static isInstance(e){return j.hasMarker(e,Tr)}};Dr=Er;var kr=`AI_EmptyResponseBodyError`,Ar=`vercel.ai.error.${kr}`,jr=Symbol.for(Ar),Mr,Nr=class extends j{constructor({message:e=`Empty response body`}={}){super({name:kr,message:e}),this[Mr]=!0}static isInstance(e){return j.hasMarker(e,Ar)}};Mr=jr;function Pr(e){return e==null?`unknown error`:typeof e==`string`?e:e instanceof Error?e.message:JSON.stringify(e)}var Fr=`AI_InvalidArgumentError`,Ir=`vercel.ai.error.${Fr}`,Lr=Symbol.for(Ir),Rr,zr=class extends j{constructor({message:e,cause:t,argument:n}){super({name:Fr,message:e,cause:t}),this[Rr]=!0,this.argument=n}static isInstance(e){return j.hasMarker(e,Ir)}};Rr=Lr;var Br=`AI_InvalidPromptError`,Vr=`vercel.ai.error.${Br}`,Hr=Symbol.for(Vr),Ur,Wr=class extends j{constructor({prompt:e,message:t,cause:n}){super({name:Br,message:`Invalid prompt: ${t}`,cause:n}),this[Ur]=!0,this.prompt=e}static isInstance(e){return j.hasMarker(e,Vr)}};Ur=Hr;var Gr=`AI_InvalidResponseDataError`,Kr=`vercel.ai.error.${Gr}`,qr=Symbol.for(Kr),Jr,Yr=class extends j{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Gr,message:t}),this[Jr]=!0,this.data=e}static isInstance(e){return j.hasMarker(e,Kr)}};Jr=qr;var Xr=`AI_JSONParseError`,Zr=`vercel.ai.error.${Xr}`,Qr=Symbol.for(Zr),$r,ei=class extends j{constructor({text:e,cause:t}){super({name:Xr,message:`JSON parsing failed: Text: ${e}.
Error message: ${Pr(t)}`,cause:t}),this[$r]=!0,this.text=e}static isInstance(e){return j.hasMarker(e,Zr)}};$r=Qr;var ti=`AI_LoadAPIKeyError`,ni=`vercel.ai.error.${ti}`,ri=Symbol.for(ni),ii,ai=class extends j{constructor({message:e}){super({name:ti,message:e}),this[ii]=!0}static isInstance(e){return j.hasMarker(e,ni)}};ii=ri;var oi=`AI_NoSuchModelError`,si=`vercel.ai.error.${oi}`,ci=Symbol.for(si),li,ui=class extends j{constructor({errorName:e=oi,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[li]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return j.hasMarker(e,si)}};li=ci;var di=`AI_TypeValidationError`,fi=`vercel.ai.error.${di}`,pi=Symbol.for(fi),mi,hi=class e extends j{constructor({value:e,cause:t}){super({name:di,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Pr(t)}`,cause:t}),this[mi]=!0,this.value=e}static isInstance(e){return j.hasMarker(e,fi)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}};mi=pi;var gi=hi,_i=`AI_UnsupportedFunctionalityError`,vi=`vercel.ai.error.${_i}`,yi=Symbol.for(vi),bi,xi=class extends j{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:_i,message:t}),this[bi]=!0,this.functionality=e}static isInstance(e){return j.hasMarker(e,vi)}};bi=yi;var Si=class extends Error{constructor(e,t){super(e),this.name=`ParseError`,this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function Ci(e){}function wi(e){if(typeof e==`function`)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=Ci,onError:n=Ci,onRetry:r=Ci,onComment:i}=e,a=``,o=!0,s,c=``,l=``;function u(e){let t=o?e.replace(/^\xEF\xBB\xBF/,``):e,[n,r]=Ti(`${a}${t}`);for(let e of n)d(e);a=r,o=!1}function d(e){if(e===``){p();return}if(e.startsWith(`:`)){i&&i(e.slice(e.startsWith(`: `)?2:1));return}let t=e.indexOf(`:`);if(t!==-1){let n=e.slice(0,t),r=e[t+1]===` `?2:1;f(n,e.slice(t+r),e);return}f(e,``,e)}function f(e,t,i){switch(e){case`event`:l=t;break;case`data`:c=`${c}${t}
`;break;case`id`:s=t.includes(`\0`)?void 0:t;break;case`retry`:/^\d+$/.test(t)?r(parseInt(t,10)):n(new Si(`Invalid \`retry\` value: "${t}"`,{type:`invalid-retry`,value:t,line:i}));break;default:n(new Si(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:`unknown-field`,field:e,value:t,line:i}));break}}function p(){c.length>0&&t({id:s,event:l||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),s=void 0,c=``,l=``}function m(e={}){a&&e.consume&&d(a),o=!0,s=void 0,c=``,l=``,a=``}return{feed:u,reset:m}}function Ti(e){let t=[],n=``,r=0;for(;r<e.length;){let i=e.indexOf(`\r`,r),a=e.indexOf(`
`,r),o=-1;if(i!==-1&&a!==-1?o=Math.min(i,a):i===-1?a!==-1&&(o=a):o=i===e.length-1?-1:i,o===-1){n=e.slice(r);break}else{let n=e.slice(r,o);t.push(n),r=o+1,e[r-1]===`\r`&&e[r]===`
`&&r++}}return[t,n]}var Ei=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(i){r=wi({onEvent:e=>{i.enqueue(e)},onError(t){e===`terminate`?i.error(t):typeof e==`function`&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}};Object.freeze({status:`aborted`});function M(e,t,n){function r(n,r){var i;for(let a in Object.defineProperty(n,`_zod`,{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r),o.prototype)a in n||Object.defineProperty(n,a,{value:o.prototype[a].bind(n)});n._zod.constr=o,n._zod.def=r}let i=n?.Parent??Object;class a extends i{}Object.defineProperty(a,`name`,{value:e});function o(e){var t;let i=n?.Parent?new a:this;r(i,e),(t=i._zod).deferred??(t.deferred=[]);for(let e of i._zod.deferred)e();return i}return Object.defineProperty(o,`init`,{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>n?.Parent&&t instanceof n.Parent?!0:t?._zod?.traits?.has(e)}),Object.defineProperty(o,`name`,{value:e}),o}var Di=class extends Error{constructor(){super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`)}},Oi=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name=`ZodEncodeError`}};const ki={};function Ai(e){return e&&Object.assign(ki,e),ki}function ji(e){let t=Object.values(e).filter(e=>typeof e==`number`);return Object.entries(e).filter(([e,n])=>t.indexOf(+e)===-1).map(([e,t])=>t)}function Mi(e,t){return typeof t==`bigint`?t.toString():t}function Ni(e){return{get value(){{let t=e();return Object.defineProperty(this,`value`,{value:t}),t}throw Error(`cached value already set`)}}}function Pi(e){return e==null}function Fi(e){let t=e.startsWith(`^`)?1:0,n=e.endsWith(`$`)?e.length-1:e.length;return e.slice(t,n)}function Ii(e,t){let n=(e.toString().split(`.`)[1]||``).length,r=t.toString(),i=(r.split(`.`)[1]||``).length;if(i===0&&/\d?e-\d?/.test(r)){let e=r.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=n>i?n:i;return Number.parseInt(e.toFixed(a).replace(`.`,``))%Number.parseInt(t.toFixed(a).replace(`.`,``))/10**a}var Li=Symbol(`evaluating`);function N(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Li)return r===void 0&&(r=Li,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Ri(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function zi(...e){let t={};for(let n of e){let e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function Bi(e){return JSON.stringify(e)}const Vi=`captureStackTrace`in Error?Error.captureStackTrace:(...e)=>{};function Hi(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}const Ui=Ni(()=>{if(typeof navigator<`u`&&navigator?.userAgent?.includes(`Cloudflare`))return!1;try{return Function(``),!0}catch{return!1}});function Wi(e){if(Hi(e)===!1)return!1;let t=e.constructor;if(t===void 0)return!0;let n=t.prototype;return!(Hi(n)===!1||Object.prototype.hasOwnProperty.call(n,`isPrototypeOf`)===!1)}function Gi(e){return Wi(e)?{...e}:Array.isArray(e)?[...e]:e}const Ki=new Set([`string`,`number`,`symbol`]);function qi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}function Ji(e,t,n){let r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function P(e){let t=e;if(!t)return{};if(typeof t==`string`)return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error==`string`?{...t,error:()=>t.error}:t}function Yi(e){return Object.keys(e).filter(t=>e[t]._zod.optin===`optional`&&e[t]._zod.optout===`optional`)}const Xi={safeint:[-(2**53-1),2**53-1],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Zi(e,t){let n=e._zod.def;return Ji(e,zi(e._zod.def,{get shape(){let e={};for(let r in t){if(!(r in n.shape))throw Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return Ri(this,`shape`,e),e},checks:[]}))}function Qi(e,t){let n=e._zod.def;return Ji(e,zi(e._zod.def,{get shape(){let r={...e._zod.def.shape};for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return Ri(this,`shape`,r),r},checks:[]}))}function $i(e,t){if(!Wi(t))throw Error(`Invalid input to extend: expected a plain object`);let n=e._zod.def.checks;if(n&&n.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");return Ji(e,zi(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t};return Ri(this,`shape`,n),n},checks:[]}))}function ea(e,t){if(!Wi(t))throw Error(`Invalid input to safeExtend: expected a plain object`);return Ji(e,{...e._zod.def,get shape(){let n={...e._zod.def.shape,...t};return Ri(this,`shape`,n),n},checks:e._zod.def.checks})}function ta(e,t){return Ji(e,zi(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return Ri(this,`shape`,n),n},get catchall(){return t._zod.def.catchall},checks:[]}))}function na(e,t,n){return Ji(t,zi(t._zod.def,{get shape(){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in r))throw Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=e?new e({type:`optional`,innerType:r[t]}):r[t])}else for(let t in r)i[t]=e?new e({type:`optional`,innerType:r[t]}):r[t];return Ri(this,`shape`,i),i},checks:[]}))}function ra(e,t,n){return Ji(t,zi(t._zod.def,{get shape(){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=new e({type:`nonoptional`,innerType:r[t]}))}else for(let t in r)i[t]=new e({type:`nonoptional`,innerType:r[t]});return Ri(this,`shape`,i),i},checks:[]}))}function ia(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function aa(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function oa(e){return typeof e==`string`?e:e?.message}function sa(e,t,n){let r={...e,path:e.path??[]};return e.message||(r.message=oa(e.inst?._zod.def?.error?.(e))??oa(t?.error?.(e))??oa(n.customError?.(e))??oa(n.localeError?.(e))??`Invalid input`),delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function ca(e){return Array.isArray(e)?`array`:typeof e==`string`?`string`:`unknown`}function la(...e){let[t,n,r]=e;return typeof t==`string`?{message:t,code:`custom`,input:n,inst:r}:{...t}}var ua=(e,t)=>{e.name=`$ZodError`,Object.defineProperty(e,`_zod`,{value:e._zod,enumerable:!1}),Object.defineProperty(e,`issues`,{value:t,enumerable:!1}),e.message=JSON.stringify(t,Mi,2),Object.defineProperty(e,`toString`,{value:()=>e.message,enumerable:!1})};const da=M(`$ZodError`,ua),fa=M(`$ZodError`,ua,{Parent:Error});function pa(e,t=e=>e.message){let n={},r=[];for(let i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function ma(e,t=e=>e.message){let n={_errors:[]},r=e=>{for(let i of e.issues)if(i.code===`invalid_union`&&i.errors.length)i.errors.map(e=>r({issues:e}));else if(i.code===`invalid_key`)r({issues:i.issues});else if(i.code===`invalid_element`)r({issues:i.issues});else if(i.path.length===0)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){let n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(e),n}const ha=e=>(t,n,r,i)=>{let a=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise)throw new Di;if(o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>sa(e,a,Ai())));throw Vi(t,i?.callee),t}return o.value},ga=e=>async(t,n,r,i)=>{let a=r?Object.assign(r,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>sa(e,a,Ai())));throw Vi(t,i?.callee),t}return o.value},_a=e=>(t,n,r)=>{let i=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new Di;return a.issues.length?{success:!1,error:new(e??da)(a.issues.map(e=>sa(e,i,Ai())))}:{success:!0,data:a.value}},va=_a(fa),ya=e=>async(t,n,r)=>{let i=r?Object.assign(r,{async:!0}):{async:!0},a=t._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>sa(e,i,Ai())))}:{success:!0,data:a.value}},ba=ya(fa),xa=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return ha(e)(t,n,i)},Sa=e=>(t,n,r)=>ha(e)(t,n,r),Ca=e=>async(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return ga(e)(t,n,i)},wa=e=>async(t,n,r)=>ga(e)(t,n,r),Ta=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return _a(e)(t,n,i)},Ea=e=>(t,n,r)=>_a(e)(t,n,r),Da=e=>async(t,n,r)=>{let i=r?Object.assign(r,{direction:`backward`}):{direction:`backward`};return ya(e)(t,n,i)},Oa=e=>async(t,n,r)=>ya(e)(t,n,r),ka=/^[cC][^\s-]{8,}$/,Aa=/^[0-9a-z]+$/,ja=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ma=/^[0-9a-vA-V]{20}$/,Na=/^[A-Za-z0-9]{27}$/,Pa=/^[a-zA-Z0-9_-]{21}$/,Fa=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ia=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,La=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Ra=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var za=`^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;function Ba(){return new RegExp(za,`u`)}const Va=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ha=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ua=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Wa=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ga=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ka=/^[A-Za-z0-9_-]*$/,qa=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Ja=/^\+(?:[0-9]){6,14}[0-9]$/;var Ya=`(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))`;const Xa=RegExp(`^${Ya}$`);function Za(e){let t=`(?:[01]\\d|2[0-3]):[0-5]\\d`;return typeof e.precision==`number`?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Qa(e){return RegExp(`^${Za(e)}$`)}function $a(e){let t=Za({precision:e.precision}),n=[`Z`];e.local&&n.push(``),e.offset&&n.push(`([+-](?:[01]\\d|2[0-3]):[0-5]\\d)`);let r=`${t}(?:${n.join(`|`)})`;return RegExp(`^${Ya}T(?:${r})$`)}const eo=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??``}}`:`[\\s\\S]*`;return RegExp(`^${t}$`)},to=/^-?\d+$/,no=/^-?\d+(?:\.\d+)?/,ro=/^(?:true|false)$/i;var io=/^null$/i;const ao=/^[^A-Z]*$/,oo=/^[^a-z]*$/,so=M(`$ZodCheck`,(e,t)=>{var n;e._zod??={},e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])});var co={number:`number`,bigint:`bigint`,object:`date`};const lo=M(`$ZodCheckLessThan`,(e,t)=>{so.init(e,t);let n=co[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??1/0;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:`too_big`,maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),uo=M(`$ZodCheckGreaterThan`,(e,t)=>{so.init(e,t);let n=co[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??-1/0;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:`too_small`,minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),fo=M(`$ZodCheckMultipleOf`,(e,t)=>{so.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw Error(`Cannot mix number and bigint in multiple_of check.`);(typeof n.value==`bigint`?n.value%t.value===BigInt(0):Ii(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:`not_multiple_of`,divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),po=M(`$ZodCheckNumberFormat`,(e,t)=>{so.init(e,t),t.format=t.format||`float64`;let n=t.format?.includes(`int`),r=n?`int`:`number`,[i,a]=Xi[t.format];e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=a,n&&(r.pattern=to)}),e._zod.check=o=>{let s=o.value;if(n){if(!Number.isInteger(s)){o.issues.push({expected:r,format:t.format,code:`invalid_type`,continue:!1,input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?o.issues.push({input:s,code:`too_big`,maximum:2**53-1,note:`Integers must be within the safe integer range.`,inst:e,origin:r,continue:!t.abort}):o.issues.push({input:s,code:`too_small`,minimum:-(2**53-1),note:`Integers must be within the safe integer range.`,inst:e,origin:r,continue:!t.abort});return}}s<i&&o.issues.push({origin:`number`,input:s,code:`too_small`,minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>a&&o.issues.push({origin:`number`,input:s,code:`too_big`,maximum:a,inst:e})}}),mo=M(`$ZodCheckMaxLength`,(e,t)=>{var n;so.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!Pi(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag.maximum??1/0;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let r=n.value;if(r.length<=t.maximum)return;let i=ca(r);n.issues.push({origin:i,code:`too_big`,maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),ho=M(`$ZodCheckMinLength`,(e,t)=>{var n;so.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!Pi(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag.minimum??-1/0;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let r=n.value;if(r.length>=t.minimum)return;let i=ca(r);n.issues.push({origin:i,code:`too_small`,minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),go=M(`$ZodCheckLengthEquals`,(e,t)=>{var n;so.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return!Pi(t)&&t.length!==void 0}),e._zod.onattach.push(e=>{let n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{let r=n.value,i=r.length;if(i===t.length)return;let a=ca(r),o=i>t.length;n.issues.push({origin:a,...o?{code:`too_big`,maximum:t.length}:{code:`too_small`,minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),_o=M(`$ZodCheckStringFormat`,(e,t)=>{var n,r;so.init(e,t),e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??=new Set,n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:`string`,code:`invalid_format`,format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),vo=M(`$ZodCheckRegex`,(e,t)=>{_o.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:`string`,code:`invalid_format`,format:`regex`,input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),yo=M(`$ZodCheckLowerCase`,(e,t)=>{t.pattern??=ao,_o.init(e,t)}),bo=M(`$ZodCheckUpperCase`,(e,t)=>{t.pattern??=oo,_o.init(e,t)}),xo=M(`$ZodCheckIncludes`,(e,t)=>{so.init(e,t);let n=qi(t.includes),r=new RegExp(typeof t.position==`number`?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:`string`,code:`invalid_format`,format:`includes`,includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),So=M(`$ZodCheckStartsWith`,(e,t)=>{so.init(e,t);let n=RegExp(`^${qi(t.prefix)}.*`);t.pattern??=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:`string`,code:`invalid_format`,format:`starts_with`,prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Co=M(`$ZodCheckEndsWith`,(e,t)=>{so.init(e,t);let n=RegExp(`.*${qi(t.suffix)}$`);t.pattern??=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??=new Set,t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:`string`,code:`invalid_format`,format:`ends_with`,suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),wo=M(`$ZodCheckOverwrite`,(e,t)=>{so.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});var To=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),--this.indent}write(e){if(typeof e==`function`){e(this,{execution:`sync`}),e(this,{execution:`async`});return}let t=e.split(`
`).filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>` `.repeat(this.indent*2)+e);for(let e of r)this.content.push(e)}compile(){let e=Function,t=this?.args,n=[...(this?.content??[``]).map(e=>`  ${e}`)];return new e(...t,n.join(`
`))}};const Eo={major:4,minor:1,patch:12},F=M(`$ZodType`,(e,t)=>{var n;e??={},e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Eo;let r=[...e._zod.def.checks??[]];e._zod.traits.has(`$ZodCheck`)&&r.unshift(e);for(let t of r)for(let n of t._zod.onattach)n(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,n)=>{let r=ia(e),i;for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(r)continue;let t=e.issues.length,o=a._zod.check(e);if(o instanceof Promise&&n?.async===!1)throw new Di;if(i||o instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await o,e.issues.length!==t&&(r||=ia(e,t))});else{if(e.issues.length===t)continue;r||=ia(e,t)}}return i?i.then(()=>e):e},n=(n,i,a)=>{if(ia(n))return n.aborted=!0,n;let o=t(i,r,a);if(o instanceof Promise){if(a.async===!1)throw new Di;return o.then(t=>e._zod.parse(t,a))}return e._zod.parse(o,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if(a.direction===`backward`){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,i,a)):n(t,i,a)}let o=e._zod.parse(i,a);if(o instanceof Promise){if(a.async===!1)throw new Di;return o.then(e=>t(e,r,a))}return t(o,r,a)}}e[`~standard`]={validate:t=>{try{let n=va(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch{return ba(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:`zod`,version:1}}),Do=M(`$ZodString`,(e,t)=>{F.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??eo(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value==`string`||n.issues.push({expected:`string`,code:`invalid_type`,input:n.value,inst:e}),n}}),I=M(`$ZodStringFormat`,(e,t)=>{_o.init(e,t),Do.init(e,t)}),Oo=M(`$ZodGUID`,(e,t)=>{t.pattern??=Ia,I.init(e,t)}),ko=M(`$ZodUUID`,(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(e===void 0)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??=La(e)}else t.pattern??=La();I.init(e,t)}),Ao=M(`$ZodEmail`,(e,t)=>{t.pattern??=Ra,I.init(e,t)}),jo=M(`$ZodURL`,(e,t)=>{I.init(e,t),e._zod.check=n=>{try{let r=n.value.trim(),i=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:`invalid_format`,format:`url`,note:`Invalid hostname`,pattern:qa.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(`:`)?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:`invalid_format`,format:`url`,note:`Invalid protocol`,pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:`invalid_format`,format:`url`,input:n.value,inst:e,continue:!t.abort})}}}),Mo=M(`$ZodEmoji`,(e,t)=>{t.pattern??=Ba(),I.init(e,t)}),No=M(`$ZodNanoID`,(e,t)=>{t.pattern??=Pa,I.init(e,t)}),Po=M(`$ZodCUID`,(e,t)=>{t.pattern??=ka,I.init(e,t)}),Fo=M(`$ZodCUID2`,(e,t)=>{t.pattern??=Aa,I.init(e,t)}),Io=M(`$ZodULID`,(e,t)=>{t.pattern??=ja,I.init(e,t)}),Lo=M(`$ZodXID`,(e,t)=>{t.pattern??=Ma,I.init(e,t)}),Ro=M(`$ZodKSUID`,(e,t)=>{t.pattern??=Na,I.init(e,t)}),zo=M(`$ZodISODateTime`,(e,t)=>{t.pattern??=$a(t),I.init(e,t)}),Bo=M(`$ZodISODate`,(e,t)=>{t.pattern??=Xa,I.init(e,t)}),Vo=M(`$ZodISOTime`,(e,t)=>{t.pattern??=Qa(t),I.init(e,t)}),Ho=M(`$ZodISODuration`,(e,t)=>{t.pattern??=Fa,I.init(e,t)}),Uo=M(`$ZodIPv4`,(e,t)=>{t.pattern??=Va,I.init(e,t),e._zod.onattach.push(e=>{let t=e._zod.bag;t.format=`ipv4`})}),Wo=M(`$ZodIPv6`,(e,t)=>{t.pattern??=Ha,I.init(e,t),e._zod.onattach.push(e=>{let t=e._zod.bag;t.format=`ipv6`}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:`invalid_format`,format:`ipv6`,input:n.value,inst:e,continue:!t.abort})}}}),Go=M(`$ZodCIDRv4`,(e,t)=>{t.pattern??=Ua,I.init(e,t)}),Ko=M(`$ZodCIDRv6`,(e,t)=>{t.pattern??=Wa,I.init(e,t),e._zod.check=n=>{let r=n.value.split(`/`);try{if(r.length!==2)throw Error();let[e,t]=r;if(!t)throw Error();let n=Number(t);if(`${n}`!==t||n<0||n>128)throw Error();new URL(`http://[${e}]`)}catch{n.issues.push({code:`invalid_format`,format:`cidrv6`,input:n.value,inst:e,continue:!t.abort})}}});function qo(e){if(e===``)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const Jo=M(`$ZodBase64`,(e,t)=>{t.pattern??=Ga,I.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding=`base64`}),e._zod.check=n=>{qo(n.value)||n.issues.push({code:`invalid_format`,format:`base64`,input:n.value,inst:e,continue:!t.abort})}});function Yo(e){if(!Ka.test(e))return!1;let t=e.replace(/[-_]/g,e=>e===`-`?`+`:`/`);return qo(t.padEnd(Math.ceil(t.length/4)*4,`=`))}const Xo=M(`$ZodBase64URL`,(e,t)=>{t.pattern??=Ka,I.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding=`base64url`}),e._zod.check=n=>{Yo(n.value)||n.issues.push({code:`invalid_format`,format:`base64url`,input:n.value,inst:e,continue:!t.abort})}}),Zo=M(`$ZodE164`,(e,t)=>{t.pattern??=Ja,I.init(e,t)});function Qo(e,t=null){try{let n=e.split(`.`);if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let i=JSON.parse(atob(r));return!(`typ`in i&&i?.typ!==`JWT`||!i.alg||t&&(!(`alg`in i)||i.alg!==t))}catch{return!1}}const $o=M(`$ZodJWT`,(e,t)=>{I.init(e,t),e._zod.check=n=>{Qo(n.value,t.alg)||n.issues.push({code:`invalid_format`,format:`jwt`,input:n.value,inst:e,continue:!t.abort})}}),es=M(`$ZodNumber`,(e,t)=>{F.init(e,t),e._zod.pattern=e._zod.bag.pattern??no,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}let i=n.value;if(typeof i==`number`&&!Number.isNaN(i)&&Number.isFinite(i))return n;let a=typeof i==`number`?Number.isNaN(i)?`NaN`:Number.isFinite(i)?void 0:`Infinity`:void 0;return n.issues.push({expected:`number`,code:`invalid_type`,input:i,inst:e,...a?{received:a}:{}}),n}}),ts=M(`$ZodNumber`,(e,t)=>{po.init(e,t),es.init(e,t)}),ns=M(`$ZodBoolean`,(e,t)=>{F.init(e,t),e._zod.pattern=ro,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}let i=n.value;return typeof i==`boolean`||n.issues.push({expected:`boolean`,code:`invalid_type`,input:i,inst:e}),n}}),rs=M(`$ZodNull`,(e,t)=>{F.init(e,t),e._zod.pattern=io,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{let r=t.value;return r===null||t.issues.push({expected:`null`,code:`invalid_type`,input:r,inst:e}),t}}),is=M(`$ZodAny`,(e,t)=>{F.init(e,t),e._zod.parse=e=>e}),as=M(`$ZodUnknown`,(e,t)=>{F.init(e,t),e._zod.parse=e=>e}),os=M(`$ZodNever`,(e,t)=>{F.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:`never`,code:`invalid_type`,input:t.value,inst:e}),t)});function ss(e,t,n){e.issues.length&&t.issues.push(...aa(n,e.issues)),t.value[n]=e.value}const cs=M(`$ZodArray`,(e,t)=>{F.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({expected:`array`,code:`invalid_type`,input:i,inst:e}),n;n.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let o=i[e],s=t.element._zod.run({value:o,issues:[]},r);s instanceof Promise?a.push(s.then(t=>ss(t,n,e))):ss(s,n,e)}return a.length?Promise.all(a).then(()=>n):n}});function ls(e,t,n,r){e.issues.length&&t.issues.push(...aa(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function us(e){let t=Object.keys(e.shape);for(let n of t)if(!e.shape?.[n]?._zod?.traits?.has(`$ZodType`))throw Error(`Invalid element at key "${n}": expected a Zod schema`);let n=Yi(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function ds(e,t,n,r,i,a){let o=[],s=i.keySet,c=i.catchall._zod,l=c.def.type;for(let i of Object.keys(t)){if(s.has(i))continue;if(l===`never`){o.push(i);continue}let a=c.run({value:t[i],issues:[]},r);a instanceof Promise?e.push(a.then(e=>ls(e,n,i,t))):ls(a,n,i,t)}return o.length&&n.issues.push({code:`unrecognized_keys`,keys:o,input:t,inst:a}),e.length?Promise.all(e).then(()=>n):n}const fs=M(`$ZodObject`,(e,t)=>{if(F.init(e,t),!Object.getOwnPropertyDescriptor(t,`shape`)?.get){let e=t.shape;Object.defineProperty(t,`shape`,{get:()=>{let n={...e};return Object.defineProperty(t,`shape`,{value:n}),n}})}let n=Ni(()=>us(t));N(e._zod,`propValues`,()=>{let e=t.shape,n={};for(let t in e){let r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(let e of r.values)n[t].add(e)}}return n});let r=Hi,i=t.catchall,a;e._zod.parse=(t,o)=>{a??=n.value;let s=t.value;if(!r(s))return t.issues.push({expected:`object`,code:`invalid_type`,input:s,inst:e}),t;t.value={};let c=[],l=a.shape;for(let e of a.keys){let n=l[e]._zod.run({value:s[e],issues:[]},o);n instanceof Promise?c.push(n.then(n=>ls(n,t,e,s))):ls(n,t,e,s)}return i?ds(c,s,t,o,n.value,e):c.length?Promise.all(c).then(()=>t):t}}),ps=M(`$ZodObjectJIT`,(e,t)=>{fs.init(e,t);let n=e._zod.parse,r=Ni(()=>us(t)),i=e=>{let t=new To([`shape`,`payload`,`ctx`]),n=r.value,i=e=>{let t=Bi(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write(`const input = payload.value;`);let a=Object.create(null),o=0;for(let e of n.keys)a[e]=`key_${o++}`;t.write(`const newResult = {};`);for(let e of n.keys){let n=a[e],r=Bi(e);t.write(`const ${n} = ${i(e)};`),t.write(`
        if (${n}.issues.length) {
          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${r}, ...iss.path] : [${r}]
          })));
        }
        
        
        if (${n}.value === undefined) {
          if (${r} in input) {
            newResult[${r}] = undefined;
          }
        } else {
          newResult[${r}] = ${n}.value;
        }
        
      `)}t.write(`payload.value = newResult;`),t.write(`return payload;`);let s=t.compile();return(t,n)=>s(e,t,n)},a,o=Hi,s=!ki.jitless,c=s&&Ui.value,l=t.catchall,u;e._zod.parse=(d,f)=>{u??=r.value;let p=d.value;return o(p)?s&&c&&f?.async===!1&&f.jitless!==!0?(a||=i(t.shape),d=a(d,f),l?ds([],p,d,f,u,e):d):n(d,f):(d.issues.push({expected:`object`,code:`invalid_type`,input:p,inst:e}),d)}});function ms(e,t,n,r){for(let n of e)if(n.issues.length===0)return t.value=n.value,t;let i=e.filter(e=>!ia(e));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:`invalid_union`,input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>sa(e,r,Ai())))}),t)}const hs=M(`$ZodUnion`,(e,t)=>{F.init(e,t),N(e._zod,`optin`,()=>t.options.some(e=>e._zod.optin===`optional`)?`optional`:void 0),N(e._zod,`optout`,()=>t.options.some(e=>e._zod.optout===`optional`)?`optional`:void 0),N(e._zod,`values`,()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),N(e._zod,`pattern`,()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>Fi(e.source)).join(`|`)})$`)}});let n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(n)return r(i,a);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)s.push(t),o=!0;else{if(t.issues.length===0)return t;s.push(t)}}return o?Promise.all(s).then(t=>ms(t,i,e,a)):ms(s,i,e,a)}}),gs=M(`$ZodDiscriminatedUnion`,(e,t)=>{hs.init(e,t);let n=e._zod.parse;N(e._zod,`propValues`,()=>{let e={};for(let n of t.options){let r=n._zod.propValues;if(!r||Object.keys(r).length===0)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(let r of n)e[t].add(r)}}return e});let r=Ni(()=>{let e=t.options,n=new Map;for(let r of e){let e=r._zod.propValues?.[t.discriminator];if(!e||e.size===0)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let t of e){if(n.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(i,a)=>{let o=i.value;if(!Hi(o))return i.issues.push({code:`invalid_type`,expected:`object`,input:o,inst:e}),i;let s=r.value.get(o?.[t.discriminator]);return s?s._zod.run(i,a):t.unionFallback?n(i,a):(i.issues.push({code:`invalid_union`,errors:[],note:`No matching discriminator`,discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),i)}}),_s=M(`$ZodIntersection`,(e,t)=>{F.init(e,t),e._zod.parse=(e,n)=>{let r=e.value,i=t.left._zod.run({value:r,issues:[]},n),a=t.right._zod.run({value:r,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,n])=>ys(e,t,n)):ys(e,i,a)}});function vs(e,t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Wi(e)&&Wi(t)){let n=Object.keys(t),r=Object.keys(e).filter(e=>n.indexOf(e)!==-1),i={...e,...t};for(let n of r){let r=vs(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};i[n]=r.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t[r],o=vs(i,a);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function ys(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),ia(e))return e;let r=vs(t.value,n.value);if(!r.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const bs=M(`$ZodRecord`,(e,t)=>{F.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Wi(i))return n.issues.push({expected:`record`,code:`invalid_type`,input:i,inst:e}),n;let a=[];if(t.keyType._zod.values){let o=t.keyType._zod.values;n.value={};for(let e of o)if(typeof e==`string`||typeof e==`number`||typeof e==`symbol`){let o=t.valueType._zod.run({value:i[e],issues:[]},r);o instanceof Promise?a.push(o.then(t=>{t.issues.length&&n.issues.push(...aa(e,t.issues)),n.value[e]=t.value})):(o.issues.length&&n.issues.push(...aa(e,o.issues)),n.value[e]=o.value)}let s;for(let e in i)o.has(e)||(s??=[],s.push(e));s&&s.length>0&&n.issues.push({code:`unrecognized_keys`,input:i,inst:e,keys:s})}else{n.value={};for(let o of Reflect.ownKeys(i)){if(o===`__proto__`)continue;let s=t.keyType._zod.run({value:o,issues:[]},r);if(s instanceof Promise)throw Error(`Async schemas not supported in object keys currently`);if(s.issues.length){n.issues.push({code:`invalid_key`,origin:`record`,issues:s.issues.map(e=>sa(e,r,Ai())),input:o,path:[o],inst:e}),n.value[s.value]=s.value;continue}let c=t.valueType._zod.run({value:i[o],issues:[]},r);c instanceof Promise?a.push(c.then(e=>{e.issues.length&&n.issues.push(...aa(o,e.issues)),n.value[s.value]=e.value})):(c.issues.length&&n.issues.push(...aa(o,c.issues)),n.value[s.value]=c.value)}}return a.length?Promise.all(a).then(()=>n):n}}),xs=M(`$ZodEnum`,(e,t)=>{F.init(e,t);let n=ji(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=RegExp(`^(${n.filter(e=>Ki.has(typeof e)).map(e=>typeof e==`string`?qi(e):e.toString()).join(`|`)})$`),e._zod.parse=(t,i)=>{let a=t.value;return r.has(a)||t.issues.push({code:`invalid_value`,values:n,input:a,inst:e}),t}}),Ss=M(`$ZodLiteral`,(e,t)=>{if(F.init(e,t),t.values.length===0)throw Error(`Cannot create literal schema with no valid values`);e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>typeof e==`string`?qi(e):e?qi(e.toString()):String(e)).join(`|`)})$`),e._zod.parse=(n,r)=>{let i=n.value;return e._zod.values.has(i)||n.issues.push({code:`invalid_value`,values:t.values,input:i,inst:e}),n}}),Cs=M(`$ZodTransform`,(e,t)=>{F.init(e,t),e._zod.parse=(n,r)=>{if(r.direction===`backward`)throw new Oi(e.constructor.name);let i=t.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(n.value=e,n));if(i instanceof Promise)throw new Di;return n.value=i,n}});function ws(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Ts=M(`$ZodOptional`,(e,t)=>{F.init(e,t),e._zod.optin=`optional`,e._zod.optout=`optional`,N(e._zod,`values`,()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),N(e._zod,`pattern`,()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${Fi(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if(t.innerType._zod.optin===`optional`){let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>ws(t,e.value)):ws(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,n)}}),Es=M(`$ZodNullable`,(e,t)=>{F.init(e,t),N(e._zod,`optin`,()=>t.innerType._zod.optin),N(e._zod,`optout`,()=>t.innerType._zod.optout),N(e._zod,`pattern`,()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${Fi(e.source)}|null)$`):void 0}),N(e._zod,`values`,()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>e.value===null?e:t.innerType._zod.run(e,n)}),Ds=M(`$ZodDefault`,(e,t)=>{F.init(e,t),e._zod.optin=`optional`,N(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);if(e.value===void 0)return e.value=t.defaultValue,e;let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>Os(e,t)):Os(r,t)}});function Os(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const ks=M(`$ZodPrefault`,(e,t)=>{F.init(e,t),e._zod.optin=`optional`,N(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(n.direction===`backward`||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),As=M(`$ZodNonOptional`,(e,t)=>{F.init(e,t),N(e._zod,`values`,()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>e!==void 0)):void 0}),e._zod.parse=(n,r)=>{let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(t=>js(t,e)):js(i,e)}});function js(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:`invalid_type`,expected:`nonoptional`,input:e.value,inst:t}),e}const Ms=M(`$ZodCatch`,(e,t)=>{F.init(e,t),N(e._zod,`optin`,()=>t.innerType._zod.optin),N(e._zod,`optout`,()=>t.innerType._zod.optout),N(e._zod,`values`,()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>sa(e,n,Ai()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>sa(e,n,Ai()))},input:e.value}),e.issues=[]),e)}}),Ns=M(`$ZodPipe`,(e,t)=>{F.init(e,t),N(e._zod,`values`,()=>t.in._zod.values),N(e._zod,`optin`,()=>t.in._zod.optin),N(e._zod,`optout`,()=>t.out._zod.optout),N(e._zod,`propValues`,()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if(n.direction===`backward`){let r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>Ps(e,t.in,n)):Ps(r,t.in,n)}let r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Ps(e,t.out,n)):Ps(r,t.out,n)}});function Ps(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Fs=M(`$ZodReadonly`,(e,t)=>{F.init(e,t),N(e._zod,`propValues`,()=>t.innerType._zod.propValues),N(e._zod,`values`,()=>t.innerType._zod.values),N(e._zod,`optin`,()=>t.innerType._zod.optin),N(e._zod,`optout`,()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if(n.direction===`backward`)return t.innerType._zod.run(e,n);let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Is):Is(r)}});function Is(e){return e.value=Object.freeze(e.value),e}const Ls=M(`$ZodLazy`,(e,t)=>{F.init(e,t),N(e._zod,`innerType`,()=>t.getter()),N(e._zod,`pattern`,()=>e._zod.innerType._zod.pattern),N(e._zod,`propValues`,()=>e._zod.innerType._zod.propValues),N(e._zod,`optin`,()=>e._zod.innerType._zod.optin??void 0),N(e._zod,`optout`,()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,n)=>e._zod.innerType._zod.run(t,n)}),Rs=M(`$ZodCustom`,(e,t)=>{so.init(e,t),F.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{let r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(t=>zs(t,n,r,e));zs(i,n,r,e)}});function zs(e,t,n,r){if(!e){let e={code:`custom`,input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(la(e))}}var Bs=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let n=t[0];if(this._map.set(e,n),n&&typeof n==`object`&&`id`in n){if(this._idmap.has(n.id))throw Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&typeof t==`object`&&`id`in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let n={...this.get(t)??{}};delete n.id;let r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Vs(){return new Bs}const Hs=Vs();function Us(e,t){return new e({type:`string`,...P(t)})}function Ws(e,t){return new e({type:`string`,format:`email`,check:`string_format`,abort:!1,...P(t)})}function Gs(e,t){return new e({type:`string`,format:`guid`,check:`string_format`,abort:!1,...P(t)})}function Ks(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,...P(t)})}function qs(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v4`,...P(t)})}function Js(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v6`,...P(t)})}function Ys(e,t){return new e({type:`string`,format:`uuid`,check:`string_format`,abort:!1,version:`v7`,...P(t)})}function Xs(e,t){return new e({type:`string`,format:`url`,check:`string_format`,abort:!1,...P(t)})}function Zs(e,t){return new e({type:`string`,format:`emoji`,check:`string_format`,abort:!1,...P(t)})}function Qs(e,t){return new e({type:`string`,format:`nanoid`,check:`string_format`,abort:!1,...P(t)})}function $s(e,t){return new e({type:`string`,format:`cuid`,check:`string_format`,abort:!1,...P(t)})}function ec(e,t){return new e({type:`string`,format:`cuid2`,check:`string_format`,abort:!1,...P(t)})}function tc(e,t){return new e({type:`string`,format:`ulid`,check:`string_format`,abort:!1,...P(t)})}function nc(e,t){return new e({type:`string`,format:`xid`,check:`string_format`,abort:!1,...P(t)})}function rc(e,t){return new e({type:`string`,format:`ksuid`,check:`string_format`,abort:!1,...P(t)})}function ic(e,t){return new e({type:`string`,format:`ipv4`,check:`string_format`,abort:!1,...P(t)})}function ac(e,t){return new e({type:`string`,format:`ipv6`,check:`string_format`,abort:!1,...P(t)})}function oc(e,t){return new e({type:`string`,format:`cidrv4`,check:`string_format`,abort:!1,...P(t)})}function sc(e,t){return new e({type:`string`,format:`cidrv6`,check:`string_format`,abort:!1,...P(t)})}function cc(e,t){return new e({type:`string`,format:`base64`,check:`string_format`,abort:!1,...P(t)})}function lc(e,t){return new e({type:`string`,format:`base64url`,check:`string_format`,abort:!1,...P(t)})}function uc(e,t){return new e({type:`string`,format:`e164`,check:`string_format`,abort:!1,...P(t)})}function dc(e,t){return new e({type:`string`,format:`jwt`,check:`string_format`,abort:!1,...P(t)})}function fc(e,t){return new e({type:`string`,format:`datetime`,check:`string_format`,offset:!1,local:!1,precision:null,...P(t)})}function pc(e,t){return new e({type:`string`,format:`date`,check:`string_format`,...P(t)})}function mc(e,t){return new e({type:`string`,format:`time`,check:`string_format`,precision:null,...P(t)})}function hc(e,t){return new e({type:`string`,format:`duration`,check:`string_format`,...P(t)})}function gc(e,t){return new e({type:`number`,checks:[],...P(t)})}function _c(e,t){return new e({type:`number`,check:`number_format`,abort:!1,format:`safeint`,...P(t)})}function vc(e,t){return new e({type:`boolean`,...P(t)})}function yc(e,t){return new e({type:`null`,...P(t)})}function bc(e){return new e({type:`any`})}function xc(e){return new e({type:`unknown`})}function Sc(e,t){return new e({type:`never`,...P(t)})}function Cc(e,t){return new lo({check:`less_than`,...P(t),value:e,inclusive:!1})}function wc(e,t){return new lo({check:`less_than`,...P(t),value:e,inclusive:!0})}function Tc(e,t){return new uo({check:`greater_than`,...P(t),value:e,inclusive:!1})}function Ec(e,t){return new uo({check:`greater_than`,...P(t),value:e,inclusive:!0})}function Dc(e,t){return new fo({check:`multiple_of`,...P(t),value:e})}function Oc(e,t){return new mo({check:`max_length`,...P(t),maximum:e})}function kc(e,t){return new ho({check:`min_length`,...P(t),minimum:e})}function Ac(e,t){return new go({check:`length_equals`,...P(t),length:e})}function jc(e,t){return new vo({check:`string_format`,format:`regex`,...P(t),pattern:e})}function Mc(e){return new yo({check:`string_format`,format:`lowercase`,...P(e)})}function Nc(e){return new bo({check:`string_format`,format:`uppercase`,...P(e)})}function Pc(e,t){return new xo({check:`string_format`,format:`includes`,...P(t),includes:e})}function Fc(e,t){return new So({check:`string_format`,format:`starts_with`,...P(t),prefix:e})}function Ic(e,t){return new Co({check:`string_format`,format:`ends_with`,...P(t),suffix:e})}function Lc(e){return new wo({check:`overwrite`,tx:e})}function Rc(e){return Lc(t=>t.normalize(e))}function zc(){return Lc(e=>e.trim())}function Bc(){return Lc(e=>e.toLowerCase())}function Vc(){return Lc(e=>e.toUpperCase())}function Hc(e,t,n){return new e({type:`array`,element:t,...P(n)})}function Uc(e,t,n){let r=P(n);return r.abort??=!0,new e({type:`custom`,check:`custom`,fn:t,...r})}function Wc(e,t,n){return new e({type:`custom`,check:`custom`,fn:t,...P(n)})}function Gc(e){let t=Kc(n=>(n.addIssue=e=>{if(typeof e==`string`)n.issues.push(la(e,n.value,t._zod.def));else{let r=e;r.fatal&&(r.continue=!1),r.code??=`custom`,r.input??=n.value,r.inst??=t,r.continue??=!t._zod.def.abort,n.issues.push(la(r))}},e(n.value,n)));return t}function Kc(e,t){let n=new so({check:`custom`,...P(t)});return n._zod.check=e,n}var qc=class{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Hs,this.target=e?.target??`draft-2020-12`,this.unrepresentable=e?.unrepresentable??`throw`,this.override=e?.override??(()=>{}),this.io=e?.io??`output`,this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n;let r=e._zod.def,i={guid:`uuid`,url:`uri`,datetime:`date-time`,json_string:`json-string`,regex:``},a=this.seen.get(e);if(a)return a.count++,t.schemaPath.includes(e)&&(a.cycle=t.path),a.schema;let o={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,o);let s=e._zod.toJSONSchema?.();if(s)o.schema=s;else{let n={...t,schemaPath:[...t.schemaPath,e],path:t.path},a=e._zod.parent;if(a)o.ref=a,this.process(a,n),this.seen.get(a).isParent=!0;else{let t=o.schema;switch(r.type){case`string`:{let n=t;n.type=`string`;let{minimum:r,maximum:a,format:s,patterns:c,contentEncoding:l}=e._zod.bag;if(typeof r==`number`&&(n.minLength=r),typeof a==`number`&&(n.maxLength=a),s&&(n.format=i[s]??s,n.format===``&&delete n.format),l&&(n.contentEncoding=l),c&&c.size>0){let e=[...c];e.length===1?n.pattern=e[0].source:e.length>1&&(o.schema.allOf=[...e.map(e=>({...this.target===`draft-7`||this.target===`draft-4`||this.target===`openapi-3.0`?{type:`string`}:{},pattern:e.source}))])}break}case`number`:{let n=t,{minimum:r,maximum:i,format:a,multipleOf:o,exclusiveMaximum:s,exclusiveMinimum:c}=e._zod.bag;typeof a==`string`&&a.includes(`int`)?n.type=`integer`:n.type=`number`,typeof c==`number`&&(this.target===`draft-4`||this.target===`openapi-3.0`?(n.minimum=c,n.exclusiveMinimum=!0):n.exclusiveMinimum=c),typeof r==`number`&&(n.minimum=r,typeof c==`number`&&this.target!==`draft-4`&&(c>=r?delete n.minimum:delete n.exclusiveMinimum)),typeof s==`number`&&(this.target===`draft-4`||this.target===`openapi-3.0`?(n.maximum=s,n.exclusiveMaximum=!0):n.exclusiveMaximum=s),typeof i==`number`&&(n.maximum=i,typeof s==`number`&&this.target!==`draft-4`&&(s<=i?delete n.maximum:delete n.exclusiveMaximum)),typeof o==`number`&&(n.multipleOf=o);break}case`boolean`:{let e=t;e.type=`boolean`;break}case`bigint`:if(this.unrepresentable===`throw`)throw Error(`BigInt cannot be represented in JSON Schema`);break;case`symbol`:if(this.unrepresentable===`throw`)throw Error(`Symbols cannot be represented in JSON Schema`);break;case`null`:this.target===`openapi-3.0`?(t.type=`string`,t.nullable=!0,t.enum=[null]):t.type=`null`;break;case`any`:break;case`unknown`:break;case`undefined`:if(this.unrepresentable===`throw`)throw Error(`Undefined cannot be represented in JSON Schema`);break;case`void`:if(this.unrepresentable===`throw`)throw Error(`Void cannot be represented in JSON Schema`);break;case`never`:t.not={};break;case`date`:if(this.unrepresentable===`throw`)throw Error(`Date cannot be represented in JSON Schema`);break;case`array`:{let i=t,{minimum:a,maximum:o}=e._zod.bag;typeof a==`number`&&(i.minItems=a),typeof o==`number`&&(i.maxItems=o),i.type=`array`,i.items=this.process(r.element,{...n,path:[...n.path,`items`]});break}case`object`:{let e=t;e.type=`object`,e.properties={};let i=r.shape;for(let t in i)e.properties[t]=this.process(i[t],{...n,path:[...n.path,`properties`,t]});let a=new Set(Object.keys(i)),o=new Set([...a].filter(e=>{let t=r.shape[e]._zod;return this.io===`input`?t.optin===void 0:t.optout===void 0}));o.size>0&&(e.required=Array.from(o)),r.catchall?._zod.def.type===`never`?e.additionalProperties=!1:r.catchall?r.catchall&&(e.additionalProperties=this.process(r.catchall,{...n,path:[...n.path,`additionalProperties`]})):this.io===`output`&&(e.additionalProperties=!1);break}case`union`:{let e=t;e.anyOf=r.options.map((e,t)=>this.process(e,{...n,path:[...n.path,`anyOf`,t]}));break}case`intersection`:{let e=t,i=this.process(r.left,{...n,path:[...n.path,`allOf`,0]}),a=this.process(r.right,{...n,path:[...n.path,`allOf`,1]}),o=e=>`allOf`in e&&Object.keys(e).length===1;e.allOf=[...o(i)?i.allOf:[i],...o(a)?a.allOf:[a]];break}case`tuple`:{let i=t;i.type=`array`;let a=this.target===`draft-2020-12`?`prefixItems`:`items`,o=this.target===`draft-2020-12`||this.target===`openapi-3.0`?`items`:`additionalItems`,s=r.items.map((e,t)=>this.process(e,{...n,path:[...n.path,a,t]})),c=r.rest?this.process(r.rest,{...n,path:[...n.path,o,...this.target===`openapi-3.0`?[r.items.length]:[]]}):null;this.target===`draft-2020-12`?(i.prefixItems=s,c&&(i.items=c)):this.target===`openapi-3.0`?(i.items={anyOf:s},c&&i.items.anyOf.push(c),i.minItems=s.length,c||(i.maxItems=s.length)):(i.items=s,c&&(i.additionalItems=c));let{minimum:l,maximum:u}=e._zod.bag;typeof l==`number`&&(i.minItems=l),typeof u==`number`&&(i.maxItems=u);break}case`record`:{let e=t;e.type=`object`,(this.target===`draft-7`||this.target===`draft-2020-12`)&&(e.propertyNames=this.process(r.keyType,{...n,path:[...n.path,`propertyNames`]})),e.additionalProperties=this.process(r.valueType,{...n,path:[...n.path,`additionalProperties`]});break}case`map`:if(this.unrepresentable===`throw`)throw Error(`Map cannot be represented in JSON Schema`);break;case`set`:if(this.unrepresentable===`throw`)throw Error(`Set cannot be represented in JSON Schema`);break;case`enum`:{let e=t,n=ji(r.entries);n.every(e=>typeof e==`number`)&&(e.type=`number`),n.every(e=>typeof e==`string`)&&(e.type=`string`),e.enum=n;break}case`literal`:{let e=t,n=[];for(let e of r.values)if(e===void 0){if(this.unrepresentable===`throw`)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof e==`bigint`){if(this.unrepresentable===`throw`)throw Error(`BigInt literals cannot be represented in JSON Schema`);n.push(Number(e))}else n.push(e);if(n.length!==0)if(n.length===1){let t=n[0];e.type=t===null?`null`:typeof t,this.target===`draft-4`||this.target===`openapi-3.0`?e.enum=[t]:e.const=t}else n.every(e=>typeof e==`number`)&&(e.type=`number`),n.every(e=>typeof e==`string`)&&(e.type=`string`),n.every(e=>typeof e==`boolean`)&&(e.type=`string`),n.every(e=>e===null)&&(e.type=`null`),e.enum=n;break}case`file`:{let n=t,r={type:`string`,format:`binary`,contentEncoding:`binary`},{minimum:i,maximum:a,mime:o}=e._zod.bag;i!==void 0&&(r.minLength=i),a!==void 0&&(r.maxLength=a),o?o.length===1?(r.contentMediaType=o[0],Object.assign(n,r)):n.anyOf=o.map(e=>({...r,contentMediaType:e})):Object.assign(n,r);break}case`transform`:if(this.unrepresentable===`throw`)throw Error(`Transforms cannot be represented in JSON Schema`);break;case`nullable`:{let e=this.process(r.innerType,n);this.target===`openapi-3.0`?(o.ref=r.innerType,t.nullable=!0):t.anyOf=[e,{type:`null`}];break}case`nonoptional`:this.process(r.innerType,n),o.ref=r.innerType;break;case`success`:{let e=t;e.type=`boolean`;break}case`default`:this.process(r.innerType,n),o.ref=r.innerType,t.default=JSON.parse(JSON.stringify(r.defaultValue));break;case`prefault`:this.process(r.innerType,n),o.ref=r.innerType,this.io===`input`&&(t._prefault=JSON.parse(JSON.stringify(r.defaultValue)));break;case`catch`:{this.process(r.innerType,n),o.ref=r.innerType;let e;try{e=r.catchValue(void 0)}catch{throw Error(`Dynamic catch values are not supported in JSON Schema`)}t.default=e;break}case`nan`:if(this.unrepresentable===`throw`)throw Error(`NaN cannot be represented in JSON Schema`);break;case`template_literal`:{let n=t,r=e._zod.pattern;if(!r)throw Error(`Pattern not found in template literal`);n.type=`string`,n.pattern=r.source;break}case`pipe`:{let e=this.io===`input`?r.in._zod.def.type===`transform`?r.out:r.in:r.out;this.process(e,n),o.ref=e;break}case`readonly`:this.process(r.innerType,n),o.ref=r.innerType,t.readOnly=!0;break;case`promise`:this.process(r.innerType,n),o.ref=r.innerType;break;case`optional`:this.process(r.innerType,n),o.ref=r.innerType;break;case`lazy`:{let t=e._zod.innerType;this.process(t,n),o.ref=t;break}case`custom`:if(this.unrepresentable===`throw`)throw Error(`Custom types cannot be represented in JSON Schema`);break;case`function`:if(this.unrepresentable===`throw`)throw Error(`Function types cannot be represented in JSON Schema`);break;default:}}}let c=this.metadataRegistry.get(e);return c&&Object.assign(o.schema,c),this.io===`input`&&Yc(e)&&(delete o.schema.examples,delete o.schema.default),this.io===`input`&&o.schema._prefault&&((n=o.schema).default??(n.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(e).schema}emit(e,t){let n={cycles:t?.cycles??`ref`,reused:t?.reused??`inline`,external:t?.external??void 0},r=this.seen.get(e);if(!r)throw Error(`Unprocessed schema. This is a bug in Zod.`);let i=e=>{let t=this.target===`draft-2020-12`?`$defs`:`definitions`;if(n.external){let r=n.external.registry.get(e[0])?.id,i=n.external.uri??(e=>e);if(r)return{ref:i(r)};let a=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=a,{defId:a,ref:`${i(`__shared`)}#/${t}/${a}`}}if(e[1]===r)return{ref:`#`};let i=`#/${t}/`,a=e[1].schema.id??`__schema${this.counter++}`;return{defId:a,ref:i+a}},a=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:n,defId:r}=i(e);t.def={...t.schema},r&&(t.defId=r);let a=t.schema;for(let e in a)delete a[e];a.$ref=n};if(n.cycles===`throw`)for(let e of this.seen.entries()){let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${t.cycle?.join(`/`)}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){let r=t[1];if(e===t[0]){a(t);continue}if(n.external){let r=n.external.registry.get(t[0])?.id;if(e!==t[0]&&r){a(t);continue}}if(this.metadataRegistry.get(t[0])?.id){a(t);continue}if(r.cycle){a(t);continue}if(r.count>1&&n.reused===`ref`){a(t);continue}}let o=(e,t)=>{let n=this.seen.get(e),r=n.def??n.schema,i={...r};if(n.ref===null)return;let a=n.ref;if(n.ref=null,a){o(a,t);let e=this.seen.get(a).schema;e.$ref&&(t.target===`draft-7`||t.target===`draft-4`||t.target===`openapi-3.0`)?(r.allOf=r.allOf??[],r.allOf.push(e)):(Object.assign(r,e),Object.assign(r,i))}n.isParent||this.override({zodSchema:e,jsonSchema:r,path:n.path??[]})};for(let e of[...this.seen.entries()].reverse())o(e[0],{target:this.target});let s={};if(this.target===`draft-2020-12`?s.$schema=`https://json-schema.org/draft/2020-12/schema`:this.target===`draft-7`?s.$schema=`http://json-schema.org/draft-07/schema#`:this.target===`draft-4`?s.$schema=`http://json-schema.org/draft-04/schema#`:this.target===`openapi-3.0`||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let t=n.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");s.$id=n.external.uri(t)}Object.assign(s,r.def);let c=n.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(c[t.defId]=t.def)}n.external||Object.keys(c).length>0&&(this.target===`draft-2020-12`?s.$defs=c:s.definitions=c);try{return JSON.parse(JSON.stringify(s))}catch{throw Error(`Error converting schema to JSON.`)}}};function Jc(e,t){if(e instanceof Bs){let n=new qc(t),r={};for(let t of e._idmap.entries()){let[e,r]=t;n.process(r)}let i={},a={registry:e,uri:t?.uri,defs:r};for(let r of e._idmap.entries()){let[e,o]=r;i[e]=n.emit(o,{...t,external:a})}return Object.keys(r).length>0&&(i.__shared={[n.target===`draft-2020-12`?`$defs`:`definitions`]:r}),{schemas:i}}let n=new qc(t);return n.process(e),n.emit(e,t)}function Yc(e,t){let n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);let r=e._zod.def;switch(r.type){case`string`:case`number`:case`bigint`:case`boolean`:case`date`:case`symbol`:case`undefined`:case`null`:case`any`:case`unknown`:case`never`:case`void`:case`literal`:case`enum`:case`nan`:case`file`:case`template_literal`:return!1;case`array`:return Yc(r.element,n);case`object`:for(let e in r.shape)if(Yc(r.shape[e],n))return!0;return!1;case`union`:for(let e of r.options)if(Yc(e,n))return!0;return!1;case`intersection`:return Yc(r.left,n)||Yc(r.right,n);case`tuple`:for(let e of r.items)if(Yc(e,n))return!0;return!!(r.rest&&Yc(r.rest,n));case`record`:return Yc(r.keyType,n)||Yc(r.valueType,n);case`map`:return Yc(r.keyType,n)||Yc(r.valueType,n);case`set`:return Yc(r.valueType,n);case`promise`:case`optional`:case`nonoptional`:case`nullable`:case`readonly`:return Yc(r.innerType,n);case`lazy`:return Yc(r.getter(),n);case`default`:return Yc(r.innerType,n);case`prefault`:return Yc(r.innerType,n);case`custom`:return!1;case`transform`:return!0;case`pipe`:return Yc(r.in,n)||Yc(r.out,n);case`success`:return!1;case`catch`:return!1;case`function`:return!1;default:}throw Error(`Unknown schema type: ${r.type}`)}const Xc=M(`ZodISODateTime`,(e,t)=>{zo.init(e,t),z.init(e,t)});function Zc(e){return fc(Xc,e)}const Qc=M(`ZodISODate`,(e,t)=>{Bo.init(e,t),z.init(e,t)});function $c(e){return pc(Qc,e)}const el=M(`ZodISOTime`,(e,t)=>{Vo.init(e,t),z.init(e,t)});function tl(e){return mc(el,e)}const nl=M(`ZodISODuration`,(e,t)=>{Ho.init(e,t),z.init(e,t)});function rl(e){return hc(nl,e)}var il=(e,t)=>{da.init(e,t),e.name=`ZodError`,Object.defineProperties(e,{format:{value:t=>ma(e,t)},flatten:{value:t=>pa(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,Mi,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,Mi,2)}},isEmpty:{get(){return e.issues.length===0}}})};M(`ZodError`,il);const al=M(`ZodError`,il,{Parent:Error}),ol=ha(al),sl=ga(al),cl=_a(al),ll=ya(al),ul=xa(al),dl=Sa(al),fl=Ca(al),pl=wa(al),ml=Ta(al),hl=Ea(al),gl=Da(al),_l=Oa(al),L=M(`ZodType`,(e,t)=>(F.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,`_def`,{value:t}),e.check=(...n)=>e.clone(zi(t,{checks:[...t.checks??[],...n.map(e=>typeof e==`function`?{_zod:{check:e,def:{check:`custom`},onattach:[]}}:e)]})),e.clone=(t,n)=>Ji(e,t,n),e.brand=()=>e,e.register=((t,n)=>(t.add(e,n),e)),e.parse=(t,n)=>ol(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>cl(e,t,n),e.parseAsync=async(t,n)=>sl(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>ll(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>ul(e,t,n),e.decode=(t,n)=>dl(e,t,n),e.encodeAsync=async(t,n)=>fl(e,t,n),e.decodeAsync=async(t,n)=>pl(e,t,n),e.safeEncode=(t,n)=>ml(e,t,n),e.safeDecode=(t,n)=>hl(e,t,n),e.safeEncodeAsync=async(t,n)=>gl(e,t,n),e.safeDecodeAsync=async(t,n)=>_l(e,t,n),e.refine=(t,n)=>e.check(Nu(t,n)),e.superRefine=t=>e.check(Pu(t)),e.overwrite=t=>e.check(Lc(t)),e.optional=()=>mu(e),e.nullable=()=>gu(e),e.nullish=()=>mu(gu(e)),e.nonoptional=t=>Su(e,t),e.array=()=>V(e),e.or=t=>tu([e,t]),e.and=t=>au(e,t),e.transform=t=>Eu(e,fu(t)),e.default=t=>vu(e,t),e.prefault=t=>bu(e,t),e.catch=t=>wu(e,t),e.pipe=t=>Eu(e,t),e.readonly=()=>Ou(e),e.describe=t=>{let n=e.clone();return Hs.add(n,{description:t}),n},Object.defineProperty(e,`description`,{get(){return Hs.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return Hs.get(e);let n=e.clone();return Hs.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),vl=M(`_ZodString`,(e,t)=>{Do.init(e,t),L.init(e,t);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(jc(...t)),e.includes=(...t)=>e.check(Pc(...t)),e.startsWith=(...t)=>e.check(Fc(...t)),e.endsWith=(...t)=>e.check(Ic(...t)),e.min=(...t)=>e.check(kc(...t)),e.max=(...t)=>e.check(Oc(...t)),e.length=(...t)=>e.check(Ac(...t)),e.nonempty=(...t)=>e.check(kc(1,...t)),e.lowercase=t=>e.check(Mc(t)),e.uppercase=t=>e.check(Nc(t)),e.trim=()=>e.check(zc()),e.normalize=(...t)=>e.check(Rc(...t)),e.toLowerCase=()=>e.check(Bc()),e.toUpperCase=()=>e.check(Vc())}),yl=M(`ZodString`,(e,t)=>{Do.init(e,t),vl.init(e,t),e.email=t=>e.check(Ws(bl,t)),e.url=t=>e.check(Xs(Cl,t)),e.jwt=t=>e.check(dc(Rl,t)),e.emoji=t=>e.check(Zs(wl,t)),e.guid=t=>e.check(Gs(xl,t)),e.uuid=t=>e.check(Ks(Sl,t)),e.uuidv4=t=>e.check(qs(Sl,t)),e.uuidv6=t=>e.check(Js(Sl,t)),e.uuidv7=t=>e.check(Ys(Sl,t)),e.nanoid=t=>e.check(Qs(Tl,t)),e.guid=t=>e.check(Gs(xl,t)),e.cuid=t=>e.check($s(El,t)),e.cuid2=t=>e.check(ec(Dl,t)),e.ulid=t=>e.check(tc(Ol,t)),e.base64=t=>e.check(cc(Fl,t)),e.base64url=t=>e.check(lc(Il,t)),e.xid=t=>e.check(nc(kl,t)),e.ksuid=t=>e.check(rc(Al,t)),e.ipv4=t=>e.check(ic(jl,t)),e.ipv6=t=>e.check(ac(Ml,t)),e.cidrv4=t=>e.check(oc(Nl,t)),e.cidrv6=t=>e.check(sc(Pl,t)),e.e164=t=>e.check(uc(Ll,t)),e.datetime=t=>e.check(Zc(t)),e.date=t=>e.check($c(t)),e.time=t=>e.check(tl(t)),e.duration=t=>e.check(rl(t))});function R(e){return Us(yl,e)}const z=M(`ZodStringFormat`,(e,t)=>{I.init(e,t),vl.init(e,t)}),bl=M(`ZodEmail`,(e,t)=>{Ao.init(e,t),z.init(e,t)}),xl=M(`ZodGUID`,(e,t)=>{Oo.init(e,t),z.init(e,t)}),Sl=M(`ZodUUID`,(e,t)=>{ko.init(e,t),z.init(e,t)}),Cl=M(`ZodURL`,(e,t)=>{jo.init(e,t),z.init(e,t)}),wl=M(`ZodEmoji`,(e,t)=>{Mo.init(e,t),z.init(e,t)}),Tl=M(`ZodNanoID`,(e,t)=>{No.init(e,t),z.init(e,t)}),El=M(`ZodCUID`,(e,t)=>{Po.init(e,t),z.init(e,t)}),Dl=M(`ZodCUID2`,(e,t)=>{Fo.init(e,t),z.init(e,t)}),Ol=M(`ZodULID`,(e,t)=>{Io.init(e,t),z.init(e,t)}),kl=M(`ZodXID`,(e,t)=>{Lo.init(e,t),z.init(e,t)}),Al=M(`ZodKSUID`,(e,t)=>{Ro.init(e,t),z.init(e,t)}),jl=M(`ZodIPv4`,(e,t)=>{Uo.init(e,t),z.init(e,t)}),Ml=M(`ZodIPv6`,(e,t)=>{Wo.init(e,t),z.init(e,t)}),Nl=M(`ZodCIDRv4`,(e,t)=>{Go.init(e,t),z.init(e,t)}),Pl=M(`ZodCIDRv6`,(e,t)=>{Ko.init(e,t),z.init(e,t)}),Fl=M(`ZodBase64`,(e,t)=>{Jo.init(e,t),z.init(e,t)}),Il=M(`ZodBase64URL`,(e,t)=>{Xo.init(e,t),z.init(e,t)}),Ll=M(`ZodE164`,(e,t)=>{Zo.init(e,t),z.init(e,t)}),Rl=M(`ZodJWT`,(e,t)=>{$o.init(e,t),z.init(e,t)}),zl=M(`ZodNumber`,(e,t)=>{es.init(e,t),L.init(e,t),e.gt=(t,n)=>e.check(Tc(t,n)),e.gte=(t,n)=>e.check(Ec(t,n)),e.min=(t,n)=>e.check(Ec(t,n)),e.lt=(t,n)=>e.check(Cc(t,n)),e.lte=(t,n)=>e.check(wc(t,n)),e.max=(t,n)=>e.check(wc(t,n)),e.int=t=>e.check(Vl(t)),e.safe=t=>e.check(Vl(t)),e.positive=t=>e.check(Tc(0,t)),e.nonnegative=t=>e.check(Ec(0,t)),e.negative=t=>e.check(Cc(0,t)),e.nonpositive=t=>e.check(wc(0,t)),e.multipleOf=(t,n)=>e.check(Dc(t,n)),e.step=(t,n)=>e.check(Dc(t,n)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??-1/0,n.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(n.maximum??1/0,n.exclusiveMaximum??1/0)??null,e.isInt=(n.format??``).includes(`int`)||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function B(e){return gc(zl,e)}const Bl=M(`ZodNumberFormat`,(e,t)=>{ts.init(e,t),zl.init(e,t)});function Vl(e){return _c(Bl,e)}const Hl=M(`ZodBoolean`,(e,t)=>{ns.init(e,t),L.init(e,t)});function Ul(e){return vc(Hl,e)}const Wl=M(`ZodNull`,(e,t)=>{rs.init(e,t),L.init(e,t)});function Gl(e){return yc(Wl,e)}const Kl=M(`ZodAny`,(e,t)=>{is.init(e,t),L.init(e,t)});function ql(){return bc(Kl)}const Jl=M(`ZodUnknown`,(e,t)=>{as.init(e,t),L.init(e,t)});function Yl(){return xc(Jl)}const Xl=M(`ZodNever`,(e,t)=>{os.init(e,t),L.init(e,t)});function Zl(e){return Sc(Xl,e)}const Ql=M(`ZodArray`,(e,t)=>{cs.init(e,t),L.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(kc(t,n)),e.nonempty=t=>e.check(kc(1,t)),e.max=(t,n)=>e.check(Oc(t,n)),e.length=(t,n)=>e.check(Ac(t,n)),e.unwrap=()=>e.element});function V(e,t){return Hc(Ql,e,t)}const $l=M(`ZodObject`,(e,t)=>{ps.init(e,t),L.init(e,t),N(e,`shape`,()=>t.shape),e.keyof=()=>lu(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Yl()}),e.loose=()=>e.clone({...e._zod.def,catchall:Yl()}),e.strict=()=>e.clone({...e._zod.def,catchall:Zl()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>$i(e,t),e.safeExtend=t=>ea(e,t),e.merge=t=>ta(e,t),e.pick=t=>Zi(e,t),e.omit=t=>Qi(e,t),e.partial=(...t)=>na(pu,e,t[0]),e.required=(...t)=>ra(xu,e,t[0])});function H(e,t){return new $l({type:`object`,shape:e??{},...P(t)})}const eu=M(`ZodUnion`,(e,t)=>{hs.init(e,t),L.init(e,t),e.options=t.options});function tu(e,t){return new eu({type:`union`,options:e,...P(t)})}const nu=M(`ZodDiscriminatedUnion`,(e,t)=>{eu.init(e,t),gs.init(e,t)});function ru(e,t,n){return new nu({type:`union`,options:t,discriminator:e,...P(n)})}const iu=M(`ZodIntersection`,(e,t)=>{_s.init(e,t),L.init(e,t)});function au(e,t){return new iu({type:`intersection`,left:e,right:t})}const ou=M(`ZodRecord`,(e,t)=>{bs.init(e,t),L.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function su(e,t,n){return new ou({type:`record`,keyType:e,valueType:t,...P(n)})}const cu=M(`ZodEnum`,(e,t)=>{xs.init(e,t),L.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{let i={};for(let r of e)if(n.has(r))i[r]=t.entries[r];else throw Error(`Key ${r} not found in enum`);return new cu({...t,checks:[],...P(r),entries:i})},e.exclude=(e,r)=>{let i={...t.entries};for(let t of e)if(n.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new cu({...t,checks:[],...P(r),entries:i})}});function lu(e,t){return new cu({type:`enum`,entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...P(t)})}const uu=M(`ZodLiteral`,(e,t)=>{Ss.init(e,t),L.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,`value`,{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function U(e,t){return new uu({type:`literal`,values:Array.isArray(e)?e:[e],...P(t)})}const du=M(`ZodTransform`,(e,t)=>{Cs.init(e,t),L.init(e,t),e._zod.parse=(n,r)=>{if(r.direction===`backward`)throw new Oi(e.constructor.name);n.addIssue=r=>{if(typeof r==`string`)n.issues.push(la(r,n.value,t));else{let t=r;t.fatal&&(t.continue=!1),t.code??=`custom`,t.input??=n.value,t.inst??=e,n.issues.push(la(t))}};let i=t.transform(n.value,n);return i instanceof Promise?i.then(e=>(n.value=e,n)):(n.value=i,n)}});function fu(e){return new du({type:`transform`,transform:e})}const pu=M(`ZodOptional`,(e,t)=>{Ts.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function mu(e){return new pu({type:`optional`,innerType:e})}const hu=M(`ZodNullable`,(e,t)=>{Es.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gu(e){return new hu({type:`nullable`,innerType:e})}const _u=M(`ZodDefault`,(e,t)=>{Ds.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function vu(e,t){return new _u({type:`default`,innerType:e,get defaultValue(){return typeof t==`function`?t():Gi(t)}})}const yu=M(`ZodPrefault`,(e,t)=>{ks.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function bu(e,t){return new yu({type:`prefault`,innerType:e,get defaultValue(){return typeof t==`function`?t():Gi(t)}})}const xu=M(`ZodNonOptional`,(e,t)=>{As.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Su(e,t){return new xu({type:`nonoptional`,innerType:e,...P(t)})}const Cu=M(`ZodCatch`,(e,t)=>{Ms.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function wu(e,t){return new Cu({type:`catch`,innerType:e,catchValue:typeof t==`function`?t:()=>t})}const Tu=M(`ZodPipe`,(e,t)=>{Ns.init(e,t),L.init(e,t),e.in=t.in,e.out=t.out});function Eu(e,t){return new Tu({type:`pipe`,in:e,out:t})}const Du=M(`ZodReadonly`,(e,t)=>{Fs.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ou(e){return new Du({type:`readonly`,innerType:e})}const ku=M(`ZodLazy`,(e,t)=>{Ls.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Au(e){return new ku({type:`lazy`,getter:e})}const ju=M(`ZodCustom`,(e,t)=>{Rs.init(e,t),L.init(e,t)});function Mu(e,t){return Uc(ju,e??(()=>!0),t)}function Nu(e,t={}){return Wc(ju,e,t)}function Pu(e){return Gc(e)}function Fu(e,t={error:`Input not instance of ${e.name}`}){let n=new ju({type:`custom`,check:`custom`,fn:t=>t instanceof e,abort:!0,...P(t)});return n._zod.bag.Class=e,n}var W;(function(e){e.assertEqual=e=>{};function t(e){}e.assertIs=t;function n(e){throw Error()}e.assertNever=n,e.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},e.getValidEnumValues=t=>{let n=e.objectKeys(t).filter(e=>typeof t[t[e]]!=`number`),r={};for(let e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys=typeof Object.keys==`function`?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(let n of e)if(t(n))return n},e.isInteger=typeof Number.isInteger==`function`?e=>Number.isInteger(e):e=>typeof e==`number`&&Number.isFinite(e)&&Math.floor(e)===e;function r(e,t=` | `){return e.map(e=>typeof e==`string`?`'${e}'`:e).join(t)}e.joinValues=r,e.jsonStringifyReplacer=(e,t)=>typeof t==`bigint`?t.toString():t})(W||={});var Iu;(function(e){e.mergeShapes=(e,t)=>({...e,...t})})(Iu||={});const G=W.arrayToEnum([`string`,`nan`,`number`,`integer`,`float`,`boolean`,`date`,`bigint`,`symbol`,`function`,`undefined`,`null`,`array`,`object`,`unknown`,`promise`,`void`,`never`,`map`,`set`]),Lu=e=>{switch(typeof e){case`undefined`:return G.undefined;case`string`:return G.string;case`number`:return Number.isNaN(e)?G.nan:G.number;case`boolean`:return G.boolean;case`function`:return G.function;case`bigint`:return G.bigint;case`symbol`:return G.symbol;case`object`:return Array.isArray(e)?G.array:e===null?G.null:e.then&&typeof e.then==`function`&&e.catch&&typeof e.catch==`function`?G.promise:typeof Map<`u`&&e instanceof Map?G.map:typeof Set<`u`&&e instanceof Set?G.set:typeof Date<`u`&&e instanceof Date?G.date:G.object;default:return G.unknown}},K=W.arrayToEnum([`invalid_type`,`invalid_literal`,`custom`,`invalid_union`,`invalid_union_discriminator`,`invalid_enum_value`,`unrecognized_keys`,`invalid_arguments`,`invalid_return_type`,`invalid_date`,`invalid_string`,`too_small`,`too_big`,`invalid_intersection_types`,`not_multiple_of`,`not_finite`]);var Ru=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name=`ZodError`,this.issues=e}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let i of e.issues)if(i.code===`invalid_union`)i.unionErrors.map(r);else if(i.code===`invalid_return_type`)r(i.returnTypeError);else if(i.code===`invalid_arguments`)r(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){let n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(t){if(!(t instanceof e))throw Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,W.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=e=>e.message){let t=Object.create(null),n=[];for(let r of this.issues)if(r.path.length>0){let n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};Ru.create=e=>new Ru(e);var zu=(e,t)=>{let n;switch(e.code){case K.invalid_type:n=e.received===G.undefined?`Required`:`Expected ${e.expected}, received ${e.received}`;break;case K.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,W.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:n=`Unrecognized key(s) in object: ${W.joinValues(e.keys,`, `)}`;break;case K.invalid_union:n=`Invalid input`;break;case K.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${W.joinValues(e.options)}`;break;case K.invalid_enum_value:n=`Invalid enum value. Expected ${W.joinValues(e.options)}, received '${e.received}'`;break;case K.invalid_arguments:n=`Invalid function arguments`;break;case K.invalid_return_type:n=`Invalid function return type`;break;case K.invalid_date:n=`Invalid date`;break;case K.invalid_string:typeof e.validation==`object`?`includes`in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position==`number`&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):`startsWith`in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:`endsWith`in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:W.assertNever(e.validation):n=e.validation===`regex`?`Invalid`:`Invalid ${e.validation}`;break;case K.too_small:n=e.type===`array`?`Array must contain ${e.exact?`exactly`:e.inclusive?`at least`:`more than`} ${e.minimum} element(s)`:e.type===`string`?`String must contain ${e.exact?`exactly`:e.inclusive?`at least`:`over`} ${e.minimum} character(s)`:e.type===`number`||e.type===`bigint`?`Number must be ${e.exact?`exactly equal to `:e.inclusive?`greater than or equal to `:`greater than `}${e.minimum}`:e.type===`date`?`Date must be ${e.exact?`exactly equal to `:e.inclusive?`greater than or equal to `:`greater than `}${new Date(Number(e.minimum))}`:`Invalid input`;break;case K.too_big:n=e.type===`array`?`Array must contain ${e.exact?`exactly`:e.inclusive?`at most`:`less than`} ${e.maximum} element(s)`:e.type===`string`?`String must contain ${e.exact?`exactly`:e.inclusive?`at most`:`under`} ${e.maximum} character(s)`:e.type===`number`?`Number must be ${e.exact?`exactly`:e.inclusive?`less than or equal to`:`less than`} ${e.maximum}`:e.type===`bigint`?`BigInt must be ${e.exact?`exactly`:e.inclusive?`less than or equal to`:`less than`} ${e.maximum}`:e.type===`date`?`Date must be ${e.exact?`exactly`:e.inclusive?`smaller than or equal to`:`smaller than`} ${new Date(Number(e.maximum))}`:`Invalid input`;break;case K.custom:n=`Invalid input`;break;case K.invalid_intersection_types:n=`Intersection results could not be merged`;break;case K.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case K.not_finite:n=`Number must be finite`;break;default:n=t.defaultError,W.assertNever(e)}return{message:n}},Bu=zu;function Vu(){return Bu}const Hu=e=>{let{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let s=``,c=r.filter(e=>!!e).slice().reverse();for(let e of c)s=e(o,{data:t,defaultError:s}).message;return{...i,path:a,message:s}};function q(e,t){let n=Vu(),r=Hu({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zu?void 0:zu].filter(e=>!!e)});e.common.issues.push(r)}var Uu=class e{constructor(){this.value=`valid`}dirty(){this.value===`valid`&&(this.value=`dirty`)}abort(){this.value!==`aborted`&&(this.value=`aborted`)}static mergeArray(e,t){let n=[];for(let r of t){if(r.status===`aborted`)return J;r.status===`dirty`&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(t,n){let r=[];for(let e of n){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return e.mergeObjectSync(t,r)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:i}=r;if(t.status===`aborted`||i.status===`aborted`)return J;t.status===`dirty`&&e.dirty(),i.status===`dirty`&&e.dirty(),t.value!==`__proto__`&&(i.value!==void 0||r.alwaysSet)&&(n[t.value]=i.value)}return{status:e.value,value:n}}};const J=Object.freeze({status:`aborted`}),Wu=e=>({status:`dirty`,value:e}),Gu=e=>({status:`valid`,value:e}),Ku=e=>e.status===`aborted`,qu=e=>e.status===`dirty`,Ju=e=>e.status===`valid`,Yu=e=>typeof Promise<`u`&&e instanceof Promise;var Y;(function(e){e.errToObj=e=>typeof e==`string`?{message:e}:e||{},e.toString=e=>typeof e==`string`?e:e?.message})(Y||={});var Xu=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Zu=(e,t)=>{if(Ju(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error(`Validation failed but no issues detected.`);return{success:!1,get error(){return this._error||=new Ru(e.common.issues),this._error}}};function X(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:a}=e;return t.code===`invalid_enum_value`?{message:a??i.defaultError}:i.data===void 0?{message:a??r??i.defaultError}:t.code===`invalid_type`?{message:a??n??i.defaultError}:{message:i.defaultError}},description:i}}var Z=class{get description(){return this._def.description}_getType(e){return Lu(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Lu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Uu,ctx:{common:e.parent.common,data:e.data,parsedType:Lu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(Yu(t))throw Error(`Synchronous parse encountered promise.`);return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){let n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lu(e)};return Zu(n,this._parseSync({data:e,path:n.path,parent:n}))}"~validate"(e){let t={common:{issues:[],async:!!this[`~standard`].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lu(e)};if(!this[`~standard`].async)try{let n=this._parseSync({data:e,path:[],parent:t});return Ju(n)?{value:n.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes(`encountered`)&&(this[`~standard`].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>Ju(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lu(e)},r=this._parse({data:e,path:n.path,parent:n});return Zu(n,await(Yu(r)?r:Promise.resolve(r)))}refine(e,t){let n=e=>typeof t==`string`||t===void 0?{message:t}:typeof t==`function`?t(e):t;return this._refinement((t,r)=>{let i=e(t),a=()=>r.addIssue({code:K.custom,...n(t)});return typeof Promise<`u`&&i instanceof Promise?i.then(e=>e?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t==`function`?t(n,r):t),!1))}_refinement(e){return new ef({schema:this,typeName:Q.ZodEffects,effect:{type:`refinement`,refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this[`~standard`]={version:1,vendor:`zod`,validate:e=>this[`~validate`](e)}}optional(){return tf.create(this,this._def)}nullable(){return nf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fd.create(this)}promise(){return $d.create(this,this._def)}or(e){return Rd.create([this,e],this._def)}and(e){return Hd.create(this,e,this._def)}transform(e){return new ef({...X(this._def),schema:this,typeName:Q.ZodEffects,effect:{type:`transform`,transform:e}})}default(e){let t=typeof e==`function`?e:()=>e;return new rf({...X(this._def),innerType:this,defaultValue:t,typeName:Q.ZodDefault})}brand(){return new sf({typeName:Q.ZodBranded,type:this,...X(this._def)})}catch(e){let t=typeof e==`function`?e:()=>e;return new af({...X(this._def),innerType:this,catchValue:t,typeName:Q.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return cf.create(this,e)}readonly(){return lf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Qu=/^c[^\s-]{8,}$/i,$u=/^[0-9a-z]+$/,ed=/^[0-9A-HJKMNP-TV-Z]{26}$/i,td=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nd=/^[a-z0-9_-]{21}$/i,rd=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,id=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ad=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,od=`^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`,sd,cd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ld=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ud=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pd=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,md=`((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))`,hd=RegExp(`^${md}$`);function gd(e){let t=`[0-5]\\d`;e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision??(t=`${t}(\\.\\d+)?`);let n=e.precision?`+`:`?`;return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function _d(e){return RegExp(`^${gd(e)}$`)}function vd(e){let t=`${md}T${gd(e)}`,n=[];return n.push(e.local?`Z?`:`Z`),e.offset&&n.push(`([+-]\\d{2}:?\\d{2})`),t=`${t}(${n.join(`|`)})`,RegExp(`^${t}$`)}function yd(e,t){return!!((t===`v4`||!t)&&cd.test(e)||(t===`v6`||!t)&&ud.test(e))}function bd(e,t){if(!rd.test(e))return!1;try{let[n]=e.split(`.`);if(!n)return!1;let r=n.replace(/-/g,`+`).replace(/_/g,`/`).padEnd(n.length+(4-n.length%4)%4,`=`),i=JSON.parse(atob(r));return!(typeof i!=`object`||!i||`typ`in i&&i?.typ!==`JWT`||!i.alg||t&&i.alg!==t)}catch{return!1}}function xd(e,t){return!!((t===`v4`||!t)&&ld.test(e)||(t===`v6`||!t)&&dd.test(e))}var Sd=class e extends Z{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==G.string){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.string,received:t.parsedType}),J}let t=new Uu,n;for(let r of this._def.checks)if(r.kind===`min`)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),q(n,{code:K.too_small,minimum:r.value,type:`string`,inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind===`max`)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),q(n,{code:K.too_big,maximum:r.value,type:`string`,inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind===`length`){let i=e.data.length>r.value,a=e.data.length<r.value;(i||a)&&(n=this._getOrReturnCtx(e,n),i?q(n,{code:K.too_big,maximum:r.value,type:`string`,inclusive:!0,exact:!0,message:r.message}):a&&q(n,{code:K.too_small,minimum:r.value,type:`string`,inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if(r.kind===`email`)ad.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`email`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`emoji`)sd||=new RegExp(od,`u`),sd.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`emoji`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`uuid`)td.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`uuid`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`nanoid`)nd.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`nanoid`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`cuid`)Qu.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`cuid`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`cuid2`)$u.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`cuid2`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`ulid`)ed.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`ulid`,code:K.invalid_string,message:r.message}),t.dirty());else if(r.kind===`url`)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),q(n,{validation:`url`,code:K.invalid_string,message:r.message}),t.dirty()}else r.kind===`regex`?(r.regex.lastIndex=0,r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`regex`,code:K.invalid_string,message:r.message}),t.dirty())):r.kind===`trim`?e.data=e.data.trim():r.kind===`includes`?e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),q(n,{code:K.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):r.kind===`toLowerCase`?e.data=e.data.toLowerCase():r.kind===`toUpperCase`?e.data=e.data.toUpperCase():r.kind===`startsWith`?e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),q(n,{code:K.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):r.kind===`endsWith`?e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),q(n,{code:K.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):r.kind===`datetime`?vd(r).test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:K.invalid_string,validation:`datetime`,message:r.message}),t.dirty()):r.kind===`date`?hd.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:K.invalid_string,validation:`date`,message:r.message}),t.dirty()):r.kind===`time`?_d(r).test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:K.invalid_string,validation:`time`,message:r.message}),t.dirty()):r.kind===`duration`?id.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`duration`,code:K.invalid_string,message:r.message}),t.dirty()):r.kind===`ip`?yd(e.data,r.version)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`ip`,code:K.invalid_string,message:r.message}),t.dirty()):r.kind===`jwt`?bd(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`jwt`,code:K.invalid_string,message:r.message}),t.dirty()):r.kind===`cidr`?xd(e.data,r.version)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`cidr`,code:K.invalid_string,message:r.message}),t.dirty()):r.kind===`base64`?fd.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`base64`,code:K.invalid_string,message:r.message}),t.dirty()):r.kind===`base64url`?pd.test(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{validation:`base64url`,code:K.invalid_string,message:r.message}),t.dirty()):W.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:K.invalid_string,...Y.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:`email`,...Y.errToObj(e)})}url(e){return this._addCheck({kind:`url`,...Y.errToObj(e)})}emoji(e){return this._addCheck({kind:`emoji`,...Y.errToObj(e)})}uuid(e){return this._addCheck({kind:`uuid`,...Y.errToObj(e)})}nanoid(e){return this._addCheck({kind:`nanoid`,...Y.errToObj(e)})}cuid(e){return this._addCheck({kind:`cuid`,...Y.errToObj(e)})}cuid2(e){return this._addCheck({kind:`cuid2`,...Y.errToObj(e)})}ulid(e){return this._addCheck({kind:`ulid`,...Y.errToObj(e)})}base64(e){return this._addCheck({kind:`base64`,...Y.errToObj(e)})}base64url(e){return this._addCheck({kind:`base64url`,...Y.errToObj(e)})}jwt(e){return this._addCheck({kind:`jwt`,...Y.errToObj(e)})}ip(e){return this._addCheck({kind:`ip`,...Y.errToObj(e)})}cidr(e){return this._addCheck({kind:`cidr`,...Y.errToObj(e)})}datetime(e){return typeof e==`string`?this._addCheck({kind:`datetime`,precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:`datetime`,precision:e?.precision===void 0?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Y.errToObj(e?.message)})}date(e){return this._addCheck({kind:`date`,message:e})}time(e){return typeof e==`string`?this._addCheck({kind:`time`,precision:null,message:e}):this._addCheck({kind:`time`,precision:e?.precision===void 0?null:e?.precision,...Y.errToObj(e?.message)})}duration(e){return this._addCheck({kind:`duration`,...Y.errToObj(e)})}regex(e,t){return this._addCheck({kind:`regex`,regex:e,...Y.errToObj(t)})}includes(e,t){return this._addCheck({kind:`includes`,value:e,position:t?.position,...Y.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:`startsWith`,value:e,...Y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:`endsWith`,value:e,...Y.errToObj(t)})}min(e,t){return this._addCheck({kind:`min`,value:e,...Y.errToObj(t)})}max(e,t){return this._addCheck({kind:`max`,value:e,...Y.errToObj(t)})}length(e,t){return this._addCheck({kind:`length`,value:e,...Y.errToObj(t)})}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:`trim`}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:`toLowerCase`}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:`toUpperCase`}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind===`datetime`)}get isDate(){return!!this._def.checks.find(e=>e.kind===`date`)}get isTime(){return!!this._def.checks.find(e=>e.kind===`time`)}get isDuration(){return!!this._def.checks.find(e=>e.kind===`duration`)}get isEmail(){return!!this._def.checks.find(e=>e.kind===`email`)}get isURL(){return!!this._def.checks.find(e=>e.kind===`url`)}get isEmoji(){return!!this._def.checks.find(e=>e.kind===`emoji`)}get isUUID(){return!!this._def.checks.find(e=>e.kind===`uuid`)}get isNANOID(){return!!this._def.checks.find(e=>e.kind===`nanoid`)}get isCUID(){return!!this._def.checks.find(e=>e.kind===`cuid`)}get isCUID2(){return!!this._def.checks.find(e=>e.kind===`cuid2`)}get isULID(){return!!this._def.checks.find(e=>e.kind===`ulid`)}get isIP(){return!!this._def.checks.find(e=>e.kind===`ip`)}get isCIDR(){return!!this._def.checks.find(e=>e.kind===`cidr`)}get isBase64(){return!!this._def.checks.find(e=>e.kind===`base64`)}get isBase64url(){return!!this._def.checks.find(e=>e.kind===`base64url`)}get minLength(){let e=null;for(let t of this._def.checks)t.kind===`min`&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind===`max`&&(e===null||t.value<e)&&(e=t.value);return e}};Sd.create=e=>new Sd({checks:[],typeName:Q.ZodString,coerce:e?.coerce??!1,...X(e)});function Cd(e,t){let n=(e.toString().split(`.`)[1]||``).length,r=(t.toString().split(`.`)[1]||``).length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(`.`,``))%Number.parseInt(t.toFixed(i).replace(`.`,``))/10**i}var wd=class e extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==G.number){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.number,received:t.parsedType}),J}let t,n=new Uu;for(let r of this._def.checks)r.kind===`int`?W.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),q(t,{code:K.invalid_type,expected:`integer`,received:`float`,message:r.message}),n.dirty()):r.kind===`min`?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),q(t,{code:K.too_small,minimum:r.value,type:`number`,inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):r.kind===`max`?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),q(t,{code:K.too_big,maximum:r.value,type:`number`,inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):r.kind===`multipleOf`?Cd(e.data,r.value)!==0&&(t=this._getOrReturnCtx(e,t),q(t,{code:K.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):r.kind===`finite`?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),q(t,{code:K.not_finite,message:r.message}),n.dirty()):W.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit(`min`,e,!0,Y.toString(t))}gt(e,t){return this.setLimit(`min`,e,!1,Y.toString(t))}lte(e,t){return this.setLimit(`max`,e,!0,Y.toString(t))}lt(e,t){return this.setLimit(`max`,e,!1,Y.toString(t))}setLimit(t,n,r,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Y.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:`int`,message:Y.toString(e)})}positive(e){return this._addCheck({kind:`min`,value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:`max`,value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:`max`,value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:`min`,value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:`multipleOf`,value:e,message:Y.toString(t)})}finite(e){return this._addCheck({kind:`finite`,message:Y.toString(e)})}safe(e){return this._addCheck({kind:`min`,inclusive:!0,value:-(2**53-1),message:Y.toString(e)})._addCheck({kind:`max`,inclusive:!0,value:2**53-1,message:Y.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind===`min`&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind===`max`&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind===`int`||e.kind===`multipleOf`&&W.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks)if(n.kind===`finite`||n.kind===`int`||n.kind===`multipleOf`)return!0;else n.kind===`min`?(t===null||n.value>t)&&(t=n.value):n.kind===`max`&&(e===null||n.value<e)&&(e=n.value);return Number.isFinite(t)&&Number.isFinite(e)}};wd.create=e=>new wd({checks:[],typeName:Q.ZodNumber,coerce:e?.coerce||!1,...X(e)});var Td=class e extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==G.bigint)return this._getInvalidInput(e);let t,n=new Uu;for(let r of this._def.checks)r.kind===`min`?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),q(t,{code:K.too_small,type:`bigint`,minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):r.kind===`max`?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),q(t,{code:K.too_big,type:`bigint`,maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):r.kind===`multipleOf`?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),q(t,{code:K.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):W.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.bigint,received:t.parsedType}),J}gte(e,t){return this.setLimit(`min`,e,!0,Y.toString(t))}gt(e,t){return this.setLimit(`min`,e,!1,Y.toString(t))}lte(e,t){return this.setLimit(`max`,e,!0,Y.toString(t))}lt(e,t){return this.setLimit(`max`,e,!1,Y.toString(t))}setLimit(t,n,r,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Y.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:`min`,value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:`max`,value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:`max`,value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:`min`,value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:`multipleOf`,value:e,message:Y.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind===`min`&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind===`max`&&(e===null||t.value<e)&&(e=t.value);return e}};Td.create=e=>new Td({checks:[],typeName:Q.ZodBigInt,coerce:e?.coerce??!1,...X(e)});var Ed=class extends Z{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==G.boolean){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.boolean,received:t.parsedType}),J}return Gu(e.data)}};Ed.create=e=>new Ed({typeName:Q.ZodBoolean,coerce:e?.coerce||!1,...X(e)});var Dd=class e extends Z{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==G.date){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.date,received:t.parsedType}),J}if(Number.isNaN(e.data.getTime()))return q(this._getOrReturnCtx(e),{code:K.invalid_date}),J;let t=new Uu,n;for(let r of this._def.checks)r.kind===`min`?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),q(n,{code:K.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:`date`}),t.dirty()):r.kind===`max`?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),q(n,{code:K.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:`date`}),t.dirty()):W.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:`min`,value:e.getTime(),message:Y.toString(t)})}max(e,t){return this._addCheck({kind:`max`,value:e.getTime(),message:Y.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind===`min`&&(e===null||t.value>e)&&(e=t.value);return e==null?null:new Date(e)}get maxDate(){let e=null;for(let t of this._def.checks)t.kind===`max`&&(e===null||t.value<e)&&(e=t.value);return e==null?null:new Date(e)}};Dd.create=e=>new Dd({checks:[],coerce:e?.coerce||!1,typeName:Q.ZodDate,...X(e)});var Od=class extends Z{_parse(e){if(this._getType(e)!==G.symbol){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.symbol,received:t.parsedType}),J}return Gu(e.data)}};Od.create=e=>new Od({typeName:Q.ZodSymbol,...X(e)});var kd=class extends Z{_parse(e){if(this._getType(e)!==G.undefined){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.undefined,received:t.parsedType}),J}return Gu(e.data)}};kd.create=e=>new kd({typeName:Q.ZodUndefined,...X(e)});var Ad=class extends Z{_parse(e){if(this._getType(e)!==G.null){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.null,received:t.parsedType}),J}return Gu(e.data)}};Ad.create=e=>new Ad({typeName:Q.ZodNull,...X(e)});var jd=class extends Z{constructor(){super(...arguments),this._any=!0}_parse(e){return Gu(e.data)}};jd.create=e=>new jd({typeName:Q.ZodAny,...X(e)});var Md=class extends Z{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Gu(e.data)}};Md.create=e=>new Md({typeName:Q.ZodUnknown,...X(e)});var Nd=class extends Z{_parse(e){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.never,received:t.parsedType}),J}};Nd.create=e=>new Nd({typeName:Q.ZodNever,...X(e)});var Pd=class extends Z{_parse(e){if(this._getType(e)!==G.undefined){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.void,received:t.parsedType}),J}return Gu(e.data)}};Pd.create=e=>new Pd({typeName:Q.ZodVoid,...X(e)});var Fd=class e extends Z{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==G.array)return q(t,{code:K.invalid_type,expected:G.array,received:t.parsedType}),J;if(r.exactLength!==null){let e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(q(t,{code:e?K.too_big:K.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:`array`,inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(q(t,{code:K.too_small,minimum:r.minLength.value,type:`array`,inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(q(t,{code:K.too_big,maximum:r.maxLength.value,type:`array`,inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new Xu(t,e,t.path,n)))).then(e=>Uu.mergeArray(n,e));let i=[...t.data].map((e,n)=>r.type._parseSync(new Xu(t,e,t.path,n)));return Uu.mergeArray(n,i)}get element(){return this._def.type}min(t,n){return new e({...this._def,minLength:{value:t,message:Y.toString(n)}})}max(t,n){return new e({...this._def,maxLength:{value:t,message:Y.toString(n)}})}length(t,n){return new e({...this._def,exactLength:{value:t,message:Y.toString(n)}})}nonempty(e){return this.min(1,e)}};Fd.create=(e,t)=>new Fd({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Q.ZodArray,...X(t)});function Id(e){if(e instanceof Ld){let t={};for(let n in e.shape){let r=e.shape[n];t[n]=tf.create(Id(r))}return new Ld({...e._def,shape:()=>t})}else if(e instanceof Fd)return new Fd({...e._def,type:Id(e.element)});else if(e instanceof tf)return tf.create(Id(e.unwrap()));else if(e instanceof nf)return nf.create(Id(e.unwrap()));else if(e instanceof Ud)return Ud.create(e.items.map(e=>Id(e)));else return e}var Ld=class e extends Z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape();return this._cached={shape:e,keys:W.objectKeys(e)},this._cached}_parse(e){if(this._getType(e)!==G.object){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.object,received:t.parsedType}),J}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Nd&&this._def.unknownKeys===`strip`))for(let e in n.data)i.includes(e)||a.push(e);let o=[];for(let e of i){let t=r[e],i=n.data[e];o.push({key:{status:`valid`,value:e},value:t._parse(new Xu(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Nd){let e=this._def.unknownKeys;if(e===`passthrough`)for(let e of a)o.push({key:{status:`valid`,value:e},value:{status:`valid`,value:n.data[e]}});else if(e===`strict`)a.length>0&&(q(n,{code:K.unrecognized_keys,keys:a}),t.dirty());else if(e!==`strip`)throw Error(`Internal ZodObject error: invalid unknownKeys value.`)}else{let e=this._def.catchall;for(let t of a){let r=n.data[t];o.push({key:{status:`valid`,value:t},value:e._parse(new Xu(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>Uu.mergeObjectSync(t,e)):Uu.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(t){return Y.errToObj,new e({...this._def,unknownKeys:`strict`,...t===void 0?{}:{errorMap:(e,n)=>{let r=this._def.errorMap?.(e,n).message??n.defaultError;return e.code===`unrecognized_keys`?{message:Y.errToObj(t).message??r}:{message:r}}}})}strip(){return new e({...this._def,unknownKeys:`strip`})}passthrough(){return new e({...this._def,unknownKeys:`passthrough`})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Q.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let n={};for(let e of W.objectKeys(t))t[e]&&this.shape[e]&&(n[e]=this.shape[e]);return new e({...this._def,shape:()=>n})}omit(t){let n={};for(let e of W.objectKeys(this.shape))t[e]||(n[e]=this.shape[e]);return new e({...this._def,shape:()=>n})}deepPartial(){return Id(this)}partial(t){let n={};for(let e of W.objectKeys(this.shape)){let r=this.shape[e];t&&!t[e]?n[e]=r:n[e]=r.optional()}return new e({...this._def,shape:()=>n})}required(t){let n={};for(let e of W.objectKeys(this.shape))if(t&&!t[e])n[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof tf;)t=t._def.innerType;n[e]=t}return new e({...this._def,shape:()=>n})}keyof(){return Xd(W.objectKeys(this.shape))}};Ld.create=(e,t)=>new Ld({shape:()=>e,unknownKeys:`strip`,catchall:Nd.create(),typeName:Q.ZodObject,...X(t)}),Ld.strictCreate=(e,t)=>new Ld({shape:()=>e,unknownKeys:`strict`,catchall:Nd.create(),typeName:Q.ZodObject,...X(t)}),Ld.lazycreate=(e,t)=>new Ld({shape:e,unknownKeys:`strip`,catchall:Nd.create(),typeName:Q.ZodObject,...X(t)});var Rd=class extends Z{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function r(e){for(let t of e)if(t.result.status===`valid`)return t.result;for(let n of e)if(n.result.status===`dirty`)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new Ru(e.ctx.common.issues));return q(t,{code:K.invalid_union,unionErrors:n}),J}if(t.common.async)return Promise.all(n.map(async e=>{let n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(r);{let e,r=[];for(let i of n){let n={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:n});if(a.status===`valid`)return a;a.status===`dirty`&&!e&&(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=r.map(e=>new Ru(e));return q(t,{code:K.invalid_union,unionErrors:i}),J}}get options(){return this._def.options}};Rd.create=(e,t)=>new Rd({options:e,typeName:Q.ZodUnion,...X(t)});var zd=e=>e instanceof Jd?zd(e.schema):e instanceof ef?zd(e.innerType()):e instanceof Yd?[e.value]:e instanceof Zd?e.options:e instanceof Qd?W.objectValues(e.enum):e instanceof rf?zd(e._def.innerType):e instanceof kd?[void 0]:e instanceof Ad?[null]:e instanceof tf?[void 0,...zd(e.unwrap())]:e instanceof nf?[null,...zd(e.unwrap())]:e instanceof sf||e instanceof lf?zd(e.unwrap()):e instanceof af?zd(e._def.innerType):[],Bd=class e extends Z{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==G.object)return q(t,{code:K.invalid_type,expected:G.object,received:t.parsedType}),J;let n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(q(t,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),J)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){let i=new Map;for(let e of n){let n=zd(e.shape[t]);if(!n.length)throw Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let r of n){if(i.has(r))throw Error(`Discriminator property ${String(t)} has duplicate value ${String(r)}`);i.set(r,e)}}return new e({typeName:Q.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...X(r)})}};function Vd(e,t){let n=Lu(e),r=Lu(t);if(e===t)return{valid:!0,data:e};if(n===G.object&&r===G.object){let n=W.objectKeys(t),r=W.objectKeys(e).filter(e=>n.indexOf(e)!==-1),i={...e,...t};for(let n of r){let r=Vd(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}else if(n===G.array&&r===G.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t[r],o=Vd(i,a);if(!o.valid)return{valid:!1};n.push(o.data)}return{valid:!0,data:n}}else if(n===G.date&&r===G.date&&+e==+t)return{valid:!0,data:e};else return{valid:!1}}var Hd=class extends Z{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Ku(e)||Ku(r))return J;let i=Vd(e.value,r.value);return i.valid?((qu(e)||qu(r))&&t.dirty(),{status:t.value,value:i.data}):(q(n,{code:K.invalid_intersection_types}),J)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Hd.create=(e,t,n)=>new Hd({left:e,right:t,typeName:Q.ZodIntersection,...X(n)});var Ud=class e extends Z{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.array)return q(n,{code:K.invalid_type,expected:G.array,received:n.parsedType}),J;if(n.data.length<this._def.items.length)return q(n,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:`array`}),J;!this._def.rest&&n.data.length>this._def.items.length&&(q(n,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:`array`}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new Xu(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>Uu.mergeArray(t,e)):Uu.mergeArray(t,r)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Ud.create=(e,t)=>{if(!Array.isArray(e))throw Error(`You must pass an array of schemas to z.tuple([ ... ])`);return new Ud({items:e,typeName:Q.ZodTuple,rest:null,...X(t)})};var Wd=class e extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.object)return q(n,{code:K.invalid_type,expected:G.object,received:n.parsedType}),J;let r=[],i=this._def.keyType,a=this._def.valueType;for(let e in n.data)r.push({key:i._parse(new Xu(n,e,n.path,e)),value:a._parse(new Xu(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?Uu.mergeObjectAsync(t,r):Uu.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Z?new e({keyType:t,valueType:n,typeName:Q.ZodRecord,...X(r)}):new e({keyType:Sd.create(),valueType:t,typeName:Q.ZodRecord,...X(n)})}},Gd=class extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.map)return q(n,{code:K.invalid_type,expected:G.map,received:n.parsedType}),J;let r=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([e,t],a)=>({key:r._parse(new Xu(n,e,n.path,[a,`key`])),value:i._parse(new Xu(n,t,n.path,[a,`value`]))}));if(n.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let n of a){let r=await n.key,i=await n.value;if(r.status===`aborted`||i.status===`aborted`)return J;(r.status===`dirty`||i.status===`dirty`)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}else{let e=new Map;for(let n of a){let r=n.key,i=n.value;if(r.status===`aborted`||i.status===`aborted`)return J;(r.status===`dirty`||i.status===`dirty`)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}};Gd.create=(e,t,n)=>new Gd({valueType:t,keyType:e,typeName:Q.ZodMap,...X(n)});var Kd=class e extends Z{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.set)return q(n,{code:K.invalid_type,expected:G.set,received:n.parsedType}),J;let r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(q(n,{code:K.too_small,minimum:r.minSize.value,type:`set`,inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(q(n,{code:K.too_big,maximum:r.maxSize.value,type:`set`,inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let n=new Set;for(let r of e){if(r.status===`aborted`)return J;r.status===`dirty`&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let o=[...n.data.values()].map((e,t)=>i._parse(new Xu(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>a(e)):a(o)}min(t,n){return new e({...this._def,minSize:{value:t,message:Y.toString(n)}})}max(t,n){return new e({...this._def,maxSize:{value:t,message:Y.toString(n)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Kd.create=(e,t)=>new Kd({valueType:e,minSize:null,maxSize:null,typeName:Q.ZodSet,...X(t)});var qd=class e extends Z{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==G.function)return q(t,{code:K.invalid_type,expected:G.function,received:t.parsedType}),J;function n(e,n){return Hu({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Vu(),zu].filter(e=>!!e),issueData:{code:K.invalid_arguments,argumentsError:n}})}function r(e,n){return Hu({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Vu(),zu].filter(e=>!!e),issueData:{code:K.invalid_return_type,returnTypeError:n}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof $d){let e=this;return Gu(async function(...t){let o=new Ru([]),s=await e._def.args.parseAsync(t,i).catch(e=>{throw o.addIssue(n(t,e)),o}),c=await Reflect.apply(a,this,s);return await e._def.returns._def.type.parseAsync(c,i).catch(e=>{throw o.addIssue(r(c,e)),o})})}else{let e=this;return Gu(function(...t){let o=e._def.args.safeParse(t,i);if(!o.success)throw new Ru([n(t,o.error)]);let s=Reflect.apply(a,this,o.data),c=e._def.returns.safeParse(s,i);if(!c.success)throw new Ru([r(s,c.error)]);return c.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Ud.create(t).rest(Md.create())})}returns(t){return new e({...this._def,returns:t})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(t,n,r){return new e({args:t||Ud.create([]).rest(Md.create()),returns:n||Md.create(),typeName:Q.ZodFunction,...X(r)})}},Jd=class extends Z{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Jd.create=(e,t)=>new Jd({getter:e,typeName:Q.ZodLazy,...X(t)});var Yd=class extends Z{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return q(t,{received:t.data,code:K.invalid_literal,expected:this._def.value}),J}return{status:`valid`,value:e.data}}get value(){return this._def.value}};Yd.create=(e,t)=>new Yd({value:e,typeName:Q.ZodLiteral,...X(t)});function Xd(e,t){return new Zd({values:e,typeName:Q.ZodEnum,...X(t)})}var Zd=class e extends Z{_parse(e){if(typeof e.data!=`string`){let t=this._getOrReturnCtx(e),n=this._def.values;return q(t,{expected:W.joinValues(n),received:t.parsedType,code:K.invalid_type}),J}if(this._cache||=new Set(this._def.values),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return q(t,{received:t.data,code:K.invalid_enum_value,options:n}),J}return Gu(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(t,n=this._def){return e.create(t,{...this._def,...n})}exclude(t,n=this._def){return e.create(this.options.filter(e=>!t.includes(e)),{...this._def,...n})}};Zd.create=Xd;var Qd=class extends Z{_parse(e){let t=W.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==G.string&&n.parsedType!==G.number){let e=W.objectValues(t);return q(n,{expected:W.joinValues(e),received:n.parsedType,code:K.invalid_type}),J}if(this._cache||=new Set(W.getValidEnumValues(this._def.values)),!this._cache.has(e.data)){let e=W.objectValues(t);return q(n,{received:n.data,code:K.invalid_enum_value,options:e}),J}return Gu(e.data)}get enum(){return this._def.values}};Qd.create=(e,t)=>new Qd({values:e,typeName:Q.ZodNativeEnum,...X(t)});var $d=class extends Z{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==G.promise&&t.common.async===!1?(q(t,{code:K.invalid_type,expected:G.promise,received:t.parsedType}),J):Gu((t.parsedType===G.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};$d.create=(e,t)=>new $d({type:e,typeName:Q.ZodPromise,...X(t)});var ef=class extends Z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{q(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),r.type===`preprocess`){let e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if(t.value===`aborted`)return J;let r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return r.status===`aborted`?J:r.status===`dirty`||t.value===`dirty`?Wu(r.value):r});{if(t.value===`aborted`)return J;let r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return r.status===`aborted`?J:r.status===`dirty`||t.value===`dirty`?Wu(r.value):r}}if(r.type===`refinement`){let e=e=>{let t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error(`Async refinement encountered during synchronous parse operation. Use .parseAsync instead.`);return e};if(n.common.async===!1){let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return r.status===`aborted`?J:(r.status===`dirty`&&t.dirty(),e(r.value),{status:t.value,value:r.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>n.status===`aborted`?J:(n.status===`dirty`&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if(r.type===`transform`)if(n.common.async===!1){let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ju(e))return J;let a=r.transform(e.value,i);if(a instanceof Promise)throw Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>Ju(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):J);W.assertNever(r)}};ef.create=(e,t,n)=>new ef({schema:e,typeName:Q.ZodEffects,effect:t,...X(n)}),ef.createWithPreprocess=(e,t,n)=>new ef({schema:t,effect:{type:`preprocess`,transform:e},typeName:Q.ZodEffects,...X(n)});var tf=class extends Z{_parse(e){return this._getType(e)===G.undefined?Gu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tf.create=(e,t)=>new tf({innerType:e,typeName:Q.ZodOptional,...X(t)});var nf=class extends Z{_parse(e){return this._getType(e)===G.null?Gu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};nf.create=(e,t)=>new nf({innerType:e,typeName:Q.ZodNullable,...X(t)});var rf=class extends Z{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===G.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};rf.create=(e,t)=>new rf({innerType:e,typeName:Q.ZodDefault,defaultValue:typeof t.default==`function`?t.default:()=>t.default,...X(t)});var af=class extends Z{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Yu(r)?r.then(e=>({status:`valid`,value:e.status===`valid`?e.value:this._def.catchValue({get error(){return new Ru(n.common.issues)},input:n.data})})):{status:`valid`,value:r.status===`valid`?r.value:this._def.catchValue({get error(){return new Ru(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};af.create=(e,t)=>new af({innerType:e,typeName:Q.ZodCatch,catchValue:typeof t.catch==`function`?t.catch:()=>t.catch,...X(t)});var of=class extends Z{_parse(e){if(this._getType(e)!==G.nan){let t=this._getOrReturnCtx(e);return q(t,{code:K.invalid_type,expected:G.nan,received:t.parsedType}),J}return{status:`valid`,value:e.data}}};of.create=e=>new of({typeName:Q.ZodNaN,...X(e)});var sf=class extends Z{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},cf=class e extends Z{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return e.status===`aborted`?J:e.status===`dirty`?(t.dirty(),Wu(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return e.status===`aborted`?J:e.status===`dirty`?(t.dirty(),{status:`dirty`,value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(t,n){return new e({in:t,out:n,typeName:Q.ZodPipeline})}},lf=class extends Z{_parse(e){let t=this._def.innerType._parse(e),n=e=>(Ju(e)&&(e.value=Object.freeze(e.value)),e);return Yu(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}};lf.create=(e,t)=>new lf({innerType:e,typeName:Q.ZodReadonly,...X(t)}),Ld.lazycreate;var Q;(function(e){e.ZodString=`ZodString`,e.ZodNumber=`ZodNumber`,e.ZodNaN=`ZodNaN`,e.ZodBigInt=`ZodBigInt`,e.ZodBoolean=`ZodBoolean`,e.ZodDate=`ZodDate`,e.ZodSymbol=`ZodSymbol`,e.ZodUndefined=`ZodUndefined`,e.ZodNull=`ZodNull`,e.ZodAny=`ZodAny`,e.ZodUnknown=`ZodUnknown`,e.ZodNever=`ZodNever`,e.ZodVoid=`ZodVoid`,e.ZodArray=`ZodArray`,e.ZodObject=`ZodObject`,e.ZodUnion=`ZodUnion`,e.ZodDiscriminatedUnion=`ZodDiscriminatedUnion`,e.ZodIntersection=`ZodIntersection`,e.ZodTuple=`ZodTuple`,e.ZodRecord=`ZodRecord`,e.ZodMap=`ZodMap`,e.ZodSet=`ZodSet`,e.ZodFunction=`ZodFunction`,e.ZodLazy=`ZodLazy`,e.ZodLiteral=`ZodLiteral`,e.ZodEnum=`ZodEnum`,e.ZodEffects=`ZodEffects`,e.ZodNativeEnum=`ZodNativeEnum`,e.ZodOptional=`ZodOptional`,e.ZodNullable=`ZodNullable`,e.ZodDefault=`ZodDefault`,e.ZodCatch=`ZodCatch`,e.ZodPromise=`ZodPromise`,e.ZodBranded=`ZodBranded`,e.ZodPipeline=`ZodPipeline`,e.ZodReadonly=`ZodReadonly`})(Q||={}),Sd.create,wd.create,of.create,Td.create,Ed.create,Dd.create,Od.create,kd.create,Ad.create,jd.create,Md.create,Nd.create,Pd.create,Fd.create,Ld.create,Ld.strictCreate,Rd.create,Bd.create,Hd.create,Ud.create,Wd.create,Gd.create,Kd.create,qd.create,Jd.create,Yd.create,Zd.create,Qd.create,$d.create,ef.create,tf.create,nf.create,ef.createWithPreprocess,cf.create;function uf(...e){return e.reduce((e,t)=>({...e,...t??{}}),{})}async function df(e,t){if(e==null)return Promise.resolve();let n=t?.abortSignal;return new Promise((t,r)=>{if(n?.aborted){r(ff());return}let i=setTimeout(()=>{a(),t()},e),a=()=>{clearTimeout(i),n?.removeEventListener(`abort`,o)},o=()=>{a(),r(ff())};n?.addEventListener(`abort`,o)})}function ff(){return new DOMException(`Delay was aborted`,`AbortError`)}function pf(e){return Object.fromEntries([...e.headers])}var mf=({prefix:e,size:t=16,alphabet:n=`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`,separator:r=`-`}={})=>{let i=()=>{let e=n.length,r=Array(t);for(let i=0;i<t;i++)r[i]=n[Math.random()*e|0];return r.join(``)};if(e==null)return i;if(n.includes(r))throw new zr({argument:`separator`,message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${i()}`},hf=mf();function gf(e){return e==null?`unknown error`:typeof e==`string`?e:e instanceof Error?e.message:JSON.stringify(e)}function _f(e){return(e instanceof Error||e instanceof DOMException)&&(e.name===`AbortError`||e.name===`ResponseAborted`||e.name===`TimeoutError`)}var vf=[`fetch failed`,`failed to fetch`];function yf({error:e,url:t,requestBodyValues:n}){if(_f(e))return e;if(e instanceof TypeError&&vf.includes(e.message.toLowerCase())){let r=e.cause;if(r!=null)return new Or({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function bf(e=globalThis){return e.window?`runtime/browser`:e.navigator?.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:e.process?.versions?.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?`runtime/vercel-edge`:`runtime/unknown`}function xf(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((e,n)=>{t[n.toLowerCase()]=e});else{Array.isArray(e)||(e=Object.entries(e));for(let[n,r]of e)r!=null&&(t[n.toLowerCase()]=r)}return t}function Sf(e,...t){let n=new Headers(xf(e)),r=n.get(`user-agent`)||``;return n.set(`user-agent`,[r,...t].filter(Boolean).join(` `)),Object.fromEntries(n.entries())}var Cf=`3.0.17`,wf=()=>globalThis.fetch,Tf=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:i,fetch:a=wf()})=>{try{let o=await a(e,{method:`GET`,headers:Sf(t,`ai-sdk/provider-utils/${Cf}`,bf()),signal:i}),s=pf(o);if(!o.ok){let t;try{t=await r({response:o,url:e,requestBodyValues:{}})}catch(t){throw _f(t)||Or.isInstance(t)?t:new Or({message:`Failed to process error response`,cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}throw t.value}try{return await n({response:o,url:e,requestBodyValues:{}})}catch(t){throw t instanceof Error&&(_f(t)||Or.isInstance(t))?t:new Or({message:`Failed to process successful response`,cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}}catch(t){throw yf({error:t,url:e,requestBodyValues:{}})}};function Ef({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([e,t])=>{let n=e.toLowerCase();return n===`*`||n===`*/*`?{mediaTypePrefix:``,regexes:t}:{mediaTypePrefix:n.replace(/\*/,``),regexes:t}}).filter(({mediaTypePrefix:t})=>e.startsWith(t)).flatMap(({regexes:e})=>e).some(e=>e.test(t))}function Df({apiKey:e,environmentVariableName:t,apiKeyParameterName:n=`apiKey`,description:r}){if(typeof e==`string`)return e;if(e!=null)throw new ai({message:`${r} API key must be a string.`});if(typeof process>`u`)throw new ai({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e={}[t],e==null)throw new ai({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!=`string`)throw new ai({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function Of({settingValue:e,environmentVariableName:t}){if(typeof e==`string`||!(e!=null||typeof process>`u`)&&(e={}[t],!(e==null||typeof e!=`string`)))return e}var kf=/"__proto__"\s*:/,Af=/"constructor"\s*:/;function jf(e){let t=JSON.parse(e);return typeof t!=`object`||!t||kf.test(e)===!1&&Af.test(e)===!1?t:Mf(t)}function Mf(e){let t=[e];for(;t.length;){let e=t;t=[];for(let n of e){if(Object.prototype.hasOwnProperty.call(n,`__proto__`)||Object.prototype.hasOwnProperty.call(n,`constructor`)&&Object.prototype.hasOwnProperty.call(n.constructor,`prototype`))throw SyntaxError(`Object contains forbidden prototype property`);for(let e in n){let r=n[e];r&&typeof r==`object`&&t.push(r)}}}return e}function Nf(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return jf(e)}try{return jf(e)}finally{Error.stackTraceLimit=t}}var Pf=Symbol.for(`vercel.ai.validator`);function Ff(e){return{[Pf]:!0,validate:e}}function If(e){return typeof e==`object`&&!!e&&Pf in e&&e[Pf]===!0&&`validate`in e}function Lf(e){let t;return()=>(t??=e(),t)}function Rf(e){return If(e)?e:typeof e==`function`?e():zf(e)}function zf(e){return Ff(async t=>{let n=await e[`~standard`].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new gi({value:t,cause:n.issues})}})}async function Bf({value:e,schema:t}){let n=await Vf({value:e,schema:t});if(!n.success)throw gi.wrap({value:e,cause:n.error});return n.value}async function Vf({value:e,schema:t}){let n=Rf(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};let t=await n.validate(e);return t.success?{success:!0,value:t.value,rawValue:e}:{success:!1,error:gi.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:gi.wrap({value:e,cause:t}),rawValue:e}}}async function Hf({text:e,schema:t}){try{let n=Nf(e);return t==null?n:Bf({value:n,schema:t})}catch(t){throw ei.isInstance(t)||gi.isInstance(t)?t:new ei({text:e,cause:t})}}async function Uf({text:e,schema:t}){try{let n=Nf(e);return t==null?{success:!0,value:n,rawValue:n}:await Vf({value:n,schema:t})}catch(t){return{success:!1,error:ei.isInstance(t)?t:new ei({text:e,cause:t}),rawValue:void 0}}}function Wf(e){try{return Nf(e),!0}catch{return!1}}function Gf({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Ei).pipeThrough(new TransformStream({async transform({data:e},n){e!==`[DONE]`&&n.enqueue(await Uf({text:e,schema:t}))}}))}async function Kf({provider:e,providerOptions:t,schema:n}){if(t?.[e]==null)return;let r=await Vf({value:t[e],schema:n});if(!r.success)throw new zr({argument:`providerOptions`,message:`invalid ${e} provider options`,cause:r.error});return r.value}var qf=()=>globalThis.fetch,Jf=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:a,fetch:o})=>Yf({url:e,headers:{"Content-Type":`application/json`,...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:a,fetch:o}),Yf=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:a,fetch:o=qf()})=>{try{let s=await o(e,{method:`POST`,headers:Sf(t,`ai-sdk/provider-utils/${Cf}`,bf()),body:n.content,signal:a}),c=pf(s);if(!s.ok){let t;try{t=await i({response:s,url:e,requestBodyValues:n.values})}catch(t){throw _f(t)||Or.isInstance(t)?t:new Or({message:`Failed to process error response`,cause:t,statusCode:s.status,url:e,responseHeaders:c,requestBodyValues:n.values})}throw t.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(t){throw t instanceof Error&&(_f(t)||Or.isInstance(t))?t:new Or({message:`Failed to process successful response`,cause:t,statusCode:s.status,url:e,responseHeaders:c,requestBodyValues:n.values})}}catch(t){throw yf({error:t,url:e,requestBodyValues:n.values})}};async function Xf(e){return typeof e==`function`&&(e=e()),Promise.resolve(e)}var Zf=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:a})=>{let o=await r.text(),s=pf(r);if(o.trim()===``)return{responseHeaders:s,value:new Or({message:r.statusText,url:i,requestBodyValues:a,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n?.(r)})};try{let c=await Hf({text:o,schema:e});return{responseHeaders:s,value:new Or({message:t(c),url:i,requestBodyValues:a,statusCode:r.status,responseHeaders:s,responseBody:o,data:c,isRetryable:n?.(r,c)})}}catch{return{responseHeaders:s,value:new Or({message:r.statusText,url:i,requestBodyValues:a,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n?.(r)})}}},Qf=e=>async({response:t})=>{let n=pf(t);if(t.body==null)throw new Nr({});return{responseHeaders:n,value:Gf({stream:t.body,schema:e})}},$f=e=>async({response:t,url:n,requestBodyValues:r})=>{let i=await t.text(),a=await Uf({text:i,schema:e}),o=pf(t);if(!a.success)throw new Or({message:`Invalid JSON response`,cause:a.error,statusCode:t.status,responseHeaders:o,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:o,value:a.value,rawValue:a.rawValue}},ep=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join(`/`)},tp=Symbol(`Let zodToJsonSchema decide on which parser to use`),np={name:void 0,$refStrategy:`root`,basePath:[`#`],effectStrategy:`input`,pipeStrategy:`all`,dateStrategy:`format:date-time`,mapStrategy:`entries`,removeAdditionalStrategy:`passthrough`,allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:`definitions`,strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:`escape`,applyRegexFlags:!1,emailStrategy:`format:email`,base64Strategy:`contentEncoding:base64`,nameStrategy:`ref`},rp=e=>typeof e==`string`?{...np,name:e}:{...np,...e};function ip(){return{}}function ap(e,t){let n={type:`array`};return e.type?._def&&e.type?._def?.typeName!==Q.ZodAny&&(n.items=$(e.type._def,{...t,currentPath:[...t.currentPath,`items`]})),e.minLength&&(n.minItems=e.minLength.value),e.maxLength&&(n.maxItems=e.maxLength.value),e.exactLength&&(n.minItems=e.exactLength.value,n.maxItems=e.exactLength.value),n}function op(e){let t={type:`integer`,format:`int64`};if(!e.checks)return t;for(let n of e.checks)switch(n.kind){case`min`:n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case`max`:n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case`multipleOf`:t.multipleOf=n.value;break}return t}function sp(){return{type:`boolean`}}function cp(e,t){return $(e.type._def,t)}var lp=(e,t)=>$(e.innerType._def,t);function up(e,t,n){let r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,r)=>up(e,t,n))};switch(r){case`string`:case`format:date-time`:return{type:`string`,format:`date-time`};case`format:date`:return{type:`string`,format:`date`};case`integer`:return dp(e)}}var dp=e=>{let t={type:`integer`,format:`unix-time`};for(let n of e.checks)switch(n.kind){case`min`:t.minimum=n.value;break;case`max`:t.maximum=n.value;break}return t};function fp(e,t){return{...$(e.innerType._def,t),default:e.defaultValue()}}function pp(e,t){return t.effectStrategy===`input`?$(e.schema._def,t):ip()}function mp(e){return{type:`string`,enum:Array.from(e.values)}}var hp=e=>`type`in e&&e.type===`string`?!1:`allOf`in e;function gp(e,t){let n=[$(e.left._def,{...t,currentPath:[...t.currentPath,`allOf`,`0`]}),$(e.right._def,{...t,currentPath:[...t.currentPath,`allOf`,`1`]})].filter(e=>!!e),r=[];return n.forEach(e=>{if(hp(e))r.push(...e.allOf);else{let t=e;if(`additionalProperties`in e&&e.additionalProperties===!1){let{additionalProperties:n,...r}=e;t=r}r.push(t)}}),r.length?{allOf:r}:void 0}function _p(e){let t=typeof e.value;return t!==`bigint`&&t!==`number`&&t!==`boolean`&&t!==`string`?{type:Array.isArray(e.value)?`array`:`object`}:{type:t===`bigint`?`integer`:t,const:e.value}}var vp=void 0,yp={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(vp===void 0&&(vp=RegExp(`^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`,`u`)),vp),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function bp(e,t){let n={type:`string`};if(e.checks)for(let r of e.checks)switch(r.kind){case`min`:n.minLength=typeof n.minLength==`number`?Math.max(n.minLength,r.value):r.value;break;case`max`:n.maxLength=typeof n.maxLength==`number`?Math.min(n.maxLength,r.value):r.value;break;case`email`:switch(t.emailStrategy){case`format:email`:wp(n,`email`,r.message,t);break;case`format:idn-email`:wp(n,`idn-email`,r.message,t);break;case`pattern:zod`:Tp(n,yp.email,r.message,t);break}break;case`url`:wp(n,`uri`,r.message,t);break;case`uuid`:wp(n,`uuid`,r.message,t);break;case`regex`:Tp(n,r.regex,r.message,t);break;case`cuid`:Tp(n,yp.cuid,r.message,t);break;case`cuid2`:Tp(n,yp.cuid2,r.message,t);break;case`startsWith`:Tp(n,RegExp(`^${xp(r.value,t)}`),r.message,t);break;case`endsWith`:Tp(n,RegExp(`${xp(r.value,t)}$`),r.message,t);break;case`datetime`:wp(n,`date-time`,r.message,t);break;case`date`:wp(n,`date`,r.message,t);break;case`time`:wp(n,`time`,r.message,t);break;case`duration`:wp(n,`duration`,r.message,t);break;case`length`:n.minLength=typeof n.minLength==`number`?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength==`number`?Math.min(n.maxLength,r.value):r.value;break;case`includes`:Tp(n,RegExp(xp(r.value,t)),r.message,t);break;case`ip`:r.version!==`v6`&&wp(n,`ipv4`,r.message,t),r.version!==`v4`&&wp(n,`ipv6`,r.message,t);break;case`base64url`:Tp(n,yp.base64url,r.message,t);break;case`jwt`:Tp(n,yp.jwt,r.message,t);break;case`cidr`:r.version!==`v6`&&Tp(n,yp.ipv4Cidr,r.message,t),r.version!==`v4`&&Tp(n,yp.ipv6Cidr,r.message,t);break;case`emoji`:Tp(n,yp.emoji(),r.message,t);break;case`ulid`:Tp(n,yp.ulid,r.message,t);break;case`base64`:switch(t.base64Strategy){case`format:binary`:wp(n,`binary`,r.message,t);break;case`contentEncoding:base64`:n.contentEncoding=`base64`;break;case`pattern:zod`:Tp(n,yp.base64,r.message,t);break}break;case`nanoid`:Tp(n,yp.nanoid,r.message,t);case`toLowerCase`:case`toUpperCase`:case`trim`:break;default:}return n}function xp(e,t){return t.patternStrategy===`escape`?Cp(e):e}var Sp=new Set(`ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789`);function Cp(e){let t=``;for(let n=0;n<e.length;n++)Sp.has(e[n])||(t+=`\\`),t+=e[n];return t}function wp(e,t,n,r){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||=[],e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function Tp(e,t,n,r){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||=[],e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Ep(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=Ep(t,r)}function Ep(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes(`i`),m:e.flags.includes(`m`),s:e.flags.includes(`s`)},r=n.i?e.source.toLowerCase():e.source,i=``,a=!1,o=!1,s=!1;for(let e=0;e<r.length;e++){if(a){i+=r[e],a=!1;continue}if(n.i){if(o){if(r[e].match(/[a-z]/)){s?(i+=r[e],i+=`${r[e-2]}-${r[e]}`.toUpperCase(),s=!1):r[e+1]===`-`&&r[e+2]?.match(/[a-z]/)?(i+=r[e],s=!0):i+=`${r[e]}${r[e].toUpperCase()}`;continue}}else if(r[e].match(/[a-z]/)){i+=`[${r[e]}${r[e].toUpperCase()}]`;continue}}if(n.m){if(r[e]===`^`){i+=`(^|(?<=[\r
]))`;continue}else if(r[e]===`$`){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[e]===`.`){i+=o?`${r[e]}\r
`:`[${r[e]}\r
]`;continue}i+=r[e],r[e]===`\\`?a=!0:o&&r[e]===`]`?o=!1:!o&&r[e]===`[`&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join(`/`)} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function Dp(e,t){let n={type:`object`,additionalProperties:$(e.valueType._def,{...t,currentPath:[...t.currentPath,`additionalProperties`]})??t.allowedAdditionalProperties};if(e.keyType?._def.typeName===Q.ZodString&&e.keyType._def.checks?.length){let{type:r,...i}=bp(e.keyType._def,t);return{...n,propertyNames:i}}else if(e.keyType?._def.typeName===Q.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};else if(e.keyType?._def.typeName===Q.ZodBranded&&e.keyType._def.type._def.typeName===Q.ZodString&&e.keyType._def.type._def.checks?.length){let{type:r,...i}=cp(e.keyType._def,t);return{...n,propertyNames:i}}return n}function Op(e,t){return t.mapStrategy===`record`?Dp(e,t):{type:`array`,maxItems:125,items:{type:`array`,items:[$(e.keyType._def,{...t,currentPath:[...t.currentPath,`items`,`items`,`0`]})||ip(),$(e.valueType._def,{...t,currentPath:[...t.currentPath,`items`,`items`,`1`]})||ip()],minItems:2,maxItems:2}}}function kp(e){let t=e.values,n=Object.keys(e.values).filter(e=>typeof t[t[e]]!=`number`).map(e=>t[e]),r=Array.from(new Set(n.map(e=>typeof e)));return{type:r.length===1?r[0]===`string`?`string`:`number`:[`string`,`number`],enum:n}}function Ap(){return{not:ip()}}function jp(){return{type:`null`}}var Mp={ZodString:`string`,ZodNumber:`number`,ZodBigInt:`integer`,ZodBoolean:`boolean`,ZodNull:`null`};function Np(e,t){let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in Mp&&(!e._def.checks||!e._def.checks.length))){let e=n.reduce((e,t)=>{let n=Mp[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}else if(n.every(e=>e._def.typeName===`ZodLiteral`&&!e.description)){let e=n.reduce((e,t)=>{let n=typeof t._def.value;switch(n){case`string`:case`number`:case`boolean`:return[...e,n];case`bigint`:return[...e,`integer`];case`object`:if(t._def.value===null)return[...e,`null`];case`symbol`:case`undefined`:case`function`:default:return e}},[]);if(e.length===n.length){let t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>e._def.typeName===`ZodEnum`))return{type:`string`,enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return Pp(e,t)}var Pp=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,n)=>$(e._def,{...t,currentPath:[...t.currentPath,`anyOf`,`${n}`]})).filter(e=>!!e&&(!t.strictUnions||typeof e==`object`&&Object.keys(e).length>0));return n.length?{anyOf:n}:void 0};function Fp(e,t){if([`ZodString`,`ZodNumber`,`ZodBigInt`,`ZodBoolean`,`ZodNull`].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Mp[e.innerType._def.typeName],`null`]};let n=$(e.innerType._def,{...t,currentPath:[...t.currentPath,`anyOf`,`0`]});return n&&{anyOf:[n,{type:`null`}]}}function Ip(e){let t={type:`number`};if(!e.checks)return t;for(let n of e.checks)switch(n.kind){case`int`:t.type=`integer`;break;case`min`:n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case`max`:n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case`multipleOf`:t.multipleOf=n.value;break}return t}function Lp(e,t){let n={type:`object`,properties:{}},r=[],i=e.shape();for(let e in i){let a=i[e];if(a===void 0||a._def===void 0)continue;let o=zp(a),s=$(a._def,{...t,currentPath:[...t.currentPath,`properties`,e],propertyPath:[...t.currentPath,`properties`,e]});s!==void 0&&(n.properties[e]=s,o||r.push(e))}r.length&&(n.required=r);let a=Rp(e,t);return a!==void 0&&(n.additionalProperties=a),n}function Rp(e,t){if(e.catchall._def.typeName!==`ZodNever`)return $(e.catchall._def,{...t,currentPath:[...t.currentPath,`additionalProperties`]});switch(e.unknownKeys){case`passthrough`:return t.allowedAdditionalProperties;case`strict`:return t.rejectedAdditionalProperties;case`strip`:return t.removeAdditionalStrategy===`strict`?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function zp(e){try{return e.isOptional()}catch{return!0}}var Bp=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return $(e.innerType._def,t);let n=$(e.innerType._def,{...t,currentPath:[...t.currentPath,`anyOf`,`1`]});return n?{anyOf:[{not:ip()},n]}:ip()},Vp=(e,t)=>{if(t.pipeStrategy===`input`)return $(e.in._def,t);if(t.pipeStrategy===`output`)return $(e.out._def,t);let n=$(e.in._def,{...t,currentPath:[...t.currentPath,`allOf`,`0`]});return{allOf:[n,$(e.out._def,{...t,currentPath:[...t.currentPath,`allOf`,n?`1`:`0`]})].filter(e=>e!==void 0)}};function Hp(e,t){return $(e.type._def,t)}function Up(e,t){let n={type:`array`,uniqueItems:!0,items:$(e.valueType._def,{...t,currentPath:[...t.currentPath,`items`]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}function Wp(e,t){return e.rest?{type:`array`,minItems:e.items.length,items:e.items.map((e,n)=>$(e._def,{...t,currentPath:[...t.currentPath,`items`,`${n}`]})).reduce((e,t)=>t===void 0?e:[...e,t],[]),additionalItems:$(e.rest._def,{...t,currentPath:[...t.currentPath,`additionalItems`]})}:{type:`array`,minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,n)=>$(e._def,{...t,currentPath:[...t.currentPath,`items`,`${n}`]})).reduce((e,t)=>t===void 0?e:[...e,t],[])}}function Gp(){return{not:ip()}}function Kp(){return ip()}var qp=(e,t)=>$(e.innerType._def,t),Jp=(e,t,n)=>{switch(t){case Q.ZodString:return bp(e,n);case Q.ZodNumber:return Ip(e);case Q.ZodObject:return Lp(e,n);case Q.ZodBigInt:return op(e);case Q.ZodBoolean:return sp();case Q.ZodDate:return up(e,n);case Q.ZodUndefined:return Gp();case Q.ZodNull:return jp();case Q.ZodArray:return ap(e,n);case Q.ZodUnion:case Q.ZodDiscriminatedUnion:return Np(e,n);case Q.ZodIntersection:return gp(e,n);case Q.ZodTuple:return Wp(e,n);case Q.ZodRecord:return Dp(e,n);case Q.ZodLiteral:return _p(e);case Q.ZodEnum:return mp(e);case Q.ZodNativeEnum:return kp(e);case Q.ZodNullable:return Fp(e,n);case Q.ZodOptional:return Bp(e,n);case Q.ZodMap:return Op(e,n);case Q.ZodSet:return Up(e,n);case Q.ZodLazy:return()=>e.getter()._def;case Q.ZodPromise:return Hp(e,n);case Q.ZodNaN:case Q.ZodNever:return Ap();case Q.ZodEffects:return pp(e,n);case Q.ZodAny:return ip();case Q.ZodUnknown:return Kp();case Q.ZodDefault:return fp(e,n);case Q.ZodBranded:return cp(e,n);case Q.ZodReadonly:return qp(e,n);case Q.ZodCatch:return lp(e,n);case Q.ZodPipeline:return Vp(e,n);case Q.ZodFunction:case Q.ZodVoid:case Q.ZodSymbol:return;default:return(e=>void 0)(t)}};function $(e,t,n=!1){let r=t.seen.get(e);if(t.override){let i=t.override?.call(t,e,t,r,n);if(i!==tp)return i}if(r&&!n){let e=Yp(r,t);if(e!==void 0)return e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let a=Jp(e,e.typeName,t),o=typeof a==`function`?$(a(),t):a;if(o&&Xp(e,t,o),t.postProcess){let n=t.postProcess(o,e,t);return i.jsonSchema=o,n}return i.jsonSchema=o,o}var Yp=(e,t)=>{switch(t.$refStrategy){case`root`:return{$ref:e.path.join(`/`)};case`relative`:return{$ref:ep(t.currentPath,e.path)};case`none`:case`seen`:return e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join(`/`)}! Defaulting to any`),ip()):t.$refStrategy===`seen`?ip():void 0}},Xp=(e,t,n)=>(e.description&&(n.description=e.description),n),Zp=e=>{let t=rp(e),n=t.name===void 0?t.basePath:[...t.basePath,t.definitionPath,t.name];return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}},Qp=(e,t)=>{let n=Zp(t),r=typeof t==`object`&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>({...e,[t]:$(r._def,{...n,currentPath:[...n.basePath,n.definitionPath,t]},!0)??ip()}),{}):void 0,i=typeof t==`string`?t:t?.nameStrategy===`title`?void 0:t?.name,a=$(e._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??ip(),o=typeof t==`object`&&t.name!==void 0&&t.nameStrategy===`title`?t.name:void 0;o!==void 0&&(a.title=o);let s=i===void 0?r?{...a,[n.definitionPath]:r}:a:{$ref:[...n.$refStrategy===`relative`?[]:n.basePath,n.definitionPath,i].join(`/`),[n.definitionPath]:{...r,[i]:a}};return s.$schema=`http://json-schema.org/draft-07/schema#`,s};function $p(e,t){let n=t?.useReferences??!1;return im(()=>Qp(e,{$refStrategy:n?`root`:`none`}),{validate:async t=>{let n=await e.safeParseAsync(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}function em(e,t){let n=t?.useReferences??!1;return im(()=>Jc(e,{target:`draft-7`,io:`output`,reused:n?`ref`:`inline`}),{validate:async t=>{let n=await ll(e,t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}function tm(e){return`_zod`in e}function nm(e,t){return tm(e)?em(e,t):$p(e,t)}var rm=Symbol.for(`vercel.ai.schema`);function im(e,{validate:t}={}){return{[rm]:!0,_type:void 0,[Pf]:!0,get jsonSchema(){return typeof e==`function`&&(e=e()),e},validate:t}}function am(e){return typeof e==`object`&&!!e&&rm in e&&e[rm]===!0&&`jsonSchema`in e&&`validate`in e}function om(e){return e==null?im({properties:{},additionalProperties:!1}):am(e)?e:typeof e==`function`?e():nm(e)}var{btoa:sm,atob:cm}=globalThis;function lm(e){let t=cm(e.replace(/-/g,`+`).replace(/_/g,`/`));return Uint8Array.from(t,e=>e.codePointAt(0))}function um(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return sm(t)}function dm(e){return e instanceof Uint8Array?um(e):e}function fm(e){return e?.replace(/\/$/,``)}function pm(e){return e!=null&&typeof e[Symbol.asyncIterator]==`function`}async function*mm({execute:e,input:t,options:n}){let r=e(t,n);if(pm(r)){let e;for await(let t of r)e=t,yield{type:`preliminary`,output:t};yield{type:`final`,output:e}}else yield{type:`final`,output:await r}}var hm=t(((e,t)=>{var n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},s=(e,t,o,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let c of i(t))!a.call(e,c)&&c!==o&&n(e,c,{get:()=>t[c],enumerable:!(s=r(t,c))||s.enumerable});return e},c=e=>s(n({},`__esModule`,{value:!0}),e),l={};o(l,{SYMBOL_FOR_REQ_CONTEXT:()=>u,getContext:()=>d}),t.exports=c(l);var u=Symbol.for(`@vercel/request-context`);function d(){return globalThis[u]?.get?.()??{}}})),gm=t(((e,t)=>{var n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},s=(e,t,o,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let c of i(t))!a.call(e,c)&&c!==o&&n(e,c,{get:()=>t[c],enumerable:!(s=r(t,c))||s.enumerable});return e},c=e=>s(n({},`__esModule`,{value:!0}),e),l={};o(l,{getContext:()=>u.getContext,getVercelOidcToken:()=>d,getVercelOidcTokenSync:()=>f}),t.exports=c(l);var u=hm();async function d(){return``}function f(){return``}})),_m=gm(),vm=gm(),ym=Symbol.for(`vercel.ai.gateway.error`),bm,xm,Sm=class e extends (xm=Error,bm=ym,xm){constructor({message:e,statusCode:t=500,cause:n}){super(e),this[bm]=!0,this.statusCode=t,this.cause=n}static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return typeof e==`object`&&!!e&&ym in e&&e[ym]===!0}},Cm=`GatewayAuthenticationError`,wm=`vercel.ai.gateway.error.${Cm}`,Tm=Symbol.for(wm),Em,Dm,Om=class e extends (Dm=Sm,Em=Tm,Dm){constructor({message:e=`Authentication failed`,statusCode:t=401,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[Em]=!0,this.name=Cm,this.type=`authentication_error`}static isInstance(e){return Sm.hasMarker(e)&&Tm in e}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r=`Authentication failed`,statusCode:i=401,cause:a}){let o;return o=t?`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new e({message:o,statusCode:i,cause:a})}},km=`GatewayInvalidRequestError`,Am=`vercel.ai.gateway.error.${km}`,jm=Symbol.for(Am),Mm,Nm,Pm=class extends (Nm=Sm,Mm=jm,Nm){constructor({message:e=`Invalid request`,statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[Mm]=!0,this.name=km,this.type=`invalid_request_error`}static isInstance(e){return Sm.hasMarker(e)&&jm in e}},Fm=`GatewayRateLimitError`,Im=`vercel.ai.gateway.error.${Fm}`,Lm=Symbol.for(Im),Rm,zm,Bm=class extends (zm=Sm,Rm=Lm,zm){constructor({message:e=`Rate limit exceeded`,statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[Rm]=!0,this.name=Fm,this.type=`rate_limit_exceeded`}static isInstance(e){return Sm.hasMarker(e)&&Lm in e}},Vm=`GatewayModelNotFoundError`,Hm=`vercel.ai.gateway.error.${Vm}`,Um=Symbol.for(Hm),Wm=Lf(()=>nm(H({modelId:R()}))),Gm,Km,qm=class extends (Km=Sm,Gm=Um,Km){constructor({message:e=`Model not found`,statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[Gm]=!0,this.name=Vm,this.type=`model_not_found`,this.modelId=n}static isInstance(e){return Sm.hasMarker(e)&&Um in e}},Jm=`GatewayInternalServerError`,Ym=`vercel.ai.gateway.error.${Jm}`,Xm=Symbol.for(Ym),Zm,Qm,$m=class extends (Qm=Sm,Zm=Xm,Qm){constructor({message:e=`Internal server error`,statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[Zm]=!0,this.name=Jm,this.type=`internal_server_error`}static isInstance(e){return Sm.hasMarker(e)&&Xm in e}},eh=`GatewayResponseError`,th=`vercel.ai.gateway.error.${eh}`,nh=Symbol.for(th),rh,ih,ah=class extends (ih=Sm,rh=nh,ih){constructor({message:e=`Invalid response from Gateway`,statusCode:t=502,response:n,validationError:r,cause:i}={}){super({message:e,statusCode:t,cause:i}),this[rh]=!0,this.name=eh,this.type=`response_error`,this.response=n,this.validationError=r}static isInstance(e){return Sm.hasMarker(e)&&nh in e}};async function oh({response:e,statusCode:t,defaultMessage:n=`Gateway request failed`,cause:r,authMethod:i}){let a=await Vf({value:e,schema:sh});if(!a.success)return new ah({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:a.error,cause:r});let o=a.value,s=o.error.type,c=o.error.message;switch(s){case`authentication_error`:return Om.createContextualError({apiKeyProvided:i===`api-key`,oidcTokenProvided:i===`oidc`,statusCode:t,cause:r});case`invalid_request_error`:return new Pm({message:c,statusCode:t,cause:r});case`rate_limit_exceeded`:return new Bm({message:c,statusCode:t,cause:r});case`model_not_found`:{let e=await Vf({value:o.error.param,schema:Wm});return new qm({message:c,statusCode:t,modelId:e.success?e.value.modelId:void 0,cause:r})}case`internal_server_error`:return new $m({message:c,statusCode:t,cause:r});default:return new $m({message:c,statusCode:t,cause:r})}}var sh=Lf(()=>nm(H({error:H({message:R(),type:R().nullish(),param:Yl().nullish(),code:tu([R(),B()]).nullish()})})));function ch(e,t){return Sm.isInstance(e)?e:Or.isInstance(e)?oh({response:lh(e),statusCode:e.statusCode??500,defaultMessage:`Gateway request failed`,cause:e,authMethod:t}):oh({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:`Unknown Gateway error`,cause:e,authMethod:t})}function lh(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var uh=`ai-gateway-auth-method`;async function dh(e){let t=await Vf({value:e[uh],schema:fh});return t.success?t.value:void 0}var fh=Lf(()=>nm(tu([U(`api-key`),U(`oidc`)]))),ph=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await Tf({url:`${this.config.baseURL}/config`,headers:await Xf(this.config.headers()),successfulResponseHandler:$f(mh),failedResponseHandler:Zf({errorSchema:ql(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw await ch(e)}}async getCredits(){try{let{value:e}=await Tf({url:`${new URL(this.config.baseURL).origin}/v1/credits`,headers:await Xf(this.config.headers()),successfulResponseHandler:$f(hh),failedResponseHandler:Zf({errorSchema:ql(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw await ch(e)}}},mh=Lf(()=>nm(H({models:V(H({id:R(),name:R(),description:R().nullish(),pricing:H({input:R(),output:R(),input_cache_read:R().nullish(),input_cache_write:R().nullish()}).transform(({input:e,output:t,input_cache_read:n,input_cache_write:r})=>({input:e,output:t,...n?{cachedInputTokens:n}:{},...r?{cacheCreationInputTokens:r}:{}})).nullish(),specification:H({specificationVersion:U(`v2`),provider:R(),modelId:R()}),modelType:lu([`language`,`embedding`,`image`]).nullish()}))}))),hh=Lf(()=>nm(H({balance:R(),total_used:R()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),gh=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion=`v2`,this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await Xf(this.config.headers());try{let{responseHeaders:a,value:o,rawValue:s}=await Jf({url:this.getUrl(),headers:uf(i,e.headers,this.getModelConfigHeaders(this.modelId,!1),await Xf(this.config.o11yHeaders)),body:t,successfulResponseHandler:$f(ql()),failedResponseHandler:Zf({errorSchema:ql(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...o,request:{body:t},response:{headers:a,body:s},warnings:n}}catch(e){throw await ch(e,await dh(i))}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await Xf(this.config.headers());try{let{value:a,responseHeaders:o}=await Jf({url:this.getUrl(),headers:uf(i,e.headers,this.getModelConfigHeaders(this.modelId,!0),await Xf(this.config.o11yHeaders)),body:t,successfulResponseHandler:Qf(ql()),failedResponseHandler:Zf({errorSchema:ql(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:a.pipeThrough(new TransformStream({start(e){n.length>0&&e.enqueue({type:`stream-start`,warnings:n})},transform(t,n){if(t.success){let r=t.value;if(r.type===`raw`&&!e.includeRawChunks)return;r.type===`response-metadata`&&r.timestamp&&typeof r.timestamp==`string`&&(r.timestamp=new Date(r.timestamp)),n.enqueue(r)}else n.error(t.error)}})),request:{body:t},response:{headers:o}}}catch(e){throw await ch(e,await dh(i))}}isFilePart(e){return e&&typeof e==`object`&&`type`in e&&e.type===`file`}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)){let t=e;if(t.data instanceof Uint8Array){let e=Uint8Array.from(t.data),n=Buffer.from(e).toString(`base64`);t.data=new URL(`data:${t.mediaType||`application/octet-stream`};base64,${n}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":`2`,"ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},_h=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion=`v2`,this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){let i=await Xf(this.config.headers());try{let{responseHeaders:a,value:o,rawValue:s}=await Jf({url:this.getUrl(),headers:uf(i,t??{},this.getModelConfigHeaders(),await Xf(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r?{providerOptions:r}:{}},successfulResponseHandler:$f(vh),failedResponseHandler:Zf({errorSchema:ql(),errorToMessage:e=>e}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:o.embeddings,usage:o.usage??void 0,providerMetadata:o.providerMetadata,response:{headers:a,body:s}}}catch(e){throw await ch(e,await dh(i))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":`2`,"ai-model-id":this.modelId}}},vh=Lf(()=>nm(H({embeddings:V(V(B())),usage:H({tokens:B()}).nullish(),providerMetadata:su(R(),su(R(),Yl())).optional()}))),yh=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion=`v2`,this.maxImagesPerCall=4}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:a,headers:o,abortSignal:s}){let c=await Xf(this.config.headers());try{let{responseHeaders:l,value:u,rawValue:d}=await Jf({url:this.getUrl(),headers:uf(c,o??{},this.getModelConfigHeaders(),await Xf(this.config.o11yHeaders)),body:{prompt:e,n:t,...n&&{size:n},...r&&{aspectRatio:r},...i&&{seed:i},...a??{}},successfulResponseHandler:$f(xh),failedResponseHandler:Zf({errorSchema:ql(),errorToMessage:e=>e}),...s&&{abortSignal:s},fetch:this.config.fetch});return{images:u.images,warnings:u.warnings??[],providerMetadata:u.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:l}}}catch(e){throw ch(e,await dh(c))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":`2`,"ai-model-id":this.modelId}}},bh=H({images:V(Yl()).optional()}).catchall(Yl()),xh=H({images:V(R()),warnings:V(H({type:U(`other`),message:R()})).optional(),providerMetadata:su(R(),bh).optional()});async function Sh(){return(0,_m.getContext)().headers?.[`x-vercel-id`]}var Ch=`2.0.11`,wh=`0.0.1`;function Th(e={}){let t=null,n=null,r=e.metadataCacheRefreshMillis??1e3*60*5,i=0,a=fm(e.baseURL)??`https://ai-gateway.vercel.sh/v1/ai`,o=async()=>{let t=await Dh(e);if(t)return Sf({Authorization:`Bearer ${t.token}`,"ai-gateway-protocol-version":wh,[uh]:t.authMethod,...e.headers},`ai-sdk/gateway/${Ch}`);throw Om.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},s=()=>{let e=Of({settingValue:void 0,environmentVariableName:`VERCEL_DEPLOYMENT_ID`}),t=Of({settingValue:void 0,environmentVariableName:`VERCEL_ENV`}),n=Of({settingValue:void 0,environmentVariableName:`VERCEL_REGION`});return async()=>{let r=await Sh();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...n&&{"ai-o11y-region":n},...r&&{"ai-o11y-request-id":r}}}},c=t=>new gh(t,{provider:`gateway`,baseURL:a,headers:o,fetch:e.fetch,o11yHeaders:s()}),l=async()=>{var s;let c=((s=e._internal)?.currentDate)?.call(s).getTime()??Date.now();return(!t||c-i>r)&&(i=c,t=new ph({baseURL:a,headers:o,fetch:e.fetch}).getAvailableModels().then(e=>(n=e,e)).catch(async e=>{throw await ch(e,await dh(await o()))})),n?Promise.resolve(n):t},u=async()=>new ph({baseURL:a,headers:o,fetch:e.fetch}).getCredits().catch(async e=>{throw await ch(e,await dh(await o()))}),d=function(e){if(new.target)throw Error(`The Gateway Provider model function cannot be called with the new keyword.`);return c(e)};return d.getAvailableModels=l,d.getCredits=u,d.imageModel=t=>new yh(t,{provider:`gateway`,baseURL:a,headers:o,fetch:e.fetch,o11yHeaders:s()}),d.languageModel=c,d.textEmbeddingModel=t=>new _h(t,{provider:`gateway`,baseURL:a,headers:o,fetch:e.fetch,o11yHeaders:s()}),d}var Eh=Th();async function Dh(e){let t=Of({settingValue:e.apiKey,environmentVariableName:`AI_GATEWAY_API_KEY`});if(t)return{token:t,authMethod:`api-key`};try{return{token:await(0,vm.getVercelOidcToken)(),authMethod:`oidc`}}catch{return null}}var Oh=typeof globalThis==`object`?globalThis:typeof self==`object`?self:typeof window==`object`?window:typeof global==`object`?global:{},kh=`1.9.0`,Ah=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function jh(e){var t=new Set([e]),n=new Set,r=e.match(Ah);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return function(t){return t===e};function a(e){return n.add(e),!1}function o(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(Ah);if(!r)return a(e);var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};return s.prerelease!=null||i.major!==s.major?a(e):i.major===0?i.minor===s.minor&&i.patch<=s.patch?o(e):a(e):i.minor<=s.minor?o(e):a(e)}}var Mh=jh(kh),Nh=kh.split(`.`)[0],Ph=Symbol.for(`opentelemetry.js.api.`+Nh),Fh=Oh;function Ih(e,t,n,r){r===void 0&&(r=!1);var i=Fh[Ph]=Fh[Ph]??{version:kh};if(!r&&i[e]){var a=Error(`@opentelemetry/api: Attempted duplicate registration of API: `+e);return n.error(a.stack||a.message),!1}if(i.version!==`1.9.0`){var a=Error(`@opentelemetry/api: Registration of version v`+i.version+` for `+e+` does not match previously registered API v`+kh);return n.error(a.stack||a.message),!1}return i[e]=t,n.debug(`@opentelemetry/api: Registered a global for `+e+` v`+kh+`.`),!0}function Lh(e){var t=Fh[Ph]?.version;if(!(!t||!Mh(t)))return Fh[Ph]?.[e]}function Rh(e,t){t.debug(`@opentelemetry/api: Unregistering a global for `+e+` v`+kh+`.`);var n=Fh[Ph];n&&delete n[e]}var zh=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Bh=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Vh=function(){function e(e){this._namespace=e.namespace||`DiagComponentLogger`}return e.prototype.debug=function(){var e=[...arguments];return Hh(`debug`,this._namespace,e)},e.prototype.error=function(){var e=[...arguments];return Hh(`error`,this._namespace,e)},e.prototype.info=function(){var e=[...arguments];return Hh(`info`,this._namespace,e)},e.prototype.warn=function(){var e=[...arguments];return Hh(`warn`,this._namespace,e)},e.prototype.verbose=function(){var e=[...arguments];return Hh(`verbose`,this._namespace,e)},e}();function Hh(e,t,n){var r=Lh(`diag`);if(r)return n.unshift(t),r[e].apply(r,Bh([],zh(n),!1))}var Uh;(function(e){e[e.NONE=0]=`NONE`,e[e.ERROR=30]=`ERROR`,e[e.WARN=50]=`WARN`,e[e.INFO=60]=`INFO`,e[e.DEBUG=70]=`DEBUG`,e[e.VERBOSE=80]=`VERBOSE`,e[e.ALL=9999]=`ALL`})(Uh||={});function Wh(e,t){e<Uh.NONE?e=Uh.NONE:e>Uh.ALL&&(e=Uh.ALL),t||={};function n(n,r){var i=t[n];return typeof i==`function`&&e>=r?i.bind(t):function(){}}return{error:n(`error`,Uh.ERROR),warn:n(`warn`,Uh.WARN),info:n(`info`,Uh.INFO),debug:n(`debug`,Uh.DEBUG),verbose:n(`verbose`,Uh.VERBOSE)}}var Gh=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Kh=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},qh=`diag`,Jh=function(){function e(){function e(e){return function(){var t=[...arguments],n=Lh(`diag`);if(n)return n[e].apply(n,Kh([],Gh(t),!1))}}var t=this;t.setLogger=function(e,n){if(n===void 0&&(n={logLevel:Uh.INFO}),e===t){var r=Error(`Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation`);return t.error(r.stack??r.message),!1}typeof n==`number`&&(n={logLevel:n});var i=Lh(`diag`),a=Wh(n.logLevel??Uh.INFO,e);if(i&&!n.suppressOverrideMessage){var o=Error().stack??`<failed to generate stacktrace>`;i.warn(`Current logger will be overwritten from `+o),a.warn(`Current logger will overwrite one already registered from `+o)}return Ih(`diag`,a,t,!0)},t.disable=function(){Rh(qh,t)},t.createComponentLogger=function(e){return new Vh(e)},t.verbose=e(`verbose`),t.debug=e(`debug`),t.info=e(`info`),t.warn=e(`warn`),t.error=e(`error`)}return e.instance=function(){return this._instance||=new e,this._instance},e}();function Yh(e){return Symbol.for(e)}var Xh=new(function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}return e}()),Zh=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Qh=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},$h=function(){function e(){}return e.prototype.active=function(){return Xh},e.prototype.with=function(e,t,n){var r=[...arguments].slice(3);return t.call.apply(t,Qh([n],Zh(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),eg=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},tg=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ng=`context`,rg=new $h,ig=function(){function e(){}return e.getInstance=function(){return this._instance||=new e,this._instance},e.prototype.setGlobalContextManager=function(e){return Ih(ng,e,Jh.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(r=this._getContextManager()).with.apply(r,tg([e,t,n],eg(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return Lh(ng)||rg},e.prototype.disable=function(){this._getContextManager().disable(),Rh(ng,Jh.instance())},e}(),ag;(function(e){e[e.NONE=0]=`NONE`,e[e.SAMPLED=1]=`SAMPLED`})(ag||={});var og={traceId:`00000000000000000000000000000000`,spanId:`0000000000000000`,traceFlags:ag.NONE},sg=function(){function e(e){e===void 0&&(e=og),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),cg=Yh(`OpenTelemetry Context Key SPAN`);function lg(e){return e.getValue(cg)||void 0}function ug(){return lg(ig.getInstance().active())}function dg(e,t){return e.setValue(cg,t)}function fg(e){return e.deleteValue(cg)}function pg(e,t){return dg(e,new sg(t))}function mg(e){return lg(e)?.spanContext()}var hg=/^([0-9a-f]{32})$/i,gg=/^[0-9a-f]{16}$/i;function _g(e){return hg.test(e)&&e!==`00000000000000000000000000000000`}function vg(e){return gg.test(e)&&e!==`0000000000000000`}function yg(e){return _g(e.traceId)&&vg(e.spanId)}function bg(e){return new sg(e)}var xg=ig.getInstance(),Sg=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(n===void 0&&(n=xg.active()),t?.root)return new sg;var r=n&&mg(n);return Cg(r)&&yg(r)?new sg(r):new sg},e.prototype.startActiveSpan=function(e,t,n,r){var i,a,o;if(!(arguments.length<2)){arguments.length===2?o=t:arguments.length===3?(i=t,o=n):(i=t,a=n,o=r);var s=a??xg.active(),c=this.startSpan(e,i,s),l=dg(s,c);return xg.with(l,o,void 0,c)}},e}();function Cg(e){return typeof e==`object`&&typeof e.spanId==`string`&&typeof e.traceId==`string`&&typeof e.traceFlags==`number`}var wg=new Sg,Tg=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):wg},e}(),Eg=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new Sg},e}()),Dg=function(){function e(){}return e.prototype.getTracer=function(e,t,n){return this.getDelegateTracer(e,t,n)??new Tg(this,e,t,n)},e.prototype.getDelegate=function(){return this._delegate??Eg},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){return this._delegate?.getTracer(e,t,n)},e}(),Og;(function(e){e[e.UNSET=0]=`UNSET`,e[e.OK=1]=`OK`,e[e.ERROR=2]=`ERROR`})(Og||={});var kg=`trace`,Ag=function(){function e(){this._proxyTracerProvider=new Dg,this.wrapSpanContext=bg,this.isSpanContextValid=yg,this.deleteSpan=fg,this.getSpan=lg,this.getActiveSpan=ug,this.getSpanContext=mg,this.setSpan=dg,this.setSpanContext=pg}return e.getInstance=function(){return this._instance||=new e,this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=Ih(kg,this._proxyTracerProvider,Jh.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return Lh(kg)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){Rh(kg,Jh.instance()),this._proxyTracerProvider=new Dg},e}().getInstance(),jg=Object.defineProperty,Mg=(e,t)=>{for(var n in t)jg(e,n,{get:t[n],enumerable:!0})},Ng=`AI_NoOutputSpecifiedError`,Pg=`vercel.ai.error.${Ng}`,Fg=Symbol.for(Pg),Ig,Lg=class extends j{constructor({message:e=`No output specified.`}={}){super({name:Ng,message:e}),this[Ig]=!0}static isInstance(e){return j.hasMarker(e,Pg)}};Ig=Fg;function Rg(e){let t=`AI SDK Warning:`;switch(e.type){case`unsupported-setting`:{let n=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(n+=` - ${e.details}`),n}case`unsupported-tool`:{let n=`${t} The tool "${`name`in e.tool?e.tool.name:`unknown tool`}" is not supported by this model`;return e.details&&(n+=` - ${e.details}`),n}case`other`:return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}var zg=`AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.`,Bg=!1,Vg=e=>{if(e.length===0)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t==`function`){t(e);return}Bg||(Bg=!0,console.info(zg));for(let t of e)console.warn(Rg(t))}},Hg=`AI_InvalidArgumentError`,Ug=`vercel.ai.error.${Hg}`,Wg=Symbol.for(Ug),Gg,Kg=class extends j{constructor({parameter:e,value:t,message:n}){super({name:Hg,message:`Invalid argument for parameter ${e}: ${n}`}),this[Gg]=!0,this.parameter=e,this.value=t}static isInstance(e){return j.hasMarker(e,Ug)}};Gg=Wg;var qg=`AI_InvalidToolInputError`,Jg=`vercel.ai.error.${qg}`,Yg=Symbol.for(Jg),Xg,Zg=class extends j{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${Pr(n)}`}){super({name:qg,message:r,cause:n}),this[Xg]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return j.hasMarker(e,Jg)}};Xg=Yg;var Qg=`AI_NoObjectGeneratedError`,$g=`vercel.ai.error.${Qg}`,e_=Symbol.for($g),t_,n_=class extends j{constructor({message:e=`No object generated.`,cause:t,text:n,response:r,usage:i,finishReason:a}){super({name:Qg,message:e,cause:t}),this[t_]=!0,this.text=n,this.response=r,this.usage=i,this.finishReason=a}static isInstance(e){return j.hasMarker(e,$g)}};t_=e_;var r_=`AI_NoOutputGeneratedError`,i_=`vercel.ai.error.${r_}`,a_=Symbol.for(i_),o_,s_=class extends j{constructor({message:e=`No output generated.`,cause:t}={}){super({name:r_,message:e,cause:t}),this[o_]=!0}static isInstance(e){return j.hasMarker(e,i_)}};o_=a_;var c_=`AI_NoSuchToolError`,l_=`vercel.ai.error.${c_}`,u_=Symbol.for(l_),d_,f_=class extends j{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?`No tools are available.`:`Available tools: ${t.join(`, `)}.`}`}){super({name:c_,message:n}),this[d_]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return j.hasMarker(e,l_)}};d_=u_;var p_=`AI_ToolCallRepairError`,m_=`vercel.ai.error.${p_}`,h_=Symbol.for(m_),g_,__=class extends j{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Pr(e)}`}){super({name:p_,message:n,cause:e}),this[g_]=!0,this.originalError=t}static isInstance(e){return j.hasMarker(e,m_)}};g_=h_;var v_=class extends j{constructor(e){super({name:`AI_UnsupportedModelVersionError`,message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},y_=`AI_InvalidMessageRoleError`,b_=`vercel.ai.error.${y_}`,x_=Symbol.for(b_),S_,C_=class extends j{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:y_,message:t}),this[S_]=!0,this.role=e}static isInstance(e){return j.hasMarker(e,b_)}};S_=x_;var w_=`AI_DownloadError`,T_=`vercel.ai.error.${w_}`,E_=Symbol.for(T_),D_,O_=class extends j{constructor({url:e,statusCode:t,statusText:n,cause:r,message:i=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:w_,message:i,cause:r}),this[D_]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return j.hasMarker(e,T_)}};D_=E_;var k_=`AI_RetryError`,A_=`vercel.ai.error.${k_}`,j_=Symbol.for(A_),M_,N_=class extends j{constructor({message:e,reason:t,errors:n}){super({name:k_,message:e}),this[M_]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return j.hasMarker(e,A_)}};M_=j_;function P_(e){if(typeof e!=`string`){if(e.specificationVersion!==`v2`)throw new v_({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return F_().languageModel(e)}function F_(){return globalThis.AI_SDK_DEFAULT_PROVIDER??Eh}var I_=[{mediaType:`image/gif`,bytesPrefix:[71,73,70]},{mediaType:`image/png`,bytesPrefix:[137,80,78,71]},{mediaType:`image/jpeg`,bytesPrefix:[255,216]},{mediaType:`image/webp`,bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:`image/bmp`,bytesPrefix:[66,77]},{mediaType:`image/tiff`,bytesPrefix:[73,73,42,0]},{mediaType:`image/tiff`,bytesPrefix:[77,77,0,42]},{mediaType:`image/avif`,bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:`image/heic`,bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],L_=e=>{let t=typeof e==`string`?lm(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function R_(e){return typeof e==`string`&&e.startsWith(`SUQz`)||typeof e!=`string`&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?L_(e):e}function z_({data:e,signatures:t}){let n=R_(e),r=typeof n==`string`?lm(n.substring(0,Math.min(n.length,24))):n;for(let e of t)if(r.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>e===null||r[t]===e))return e.mediaType}var B_=`5.0.95`,V_=async({url:e})=>{let t=e.toString();try{let e=await fetch(t,{headers:Sf({},`ai-sdk/${B_}`,bf())});if(!e.ok)throw new O_({url:t,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:e.headers.get(`content-type`)??void 0}}catch(e){throw O_.isInstance(e)?e:new O_({url:t,cause:e})}},H_=(e=V_)=>t=>Promise.all(t.map(async t=>t.isUrlSupportedByModel?null:e(t)));function U_(e){try{let[t,n]=e.split(`,`);return{mediaType:t.split(`;`)[0].split(`:`)[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var W_=tu([R(),Fu(Uint8Array),Fu(ArrayBuffer),Mu(e=>globalThis.Buffer?.isBuffer(e)??!1,{message:`Must be a Buffer`})]);function G_(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e==`string`)try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol===`data:`){let{mediaType:t,base64Content:n}=U_(e.toString());if(t==null||n==null)throw new j({name:`InvalidDataContentError`,message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function K_(e){return typeof e==`string`?e:e instanceof ArrayBuffer?um(new Uint8Array(e)):um(e)}async function q_({prompt:e,supportedUrls:t,download:n=H_()}){let r=await Y_(e.messages,n,t);return[...e.system==null?[]:[{role:`system`,content:e.system}],...e.messages.map(e=>J_({message:e,downloadedAssets:r}))]}function J_({message:e,downloadedAssets:t}){let n=e.role;switch(n){case`system`:return{role:`system`,content:e.content,providerOptions:e.providerOptions};case`user`:return typeof e.content==`string`?{role:`user`,content:[{type:`text`,text:e.content}],providerOptions:e.providerOptions}:{role:`user`,content:e.content.map(e=>X_(e,t)).filter(e=>e.type!==`text`||e.text!==``),providerOptions:e.providerOptions};case`assistant`:return typeof e.content==`string`?{role:`assistant`,content:[{type:`text`,text:e.content}],providerOptions:e.providerOptions}:{role:`assistant`,content:e.content.filter(e=>e.type!==`text`||e.text!==``||e.providerOptions!=null).map(e=>{let t=e.providerOptions;switch(e.type){case`file`:{let{data:n,mediaType:r}=G_(e.data);return{type:`file`,data:n,filename:e.filename,mediaType:r??e.mediaType,providerOptions:t}}case`reasoning`:return{type:`reasoning`,text:e.text,providerOptions:t};case`text`:return{type:`text`,text:e.text,providerOptions:t};case`tool-call`:return{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:t};case`tool-result`:return{type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:t}}}),providerOptions:e.providerOptions};case`tool`:return{role:`tool`,content:e.content.map(e=>({type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:e.providerOptions})),providerOptions:e.providerOptions};default:throw new C_({role:n})}}async function Y_(e,t,n){let r=e.filter(e=>e.role===`user`).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>e.type===`image`||e.type===`file`).map(e=>{let t=e.mediaType??(e.type===`image`?`image/*`:void 0),n=e.type===`image`?e.image:e.data;if(typeof n==`string`)try{n=new URL(n)}catch{}return{mediaType:t,data:n}}).filter(e=>e.data instanceof URL).map(e=>({url:e.data,isUrlSupportedByModel:e.mediaType!=null&&Ef({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:n})})),i=await t(r);return Object.fromEntries(i.map((e,t)=>e==null?null:[r[t].url.toString(),{data:e.data,mediaType:e.mediaType}]).filter(e=>e!=null))}function X_(e,t){if(e.type===`text`)return{type:`text`,text:e.text,providerOptions:e.providerOptions};let n,r=e.type;switch(r){case`image`:n=e.image;break;case`file`:n=e.data;break;default:throw Error(`Unsupported part type: ${r}`)}let{data:i,mediaType:a}=G_(n),o=a??e.mediaType,s=i;if(s instanceof URL){let e=t[s.toString()];e&&(s=e.data,o??=e.mediaType)}switch(r){case`image`:return(s instanceof Uint8Array||typeof s==`string`)&&(o=z_({data:s,signatures:I_})??o),{type:`file`,mediaType:o??`image/*`,filename:void 0,data:s,providerOptions:e.providerOptions};case`file`:if(o==null)throw Error(`Media type is missing for file part`);return{type:`file`,mediaType:o,filename:e.filename,data:s,providerOptions:e.providerOptions}}}function Z_({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:a,seed:o,stopSequences:s}){if(e!=null){if(!Number.isInteger(e))throw new Kg({parameter:`maxOutputTokens`,value:e,message:`maxOutputTokens must be an integer`});if(e<1)throw new Kg({parameter:`maxOutputTokens`,value:e,message:`maxOutputTokens must be >= 1`})}if(t!=null&&typeof t!=`number`)throw new Kg({parameter:`temperature`,value:t,message:`temperature must be a number`});if(n!=null&&typeof n!=`number`)throw new Kg({parameter:`topP`,value:n,message:`topP must be a number`});if(r!=null&&typeof r!=`number`)throw new Kg({parameter:`topK`,value:r,message:`topK must be a number`});if(i!=null&&typeof i!=`number`)throw new Kg({parameter:`presencePenalty`,value:i,message:`presencePenalty must be a number`});if(a!=null&&typeof a!=`number`)throw new Kg({parameter:`frequencyPenalty`,value:a,message:`frequencyPenalty must be a number`});if(o!=null&&!Number.isInteger(o))throw new Kg({parameter:`seed`,value:o,message:`seed must be an integer`});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:a,stopSequences:s,seed:o}}function Q_(e){return e!=null&&Object.keys(e).length>0}function $_({tools:e,toolChoice:t,activeTools:n}){return Q_(e)?{tools:(n==null?Object.entries(e):Object.entries(e).filter(([e])=>n.includes(e))).map(([e,t])=>{let n=t.type;switch(n){case void 0:case`dynamic`:case`function`:return{type:`function`,name:e,description:t.description,inputSchema:om(t.inputSchema).jsonSchema,providerOptions:t.providerOptions};case`provider-defined`:return{type:`provider-defined`,name:e,id:t.id,args:t.args};default:{let e=n;throw Error(`Unsupported tool type: ${e}`)}}}),toolChoice:t==null?{type:`auto`}:typeof t==`string`?{type:t}:{type:`tool`,toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var ev=Au(()=>tu([Gl(),R(),B(),Ul(),su(R(),ev),V(ev)])),tv=su(R(),su(R(),ev)),nv=H({type:U(`text`),text:R(),providerOptions:tv.optional()}),rv=H({type:U(`image`),image:tu([W_,Fu(URL)]),mediaType:R().optional(),providerOptions:tv.optional()}),iv=H({type:U(`file`),data:tu([W_,Fu(URL)]),filename:R().optional(),mediaType:R(),providerOptions:tv.optional()}),av=H({type:U(`reasoning`),text:R(),providerOptions:tv.optional()}),ov=H({type:U(`tool-call`),toolCallId:R(),toolName:R(),input:Yl(),providerOptions:tv.optional(),providerExecuted:Ul().optional()}),sv=ru(`type`,[H({type:U(`text`),value:R()}),H({type:U(`json`),value:ev}),H({type:U(`error-text`),value:R()}),H({type:U(`error-json`),value:ev}),H({type:U(`content`),value:V(tu([H({type:U(`text`),text:R()}),H({type:U(`media`),data:R(),mediaType:R()})]))})]),cv=H({type:U(`tool-result`),toolCallId:R(),toolName:R(),output:sv,providerOptions:tv.optional()}),lv=tu([H({role:U(`system`),content:R(),providerOptions:tv.optional()}),H({role:U(`user`),content:tu([R(),V(tu([nv,rv,iv]))]),providerOptions:tv.optional()}),H({role:U(`assistant`),content:tu([R(),V(tu([nv,iv,av,ov,cv]))]),providerOptions:tv.optional()}),H({role:U(`tool`),content:V(cv),providerOptions:tv.optional()})]);async function uv(e){if(e.prompt==null&&e.messages==null)throw new Wr({prompt:e,message:`prompt or messages must be defined`});if(e.prompt!=null&&e.messages!=null)throw new Wr({prompt:e,message:`prompt and messages cannot be defined at the same time`});if(e.system!=null&&typeof e.system!=`string`)throw new Wr({prompt:e,message:`system must be a string`});let t;if(e.prompt!=null&&typeof e.prompt==`string`)t=[{role:`user`,content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new Wr({prompt:e,message:`prompt or messages must be defined`});if(t.length===0)throw new Wr({prompt:e,message:`messages must not be empty`});let n=await Vf({value:t,schema:V(lv)});if(!n.success)throw new Wr({prompt:e,message:`The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.`,cause:n.error});return{messages:t,system:e.system}}function dv(e){return Om.isInstance(e)||qm.isInstance(e)?new j({name:`GatewayError`,message:`Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.`,cause:e}):e}function fv({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId==null?``:` ${t.functionId}`}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function pv({model:e,settings:t,telemetry:n,headers:r}){return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,n])=>(e[`ai.settings.${t}`]=n,e),{}),...Object.entries(n?.metadata??{}).reduce((e,[t,n])=>(e[`ai.telemetry.metadata.${t}`]=n,e),{}),...Object.entries(r??{}).reduce((e,[t,n])=>(n!==void 0&&(e[`ai.request.headers.${t}`]=n),e),{})}}var mv={startSpan(){return hv},startActiveSpan(e,t,n,r){if(typeof t==`function`)return t(hv);if(typeof n==`function`)return n(hv);if(typeof r==`function`)return r(hv)}},hv={spanContext(){return gv},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},gv={traceId:``,spanId:``,traceFlags:0};function _v({isEnabled:e=!1,tracer:t}={}){return e?t||Ag.getTracer(`ai`):mv}function vv({name:e,tracer:t,attributes:n,fn:r,endWhenDone:i=!0}){return t.startActiveSpan(e,{attributes:n},async e=>{try{let t=await r(e);return i&&e.end(),t}catch(t){try{yv(e,t)}finally{e.end()}throw t}})}function yv(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Og.ERROR,message:t.message})):e.setStatus({code:Og.ERROR})}function bv({telemetry:e,attributes:t}){return e?.isEnabled===!0?Object.entries(t).reduce((t,[n,r])=>{if(r==null)return t;if(typeof r==`object`&&`input`in r&&typeof r.input==`function`){if(e?.recordInputs===!1)return t;let i=r.input();return i==null?t:{...t,[n]:i}}if(typeof r==`object`&&`output`in r&&typeof r.output==`function`){if(e?.recordOutputs===!1)return t;let i=r.output();return i==null?t:{...t,[n]:i}}return{...t,[n]:r}},{}):{}}function xv(e){return JSON.stringify(e.map(e=>({...e,content:typeof e.content==`string`?e.content:e.content.map(e=>e.type===`file`?{...e,data:e.data instanceof Uint8Array?K_(e.data):e.data}:e)})))}function Sv(e,t){return{inputTokens:Cv(e.inputTokens,t.inputTokens),outputTokens:Cv(e.outputTokens,t.outputTokens),totalTokens:Cv(e.totalTokens,t.totalTokens),reasoningTokens:Cv(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:Cv(e.cachedInputTokens,t.cachedInputTokens)}}function Cv(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function wv(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Tv({error:e,exponentialBackoffDelay:t}){let n=e.responseHeaders;if(!n)return t;let r,i=n[`retry-after-ms`];if(i){let e=parseFloat(i);Number.isNaN(e)||(r=e)}let a=n[`retry-after`];if(a&&r===void 0){let e=parseFloat(a);r=Number.isNaN(e)?Date.parse(a)-Date.now():e*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var Ev=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async i=>Dv(i,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function Dv(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:i},a=[]){try{return await e()}catch(o){if(_f(o)||t===0)throw o;let s=gf(o),c=[...a,o],l=c.length;if(l>t)throw new N_({message:`Failed after ${l} attempts. Last error: ${s}`,reason:`maxRetriesExceeded`,errors:c});if(o instanceof Error&&Or.isInstance(o)&&o.isRetryable===!0&&l<=t)return await df(Tv({error:o,exponentialBackoffDelay:n}),{abortSignal:i}),Dv(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:i},c);throw l===1?o:new N_({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:`errorNotRetryable`,errors:c})}}function Ov({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Kg({parameter:`maxRetries`,value:e,message:`maxRetries must be an integer`});if(e<0)throw new Kg({parameter:`maxRetries`,value:e,message:`maxRetries must be >= 0`})}let n=e??2;return{maxRetries:n,retry:Ev({maxRetries:n,abortSignal:t})}}var kv=class{constructor({data:e,mediaType:t}){let n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data??=um(this.uint8ArrayData),this.base64Data}get uint8Array(){return this.uint8ArrayData??=lm(this.base64Data),this.uint8ArrayData}},Av=class extends kv{constructor(e){super(e),this.type=`file`}};async function jv({toolCall:e,tools:t,repairToolCall:n,system:r,messages:i}){try{if(t==null)throw new f_({toolName:e.toolName});try{return await Mv({toolCall:e,tools:t})}catch(a){if(n==null||!(f_.isInstance(a)||Zg.isInstance(a)))throw a;let o=null;try{o=await n({toolCall:e,tools:t,inputSchema:({toolName:e})=>{let{inputSchema:n}=t[e];return om(n).jsonSchema},system:r,messages:i,error:a})}catch(e){throw new __({cause:e,originalError:a})}if(o==null)throw a;return await Mv({toolCall:o,tools:t})}}catch(t){let n=await Uf({text:e.input}),r=n.success?n.value:e.input;return{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:r,dynamic:!0,invalid:!0,error:t}}}async function Mv({toolCall:e,tools:t}){let n=e.toolName,r=t[n];if(r==null)throw new f_({toolName:e.toolName,availableTools:Object.keys(t)});let i=om(r.inputSchema),a=e.input.trim()===``?await Vf({value:{},schema:i}):await Uf({text:e.input,schema:i});if(a.success===!1)throw new Zg({toolName:n,toolInput:e.input,cause:a.error});return r.type===`dynamic`?{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:a.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:`tool-call`,toolCallId:e.toolCallId,toolName:n,input:a.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var Nv=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:i,response:a,providerMetadata:o}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=i,this.response=a,this.providerMetadata=o}get text(){return this.content.filter(e=>e.type===`text`).map(e=>e.text).join(``)}get reasoning(){return this.content.filter(e=>e.type===`reasoning`)}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join(``)}get files(){return this.content.filter(e=>e.type===`file`).map(e=>e.file)}get sources(){return this.content.filter(e=>e.type===`source`)}get toolCalls(){return this.content.filter(e=>e.type===`tool-call`)}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type===`tool-result`)}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function Pv(e){return({steps:t})=>t.length===e}async function Fv({stopConditions:e,steps:t}){return(await Promise.all(e.map(e=>e({steps:t})))).some(e=>e)}function Iv({output:e,tool:t,errorMode:n}){return n===`text`?{type:`error-text`,value:Pr(e)}:n===`json`?{type:`error-json`,value:Lv(e)}:t?.toModelOutput?t.toModelOutput(e):typeof e==`string`?{type:`text`,value:e}:{type:`json`,value:Lv(e)}}function Lv(e){return e===void 0?null:e}function Rv({content:e,tools:t}){let n=[],r=e.filter(e=>e.type!==`source`).filter(e=>(e.type!==`tool-result`||e.providerExecuted)&&(e.type!==`tool-error`||e.providerExecuted)).filter(e=>e.type!==`text`||e.text.length>0).map(e=>{switch(e.type){case`text`:return{type:`text`,text:e.text,providerOptions:e.providerMetadata};case`reasoning`:return{type:`reasoning`,text:e.text,providerOptions:e.providerMetadata};case`file`:return{type:`file`,data:e.file.base64,mediaType:e.file.mediaType,providerOptions:e.providerMetadata};case`tool-call`:return{type:`tool-call`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:e.providerMetadata};case`tool-result`:return{type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:Iv({tool:t?.[e.toolName],output:e.output,errorMode:`none`}),providerExecuted:!0,providerOptions:e.providerMetadata};case`tool-error`:return{type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:Iv({tool:t?.[e.toolName],output:e.error,errorMode:`json`}),providerOptions:e.providerMetadata}}});r.length>0&&n.push({role:`assistant`,content:r});let i=e.filter(e=>e.type===`tool-result`||e.type===`tool-error`).filter(e=>!e.providerExecuted).map(e=>({type:`tool-result`,toolCallId:e.toolCallId,toolName:e.toolName,output:Iv({tool:t?.[e.toolName],output:e.type===`tool-result`?e.output:e.error,errorMode:e.type===`tool-error`?`text`:`none`})}));return i.length>0&&n.push({role:`tool`,content:i}),n}mf({prefix:`aitxt`,size:24});function zv(e,t){let n=new Headers(e??{});for(let[e,r]of Object.entries(t))n.has(e)||n.set(e,r);return n}function Bv({status:e,statusText:t,headers:n,textStream:r}){return new Response(r.pipeThrough(new TextEncoderStream),{status:e??200,statusText:t,headers:zv(n,{"content-type":`text/plain; charset=utf-8`})})}function Vv({response:e,status:t,statusText:n,headers:r,stream:i}){e.writeHead(t??200,n,r);let a=i.getReader();(async()=>{try{for(;;){let{done:t,value:n}=await a.read();if(t)break;e.write(n)||await new Promise(t=>{e.once(`drain`,t)})}}catch(e){throw e}finally{e.end()}})()}function Hv({response:e,status:t,statusText:n,headers:r,textStream:i}){Vv({response:e,status:t,statusText:n,headers:Object.fromEntries(zv(r,{"content-type":`text/plain; charset=utf-8`}).entries()),stream:i.pipeThrough(new TextEncoderStream)})}var Uv=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},Wv={"content-type":`text/event-stream`,"cache-control":`no-cache`,connection:`keep-alive`,"x-vercel-ai-ui-message-stream":`v1`,"x-accel-buffering":`no`};function Gv({status:e,statusText:t,headers:n,stream:r,consumeSseStream:i}){let a=r.pipeThrough(new Uv);if(i){let[e,t]=a.tee();a=e,i({stream:t})}return new Response(a.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:zv(n,Wv)})}function Kv({originalMessages:e,responseMessageId:t}){if(e==null)return;let n=e[e.length-1];return n?.role===`assistant`?n.id:typeof t==`function`?t():t}function qv(e){return e.type.startsWith(`data-`)}function Jv(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;let n={...e};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let i=t[r];if(i===void 0)continue;let a=r in e?e[r]:void 0,o=typeof i==`object`&&!!i&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp),s=typeof a==`object`&&!!a&&!Array.isArray(a)&&!(a instanceof Date)&&!(a instanceof RegExp);o&&s?n[r]=Jv(a,i):n[r]=i}return n}function Yv(e){let t=[`ROOT`],n=-1,r=null;function i(e,i,a){switch(e){case`"`:n=i,t.pop(),t.push(a),t.push(`INSIDE_STRING`);break;case`f`:case`t`:case`n`:n=i,r=i,t.pop(),t.push(a),t.push(`INSIDE_LITERAL`);break;case`-`:t.pop(),t.push(a),t.push(`INSIDE_NUMBER`);break;case`0`:case`1`:case`2`:case`3`:case`4`:case`5`:case`6`:case`7`:case`8`:case`9`:n=i,t.pop(),t.push(a),t.push(`INSIDE_NUMBER`);break;case`{`:n=i,t.pop(),t.push(a),t.push(`INSIDE_OBJECT_START`);break;case`[`:n=i,t.pop(),t.push(a),t.push(`INSIDE_ARRAY_START`);break}}function a(e,r){switch(e){case`,`:t.pop(),t.push(`INSIDE_OBJECT_AFTER_COMMA`);break;case`}`:n=r,t.pop();break}}function o(e,r){switch(e){case`,`:t.pop(),t.push(`INSIDE_ARRAY_AFTER_COMMA`);break;case`]`:n=r,t.pop();break}}for(let s=0;s<e.length;s++){let c=e[s];switch(t[t.length-1]){case`ROOT`:i(c,s,`FINISH`);break;case`INSIDE_OBJECT_START`:switch(c){case`"`:t.pop(),t.push(`INSIDE_OBJECT_KEY`);break;case`}`:n=s,t.pop();break}break;case`INSIDE_OBJECT_AFTER_COMMA`:switch(c){case`"`:t.pop(),t.push(`INSIDE_OBJECT_KEY`);break}break;case`INSIDE_OBJECT_KEY`:switch(c){case`"`:t.pop(),t.push(`INSIDE_OBJECT_AFTER_KEY`);break}break;case`INSIDE_OBJECT_AFTER_KEY`:switch(c){case`:`:t.pop(),t.push(`INSIDE_OBJECT_BEFORE_VALUE`);break}break;case`INSIDE_OBJECT_BEFORE_VALUE`:i(c,s,`INSIDE_OBJECT_AFTER_VALUE`);break;case`INSIDE_OBJECT_AFTER_VALUE`:a(c,s);break;case`INSIDE_STRING`:switch(c){case`"`:t.pop(),n=s;break;case`\\`:t.push(`INSIDE_STRING_ESCAPE`);break;default:n=s}break;case`INSIDE_ARRAY_START`:switch(c){case`]`:n=s,t.pop();break;default:n=s,i(c,s,`INSIDE_ARRAY_AFTER_VALUE`);break}break;case`INSIDE_ARRAY_AFTER_VALUE`:switch(c){case`,`:t.pop(),t.push(`INSIDE_ARRAY_AFTER_COMMA`);break;case`]`:n=s,t.pop();break;default:n=s;break}break;case`INSIDE_ARRAY_AFTER_COMMA`:i(c,s,`INSIDE_ARRAY_AFTER_VALUE`);break;case`INSIDE_STRING_ESCAPE`:t.pop(),n=s;break;case`INSIDE_NUMBER`:switch(c){case`0`:case`1`:case`2`:case`3`:case`4`:case`5`:case`6`:case`7`:case`8`:case`9`:n=s;break;case`e`:case`E`:case`-`:case`.`:break;case`,`:t.pop(),t[t.length-1]===`INSIDE_ARRAY_AFTER_VALUE`&&o(c,s),t[t.length-1]===`INSIDE_OBJECT_AFTER_VALUE`&&a(c,s);break;case`}`:t.pop(),t[t.length-1]===`INSIDE_OBJECT_AFTER_VALUE`&&a(c,s);break;case`]`:t.pop(),t[t.length-1]===`INSIDE_ARRAY_AFTER_VALUE`&&o(c,s);break;default:t.pop();break}break;case`INSIDE_LITERAL`:{let i=e.substring(r,s+1);!`false`.startsWith(i)&&!`true`.startsWith(i)&&!`null`.startsWith(i)?(t.pop(),t[t.length-1]===`INSIDE_OBJECT_AFTER_VALUE`?a(c,s):t[t.length-1]===`INSIDE_ARRAY_AFTER_VALUE`&&o(c,s)):n=s;break}}}let s=e.slice(0,n+1);for(let n=t.length-1;n>=0;n--)switch(t[n]){case`INSIDE_STRING`:s+=`"`;break;case`INSIDE_OBJECT_KEY`:case`INSIDE_OBJECT_AFTER_KEY`:case`INSIDE_OBJECT_AFTER_COMMA`:case`INSIDE_OBJECT_START`:case`INSIDE_OBJECT_BEFORE_VALUE`:case`INSIDE_OBJECT_AFTER_VALUE`:s+=`}`;break;case`INSIDE_ARRAY_START`:case`INSIDE_ARRAY_AFTER_COMMA`:case`INSIDE_ARRAY_AFTER_VALUE`:s+=`]`;break;case`INSIDE_LITERAL`:{let t=e.substring(r,e.length);`true`.startsWith(t)?s+=`true`.slice(t.length):`false`.startsWith(t)?s+=`false`.slice(t.length):`null`.startsWith(t)&&(s+=`null`.slice(t.length))}}return s}async function Xv(e){if(e===void 0)return{value:void 0,state:`undefined-input`};let t=await Uf({text:e});return t.success?{value:t.value,state:`successful-parse`}:(t=await Uf({text:Yv(e)}),t.success?{value:t.value,state:`repaired-parse`}:{value:void 0,state:`failed-parse`})}function Zv(e){return e.type.startsWith(`tool-`)}function Qv(e){return e.type.split(`-`).slice(1).join(`-`)}function $v({lastMessage:e,messageId:t}){return{message:e?.role===`assistant`?e:{id:t,metadata:void 0,role:`assistant`,parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function ey({stream:e,messageMetadataSchema:t,dataPartSchemas:n,runUpdateMessageJob:r,onError:i,onToolCall:a,onData:o}){return e.pipeThrough(new TransformStream({async transform(e,s){await r(async({state:r,write:c})=>{function l(e){let t=r.message.parts.filter(Zv).find(t=>t.toolCallId===e);if(t==null)throw Error(`tool-output-error must be preceded by a tool-input-available`);return t}function u(e){let t=r.message.parts.filter(e=>e.type===`dynamic-tool`).find(t=>t.toolCallId===e);if(t==null)throw Error(`tool-output-error must be preceded by a tool-input-available`);return t}function d(e){let t=r.message.parts.find(t=>Zv(t)&&t.toolCallId===e.toolCallId),n=e,i=t;t==null?r.message.parts.push({type:`tool-${e.toolName}`,toolCallId:e.toolCallId,state:e.state,input:n.input,output:n.output,rawInput:n.rawInput,errorText:n.errorText,providerExecuted:n.providerExecuted,preliminary:n.preliminary,...n.providerMetadata==null?{}:{callProviderMetadata:n.providerMetadata}}):(t.state=e.state,i.input=n.input,i.output=n.output,i.errorText=n.errorText,i.rawInput=n.rawInput,i.preliminary=n.preliminary,i.providerExecuted=n.providerExecuted??t.providerExecuted,n.providerMetadata!=null&&t.state===`input-available`&&(t.callProviderMetadata=n.providerMetadata))}function f(e){let t=r.message.parts.find(t=>t.type===`dynamic-tool`&&t.toolCallId===e.toolCallId),n=e,i=t;t==null?r.message.parts.push({type:`dynamic-tool`,toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:n.input,output:n.output,errorText:n.errorText,preliminary:n.preliminary,providerExecuted:n.providerExecuted,...n.providerMetadata==null?{}:{callProviderMetadata:n.providerMetadata}}):(t.state=e.state,i.toolName=e.toolName,i.input=n.input,i.output=n.output,i.errorText=n.errorText,i.rawInput=n.rawInput??i.rawInput,i.preliminary=n.preliminary,i.providerExecuted=n.providerExecuted??t.providerExecuted,n.providerMetadata!=null&&t.state===`input-available`&&(t.callProviderMetadata=n.providerMetadata))}async function p(e){if(e!=null){let n=r.message.metadata==null?e:Jv(r.message.metadata,e);t!=null&&await Bf({value:n,schema:t}),r.message.metadata=n}}switch(e.type){case`text-start`:{let t={type:`text`,text:``,providerMetadata:e.providerMetadata,state:`streaming`};r.activeTextParts[e.id]=t,r.message.parts.push(t),c();break}case`text-delta`:{let t=r.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=e.providerMetadata??t.providerMetadata,c();break}case`text-end`:{let t=r.activeTextParts[e.id];t.state=`done`,t.providerMetadata=e.providerMetadata??t.providerMetadata,delete r.activeTextParts[e.id],c();break}case`reasoning-start`:{let t={type:`reasoning`,text:``,providerMetadata:e.providerMetadata,state:`streaming`};r.activeReasoningParts[e.id]=t,r.message.parts.push(t),c();break}case`reasoning-delta`:{let t=r.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=e.providerMetadata??t.providerMetadata,c();break}case`reasoning-end`:{let t=r.activeReasoningParts[e.id];t.providerMetadata=e.providerMetadata??t.providerMetadata,t.state=`done`,delete r.activeReasoningParts[e.id],c();break}case`file`:r.message.parts.push({type:`file`,mediaType:e.mediaType,url:e.url}),c();break;case`source-url`:r.message.parts.push({type:`source-url`,sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),c();break;case`source-document`:r.message.parts.push({type:`source-document`,sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),c();break;case`tool-input-start`:{let t=r.message.parts.filter(Zv);r.partialToolCalls[e.toolCallId]={text:``,toolName:e.toolName,index:t.length,dynamic:e.dynamic},e.dynamic?f({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-streaming`,input:void 0,providerExecuted:e.providerExecuted}):d({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-streaming`,input:void 0,providerExecuted:e.providerExecuted}),c();break}case`tool-input-delta`:{let t=r.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;let{value:n}=await Xv(t.text);t.dynamic?f({toolCallId:e.toolCallId,toolName:t.toolName,state:`input-streaming`,input:n}):d({toolCallId:e.toolCallId,toolName:t.toolName,state:`input-streaming`,input:n}),c();break}case`tool-input-available`:e.dynamic?f({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-available`,input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):d({toolCallId:e.toolCallId,toolName:e.toolName,state:`input-available`,input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),c(),a&&!e.providerExecuted&&await a({toolCall:e});break;case`tool-input-error`:e.dynamic?f({toolCallId:e.toolCallId,toolName:e.toolName,state:`output-error`,input:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):d({toolCallId:e.toolCallId,toolName:e.toolName,state:`output-error`,input:void 0,rawInput:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),c();break;case`tool-output-available`:if(e.dynamic){let t=u(e.toolCallId);f({toolCallId:e.toolCallId,toolName:t.toolName,state:`output-available`,input:t.input,output:e.output,preliminary:e.preliminary})}else{let t=l(e.toolCallId);d({toolCallId:e.toolCallId,toolName:Qv(t),state:`output-available`,input:t.input,output:e.output,providerExecuted:e.providerExecuted,preliminary:e.preliminary})}c();break;case`tool-output-error`:if(e.dynamic){let t=u(e.toolCallId);f({toolCallId:e.toolCallId,toolName:t.toolName,state:`output-error`,input:t.input,errorText:e.errorText,providerExecuted:e.providerExecuted})}else{let t=l(e.toolCallId);d({toolCallId:e.toolCallId,toolName:Qv(t),state:`output-error`,input:t.input,rawInput:t.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted})}c();break;case`start-step`:r.message.parts.push({type:`step-start`});break;case`finish-step`:r.activeTextParts={},r.activeReasoningParts={};break;case`start`:e.messageId!=null&&(r.message.id=e.messageId),await p(e.messageMetadata),(e.messageId!=null||e.messageMetadata!=null)&&c();break;case`finish`:e.finishReason!=null&&(r.finishReason=e.finishReason),await p(e.messageMetadata),e.messageMetadata!=null&&c();break;case`message-metadata`:await p(e.messageMetadata),e.messageMetadata!=null&&c();break;case`error`:i?.(Error(e.errorText));break;default:if(qv(e)){n?.[e.type]!=null&&await Bf({value:e.data,schema:n[e.type]});let t=e;if(t.transient){o?.(t);break}let i=t.id==null?void 0:r.message.parts.find(e=>t.type===e.type&&t.id===e.id);i==null?r.message.parts.push(t):i.data=t.data,o?.(t),c()}}s.enqueue(e)})}}))}function ty({messageId:e,originalMessages:t=[],onFinish:n,onError:r,stream:i}){let a=t?.[t.length-1];a?.role===`assistant`?e=a.id:a=void 0;let o=!1,s=i.pipeThrough(new TransformStream({transform(t,n){if(t.type===`start`){let n=t;n.messageId==null&&e!=null&&(n.messageId=e)}t.type===`abort`&&(o=!0),n.enqueue(t)}}));if(n==null)return s;let c=$v({lastMessage:a?structuredClone(a):void 0,messageId:e??``}),l=async e=>{await e({state:c,write:()=>{}})},u=!1,d=async()=>{if(u||!n)return;u=!0;let e=c.message.id===a?.id;await n({isAborted:o,isContinuation:e,responseMessage:c.message,messages:[...e?t.slice(0,-1):t,c.message],finishReason:c.finishReason})};return ey({stream:s,runUpdateMessageJob:l,onError:r}).pipeThrough(new TransformStream({transform(e,t){t.enqueue(e)},async cancel(){await d()},async flush(){await d()}}))}function ny({response:e,status:t,statusText:n,headers:r,stream:i,consumeSseStream:a}){let o=i.pipeThrough(new Uv);if(a){let[e,t]=o.tee();o=e,a({stream:t})}Vv({response:e,status:t,statusText:n,headers:Object.fromEntries(zv(r,Wv).entries()),stream:o.pipeThrough(new TextEncoderStream)})}function ry(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=function(){let e=this.getReader(),t=!1;async function n(n){t=!0;try{n&&await e.cancel?.call(e)}finally{try{e.releaseLock()}catch{}}}return{async next(){if(t)return{done:!0,value:void 0};let{done:r,value:i}=await e.read();return r?(await n(!0),{done:!0,value:void 0}):{done:!1,value:i}},async return(){return await n(!0),{done:!0,value:void 0}},async throw(e){throw await n(!0),e}}},t}async function iy({stream:e,onError:t}){let n=e.getReader();try{for(;;){let{done:e}=await n.read();if(e)break}}catch(e){t?.(e)}finally{n.releaseLock()}}function ay(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function oy(){let e=[],t=null,n=!1,r=ay(),i=()=>{n=!0,r.resolve(),e.forEach(e=>e.cancel()),e=[],t?.close()},a=async()=>{if(n&&e.length===0){t?.close();return}if(e.length===0)return r=ay(),await r.promise,a();try{let{value:r,done:i}=await e[0].read();i?(e.shift(),e.length>0?await a():n&&t?.close()):t?.enqueue(r)}catch(n){t?.error(n),e.shift(),i()}};return{stream:new ReadableStream({start(e){t=e},pull:a,async cancel(){for(let t of e)await t.cancel();e=[],n=!0}}),addStream:t=>{if(n)throw Error(`Cannot add inner stream: outer stream is closed`);e.push(t.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&t?.close()},terminate:i}}var sy=class{constructor(){this.status={type:`pending`},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise||=new Promise((e,t)=>{this.status.type===`resolved`?e(this.status.value):this.status.type===`rejected`&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise}resolve(e){var t;this.status={type:`resolved`,value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:`rejected`,error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}};function cy(){return(globalThis==null?void 0:globalThis.performance)?.now()??Date.now()}function ly({tools:e,generatorStream:t,tracer:n,telemetry:r,system:i,messages:a,abortSignal:o,repairToolCall:s,experimental_context:c}){let l=null,u=new ReadableStream({start(e){l=e}}),d=new Set,f=new Map,p=!1,m;function ee(){p&&d.size===0&&(m!=null&&l.enqueue(m),l.close())}let h=new TransformStream({async transform(t,u){let p=t.type;switch(p){case`stream-start`:case`text-start`:case`text-delta`:case`text-end`:case`reasoning-start`:case`reasoning-delta`:case`reasoning-end`:case`tool-input-start`:case`tool-input-delta`:case`tool-input-end`:case`source`:case`response-metadata`:case`error`:case`raw`:u.enqueue(t);break;case`file`:u.enqueue({type:`file`,file:new Av({data:t.data,mediaType:t.mediaType})});break;case`finish`:m={type:`finish`,finishReason:t.finishReason,usage:t.usage,providerMetadata:t.providerMetadata};break;case`tool-call`:try{let p=await jv({toolCall:t,tools:e,repairToolCall:s,system:i,messages:a});if(u.enqueue(p),p.invalid){l.enqueue({type:`tool-error`,toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,error:gf(p.error),dynamic:!0});break}let m=e[p.toolName];if(f.set(p.toolCallId,p.input),m.onInputAvailable!=null&&await m.onInputAvailable({input:p.input,toolCallId:p.toolCallId,messages:a,abortSignal:o,experimental_context:c}),m.execute!=null&&p.providerExecuted!==!0){let e=hf();d.add(e),vv({name:`ai.toolCall`,attributes:bv({telemetry:r,attributes:{...fv({operationId:`ai.toolCall`,telemetry:r}),"ai.toolCall.name":p.toolName,"ai.toolCall.id":p.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(p.input)}}}),tracer:n,fn:async t=>{let n;try{let e=mm({execute:m.execute.bind(m),input:p.input,options:{toolCallId:p.toolCallId,messages:a,abortSignal:o,experimental_context:c}});for await(let t of e)l.enqueue({...p,type:`tool-result`,output:t.output,...t.type===`preliminary`&&{preliminary:!0}}),t.type===`final`&&(n=t.output)}catch(n){yv(t,n),l.enqueue({...p,type:`tool-error`,error:n}),d.delete(e),ee();return}d.delete(e),ee();try{t.setAttributes(bv({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(n)}}}))}catch{}}})}}catch(e){l.enqueue({type:`error`,error:e})}break;case`tool-result`:{let e=t.toolName;t.isError?l.enqueue({type:`tool-error`,toolCallId:t.toolCallId,toolName:e,input:f.get(t.toolCallId),providerExecuted:t.providerExecuted,error:t.result}):u.enqueue({type:`tool-result`,toolCallId:t.toolCallId,toolName:e,input:f.get(t.toolCallId),output:t.result,providerExecuted:t.providerExecuted});break}default:{let e=p;throw Error(`Unhandled chunk type: ${e}`)}}},flush(){p=!0,ee()}});return new ReadableStream({async start(e){return Promise.all([t.pipeThrough(h).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),u.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])}})}var uy=mf({prefix:`aitxt`,size:24});function dy({model:e,tools:t,toolChoice:n,system:r,prompt:i,messages:a,maxRetries:o,abortSignal:s,headers:c,stopWhen:l=Pv(1),experimental_output:u,experimental_telemetry:d,prepareStep:f,providerOptions:p,experimental_activeTools:m,activeTools:ee=m,experimental_repairToolCall:h,experimental_transform:te,experimental_download:ne,includeRawChunks:re=!1,onChunk:ie,onError:ae=({error:e})=>{console.error(e)},onFinish:g,onAbort:_,onStepFinish:v,experimental_context:y,_internal:{now:b=cy,generateId:oe=uy,currentDate:se=()=>new Date}={},...ce}){return new py({model:P_(e),telemetry:d,headers:c,settings:ce,maxRetries:o,abortSignal:s,system:r,prompt:i,messages:a,tools:t,toolChoice:n,transforms:wv(te),activeTools:ee,repairToolCall:h,stopConditions:wv(l),output:u,providerOptions:p,prepareStep:f,includeRawChunks:re,onChunk:ie,onError:ae,onFinish:g,onAbort:_,onStepFinish:v,now:b,currentDate:se,generateId:oe,experimental_context:y,download:ne})}function fy(e){if(!e)return new TransformStream({transform(e,t){t.enqueue({part:e,partialOutput:void 0})}});let t,n=``,r=``,i=``;function a({controller:e,partialOutput:n=void 0}){e.enqueue({part:{type:`text-delta`,id:t,text:r},partialOutput:n}),r=``}return new TransformStream({async transform(o,s){if(o.type===`finish-step`&&r.length>0&&a({controller:s}),o.type!==`text-delta`&&o.type!==`text-start`&&o.type!==`text-end`){s.enqueue({part:o,partialOutput:void 0});return}if(t==null)t=o.id;else if(o.id!==t){s.enqueue({part:o,partialOutput:void 0});return}if(o.type===`text-start`){s.enqueue({part:o,partialOutput:void 0});return}if(o.type===`text-end`){r.length>0&&a({controller:s}),s.enqueue({part:o,partialOutput:void 0});return}n+=o.text,r+=o.text;let c=await e.parsePartial({text:n});if(c!=null){let e=JSON.stringify(c.partial);e!==i&&(a({controller:s,partialOutput:c.partial}),i=e)}}})}var py=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:i,abortSignal:a,system:o,prompt:s,messages:c,tools:l,toolChoice:u,transforms:d,activeTools:f,repairToolCall:p,stopConditions:m,output:ee,providerOptions:h,prepareStep:te,includeRawChunks:ne,now:re,currentDate:ie,generateId:ae,onChunk:g,onError:_,onFinish:v,onAbort:y,onStepFinish:b,experimental_context:oe,download:se}){this._totalUsage=new sy,this._finishReason=new sy,this._steps=new sy,this.output=ee,this.includeRawChunks=ne,this.tools=l;let ce,x=[],S=[],le,ue,de={},fe=[],pe=[],me,he={},ge={},_e=new TransformStream({async transform(e,t){t.enqueue(e);let{part:n}=e;if((n.type===`text-delta`||n.type===`reasoning-delta`||n.type===`source`||n.type===`tool-call`||n.type===`tool-result`||n.type===`tool-input-start`||n.type===`tool-input-delta`||n.type===`raw`)&&await g?.({chunk:n}),n.type===`error`&&await _({error:dv(n.error)}),n.type===`text-start`&&(he[n.id]={type:`text`,text:``,providerMetadata:n.providerMetadata},x.push(he[n.id])),n.type===`text-delta`){let e=he[n.id];if(e==null){t.enqueue({part:{type:`error`,error:`text part ${n.id} not found`},partialOutput:void 0});return}e.text+=n.text,e.providerMetadata=n.providerMetadata??e.providerMetadata}if(n.type===`text-end`){let e=he[n.id];if(e==null){t.enqueue({part:{type:`error`,error:`text part ${n.id} not found`},partialOutput:void 0});return}e.providerMetadata=n.providerMetadata??e.providerMetadata,delete he[n.id]}if(n.type===`reasoning-start`&&(ge[n.id]={type:`reasoning`,text:``,providerMetadata:n.providerMetadata},x.push(ge[n.id])),n.type===`reasoning-delta`){let e=ge[n.id];if(e==null){t.enqueue({part:{type:`error`,error:`reasoning part ${n.id} not found`},partialOutput:void 0});return}e.text+=n.text,e.providerMetadata=n.providerMetadata??e.providerMetadata}if(n.type===`reasoning-end`){let e=ge[n.id];if(e==null){t.enqueue({part:{type:`error`,error:`reasoning part ${n.id} not found`},partialOutput:void 0});return}e.providerMetadata=n.providerMetadata??e.providerMetadata,delete ge[n.id]}if(n.type===`file`&&x.push({type:`file`,file:n.file}),n.type===`source`&&x.push(n),n.type===`tool-call`&&x.push(n),n.type===`tool-result`&&!n.preliminary&&x.push(n),n.type===`tool-error`&&x.push(n),n.type===`start-step`&&(de=n.request,fe=n.warnings),n.type===`finish-step`){let e=Rv({content:x,tools:l}),t=new Nv({content:x,finishReason:n.finishReason,usage:n.usage,warnings:fe,request:de,response:{...n.response,messages:[...S,...e]},providerMetadata:n.providerMetadata});await b?.(t),Vg(fe),pe.push(t),x=[],ge={},he={},S.push(...e),ce.resolve()}n.type===`finish`&&(ue=n.totalUsage,le=n.finishReason)},async flush(e){try{if(pe.length===0){let e=new s_({message:`No output generated. Check the stream for errors.`});Ee._finishReason.reject(e),Ee._totalUsage.reject(e),Ee._steps.reject(e);return}let e=le??`unknown`,n=ue??{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};Ee._finishReason.resolve(e),Ee._totalUsage.resolve(n),Ee._steps.resolve(pe);let r=pe[pe.length-1];await v?.({finishReason:e,totalUsage:n,usage:r.usage,content:r.content,text:r.text,reasoningText:r.reasoningText,reasoning:r.reasoning,files:r.files,sources:r.sources,toolCalls:r.toolCalls,staticToolCalls:r.staticToolCalls,dynamicToolCalls:r.dynamicToolCalls,toolResults:r.toolResults,staticToolResults:r.staticToolResults,dynamicToolResults:r.dynamicToolResults,request:r.request,response:r.response,warnings:r.warnings,providerMetadata:r.providerMetadata,steps:pe}),me.setAttributes(bv({telemetry:t,attributes:{"ai.response.finishReason":e,"ai.response.text":{output:()=>r.text},"ai.response.toolCalls":{output:()=>r.toolCalls?.length?JSON.stringify(r.toolCalls):void 0},"ai.response.providerMetadata":JSON.stringify(r.providerMetadata),"ai.usage.inputTokens":n.inputTokens,"ai.usage.outputTokens":n.outputTokens,"ai.usage.totalTokens":n.totalTokens,"ai.usage.reasoningTokens":n.reasoningTokens,"ai.usage.cachedInputTokens":n.cachedInputTokens}}))}catch(t){e.error(t)}finally{me.end()}}}),ve=oy();this.addStream=ve.addStream,this.closeStream=ve.close;let ye=ve.stream.getReader(),be=new ReadableStream({async start(e){e.enqueue({type:`start`})},async pull(e){function t(){y?.({steps:pe}),e.enqueue({type:`abort`}),e.close()}try{let{done:n,value:r}=await ye.read();if(n){e.close();return}if(a?.aborted){t();return}e.enqueue(r)}catch(n){_f(n)&&a?.aborted?t():e.error(n)}},cancel(e){return ve.stream.cancel(e)}});for(let e of d)be=be.pipeThrough(e({tools:l,stopStream(){ve.terminate()}}));this.baseStream=be.pipeThrough(fy(ee)).pipeThrough(_e);let{maxRetries:xe,retry:Se}=Ov({maxRetries:i,abortSignal:a}),Ce=_v(t),we=Z_(r),Te=pv({model:e,telemetry:t,headers:n,settings:{...we,maxRetries:xe}}),Ee=this;vv({name:`ai.streamText`,attributes:bv({telemetry:t,attributes:{...fv({operationId:`ai.streamText`,telemetry:t}),...Te,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:c})}}}),tracer:Ce,endWhenDone:!1,fn:async r=>{me=r;async function i({currentStep:r,responseMessages:d,usage:ne}){let g=Ee.includeRawChunks;ce=new sy;let _=await uv({system:o,prompt:s,messages:c}),v=[..._.messages,...d],y=await te?.({model:e,steps:pe,stepNumber:pe.length,messages:v}),b=P_(y?.model??e),x=await q_({prompt:{system:y?.system??_.system,messages:y?.messages??v},supportedUrls:await b.supportedUrls,download:se}),{toolChoice:S,tools:le}=$_({tools:l,toolChoice:y?.toolChoice??u,activeTools:y?.activeTools??f}),{result:{stream:ue,response:de,request:fe},doStreamSpan:me,startTimestampMs:he}=await Se(()=>vv({name:`ai.streamText.doStream`,attributes:bv({telemetry:t,attributes:{...fv({operationId:`ai.streamText.doStream`,telemetry:t}),...Te,"ai.model.provider":b.provider,"ai.model.id":b.modelId,"ai.prompt.messages":{input:()=>xv(x)},"ai.prompt.tools":{input:()=>le?.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>S==null?void 0:JSON.stringify(S)},"gen_ai.system":b.provider,"gen_ai.request.model":b.modelId,"gen_ai.request.frequency_penalty":we.frequencyPenalty,"gen_ai.request.max_tokens":we.maxOutputTokens,"gen_ai.request.presence_penalty":we.presencePenalty,"gen_ai.request.stop_sequences":we.stopSequences,"gen_ai.request.temperature":we.temperature,"gen_ai.request.top_k":we.topK,"gen_ai.request.top_p":we.topP}}),tracer:Ce,endWhenDone:!1,fn:async e=>({startTimestampMs:re(),doStreamSpan:e,result:await b.doStream({...we,tools:le,toolChoice:S,responseFormat:ee?.responseFormat,prompt:x,providerOptions:h,abortSignal:a,headers:n,includeRawChunks:g})})})),ge=ly({tools:l,generatorStream:ue,tracer:Ce,telemetry:t,system:o,messages:v,repairToolCall:p,abortSignal:a,experimental_context:oe}),_e=fe??{},ve=[],ye=[],be,xe={},De=`unknown`,Oe={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},ke,Ae=!0,je={id:ae(),timestamp:ie(),modelId:e.modelId},Me=``;Ee.addStream(ge.pipeThrough(new TransformStream({async transform(e,t){if(e.type===`stream-start`){be=e.warnings;return}if(Ae){let e=re()-he;Ae=!1,me.addEvent(`ai.stream.firstChunk`,{"ai.response.msToFirstChunk":e}),me.setAttributes({"ai.response.msToFirstChunk":e}),t.enqueue({type:`start-step`,request:_e,warnings:be??[]})}let n=e.type;switch(n){case`text-start`:case`text-end`:t.enqueue(e);break;case`text-delta`:e.delta.length>0&&(t.enqueue({type:`text-delta`,id:e.id,text:e.delta,providerMetadata:e.providerMetadata}),Me+=e.delta);break;case`reasoning-start`:case`reasoning-end`:t.enqueue(e);break;case`reasoning-delta`:t.enqueue({type:`reasoning-delta`,id:e.id,text:e.delta,providerMetadata:e.providerMetadata});break;case`tool-call`:t.enqueue(e),ve.push(e);break;case`tool-result`:t.enqueue(e),e.preliminary||ye.push(e);break;case`tool-error`:t.enqueue(e),ye.push(e);break;case`response-metadata`:je={id:e.id??je.id,timestamp:e.timestamp??je.timestamp,modelId:e.modelId??je.modelId};break;case`finish`:{Oe=e.usage,De=e.finishReason,ke=e.providerMetadata;let t=re()-he;me.addEvent(`ai.stream.finish`),me.setAttributes({"ai.response.msToFinish":t,"ai.response.avgOutputTokensPerSecond":1e3*(Oe.outputTokens??0)/t});break}case`file`:t.enqueue(e);break;case`source`:t.enqueue(e);break;case`tool-input-start`:{xe[e.id]=e.toolName;let n=l?.[e.toolName];n?.onInputStart!=null&&await n.onInputStart({toolCallId:e.id,messages:v,abortSignal:a,experimental_context:oe}),t.enqueue({...e,dynamic:n?.type===`dynamic`});break}case`tool-input-end`:delete xe[e.id],t.enqueue(e);break;case`tool-input-delta`:{let n=xe[e.id],r=l?.[n];r?.onInputDelta!=null&&await r.onInputDelta({inputTextDelta:e.delta,toolCallId:e.id,messages:v,abortSignal:a,experimental_context:oe}),t.enqueue(e);break}case`error`:t.enqueue(e),De=`error`;break;case`raw`:g&&t.enqueue(e);break;default:{let e=n;throw Error(`Unknown chunk type: ${e}`)}}},async flush(e){let n=ve.length>0?JSON.stringify(ve):void 0;try{me.setAttributes(bv({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>Me},"ai.response.toolCalls":{output:()=>n},"ai.response.id":je.id,"ai.response.model":je.modelId,"ai.response.timestamp":je.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(ke),"ai.usage.inputTokens":Oe.inputTokens,"ai.usage.outputTokens":Oe.outputTokens,"ai.usage.totalTokens":Oe.totalTokens,"ai.usage.reasoningTokens":Oe.reasoningTokens,"ai.usage.cachedInputTokens":Oe.cachedInputTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":je.id,"gen_ai.response.model":je.modelId,"gen_ai.usage.input_tokens":Oe.inputTokens,"gen_ai.usage.output_tokens":Oe.outputTokens}}))}catch{}finally{me.end()}e.enqueue({type:`finish-step`,finishReason:De,usage:Oe,providerMetadata:ke,response:{...je,headers:de?.headers}});let a=Sv(ne,Oe);await ce.promise;let o=ve.filter(e=>e.providerExecuted!==!0),s=ye.filter(e=>e.providerExecuted!==!0);if(o.length>0&&s.length===o.length&&!await Fv({stopConditions:m,steps:pe})){d.push(...Rv({content:pe[pe.length-1].content,tools:l}));try{await i({currentStep:r+1,responseMessages:d,usage:a})}catch(t){e.enqueue({type:`error`,error:t}),Ee.closeStream()}}else e.enqueue({type:`finish`,finishReason:De,totalUsage:a}),Ee.closeStream()}})))}await i({currentStep:0,responseMessages:[],usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}})}}).catch(e=>{Ee.addStream(new ReadableStream({start(t){t.enqueue({type:`error`,error:e}),t.close()}})),Ee.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return ry(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type===`text-delta`&&t.enqueue(e.text)}})))}get fullStream(){return ry(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await iy({stream:this.fullStream,onError:e?.onError})}catch(n){(t=e?.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new Lg;return ry(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:i=!0,sendSources:a=!1,sendStart:o=!0,sendFinish:s=!0,onError:c=Pr}={}){let l=t==null?void 0:Kv({originalMessages:e,responseMessageId:t}),u={},d=e=>{let t=u[e];return this.tools?.[t]?.type===`dynamic`?!0:void 0};return ry(ty({stream:this.fullStream.pipeThrough(new TransformStream({transform:async(e,t)=>{let n=r?.({part:e}),f=e.type;switch(f){case`text-start`:t.enqueue({type:`text-start`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`text-delta`:t.enqueue({type:`text-delta`,id:e.id,delta:e.text,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`text-end`:t.enqueue({type:`text-end`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`reasoning-start`:t.enqueue({type:`reasoning-start`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`reasoning-delta`:i&&t.enqueue({type:`reasoning-delta`,id:e.id,delta:e.text,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`reasoning-end`:t.enqueue({type:`reasoning-end`,id:e.id,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`file`:t.enqueue({type:`file`,mediaType:e.file.mediaType,url:`data:${e.file.mediaType};base64,${e.file.base64}`});break;case`source`:a&&e.sourceType===`url`&&t.enqueue({type:`source-url`,sourceId:e.id,url:e.url,title:e.title,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}}),a&&e.sourceType===`document`&&t.enqueue({type:`source-document`,sourceId:e.id,mediaType:e.mediaType,title:e.title,filename:e.filename,...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata}});break;case`tool-input-start`:{u[e.id]=e.toolName;let n=d(e.id);t.enqueue({type:`tool-input-start`,toolCallId:e.id,toolName:e.toolName,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...n==null?{}:{dynamic:n}});break}case`tool-input-delta`:t.enqueue({type:`tool-input-delta`,toolCallId:e.id,inputTextDelta:e.delta});break;case`tool-call`:{u[e.toolCallId]=e.toolName;let n=d(e.toolCallId);e.invalid?t.enqueue({type:`tool-input-error`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata},...n==null?{}:{dynamic:n},errorText:c(e.error)}):t.enqueue({type:`tool-input-available`,toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...e.providerMetadata==null?{}:{providerMetadata:e.providerMetadata},...n==null?{}:{dynamic:n}});break}case`tool-result`:{let n=d(e.toolCallId);t.enqueue({type:`tool-output-available`,toolCallId:e.toolCallId,output:e.output,...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...e.preliminary==null?{}:{preliminary:e.preliminary},...n==null?{}:{dynamic:n}});break}case`tool-error`:{let n=d(e.toolCallId);t.enqueue({type:`tool-output-error`,toolCallId:e.toolCallId,errorText:c(e.error),...e.providerExecuted==null?{}:{providerExecuted:e.providerExecuted},...n==null?{}:{dynamic:n}});break}case`error`:t.enqueue({type:`error`,errorText:c(e.error)});break;case`start-step`:t.enqueue({type:`start-step`});break;case`finish-step`:t.enqueue({type:`finish-step`});break;case`start`:o&&t.enqueue({type:`start`,...n==null?{}:{messageMetadata:n},...l==null?{}:{messageId:l}});break;case`finish`:s&&t.enqueue({type:`finish`,finishReason:e.finishReason,...n==null?{}:{messageMetadata:n}});break;case`abort`:t.enqueue(e);break;case`tool-input-end`:break;case`raw`:break;default:{let e=f;throw Error(`Unknown chunk type: ${e}`)}}n!=null&&f!==`start`&&f!==`finish`&&t.enqueue({type:`message-metadata`,messageMetadata:n})}})),messageId:l??t?.(),originalMessages:e,onFinish:n,onError:c}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:i,sendReasoning:a,sendSources:o,sendFinish:s,sendStart:c,onError:l,...u}={}){ny({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:n,onFinish:r,messageMetadata:i,sendReasoning:a,sendSources:o,sendFinish:s,sendStart:c,onError:l}),...u})}pipeTextStreamToResponse(e,t){Hv({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:i,sendSources:a,sendFinish:o,sendStart:s,onError:c,...l}={}){return Gv({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:n,messageMetadata:r,sendReasoning:i,sendSources:a,sendFinish:o,sendStart:s,onError:c}),...l})}toTextStreamResponse(e){return Bv({textStream:this.textStream,...e})}};mf({prefix:`aiobj`,size:24}),mf({prefix:`aiobj`,size:24}),Mg({},{object:()=>hy,text:()=>my});var my=()=>({type:`text`,responseFormat:{type:`text`},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),hy=({schema:e})=>{let t=om(e);return{type:`object`,responseFormat:{type:`json`,schema:t.jsonSchema},async parsePartial({text:e}){let t=await Xv(e);switch(t.state){case`failed-parse`:case`undefined-input`:return;case`repaired-parse`:case`successful-parse`:return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},n){let r=await Uf({text:e});if(!r.success)throw new n_({message:`No object generated: could not parse the response.`,cause:r.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});let i=await Vf({value:r.value,schema:t});if(!i.success)throw new n_({message:`No object generated: response did not match schema.`,cause:i.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});return i.value}}};function gy(e){return e?.providerOptions?.openaiCompatible??{}}function _y(e){let t=[];for(let{role:n,content:r,...i}of e){let e=gy({...i});switch(n){case`system`:t.push({role:`system`,content:r,...e});break;case`user`:if(r.length===1&&r[0].type===`text`){t.push({role:`user`,content:r[0].text,...gy(r[0])});break}t.push({role:`user`,content:r.map(e=>{let t=gy(e);switch(e.type){case`text`:return{type:`text`,text:e.text,...t};case`file`:if(e.mediaType.startsWith(`image/`)){let n=e.mediaType===`image/*`?`image/jpeg`:e.mediaType;return{type:`image_url`,image_url:{url:e.data instanceof URL?e.data.toString():`data:${n};base64,${dm(e.data)}`},...t}}else throw new xi({functionality:`file part media type ${e.mediaType}`})}}),...e});break;case`assistant`:{let n=``,i=[];for(let e of r){let t=gy(e);switch(e.type){case`text`:n+=e.text;break;case`tool-call`:i.push({id:e.toolCallId,type:`function`,function:{name:e.toolName,arguments:JSON.stringify(e.input)},...t});break}}t.push({role:`assistant`,content:n,tool_calls:i.length>0?i:void 0,...e});break}case`tool`:for(let e of r){let n=e.output,r;switch(n.type){case`text`:case`error-text`:r=n.value;break;case`content`:case`json`:case`error-json`:r=JSON.stringify(n.value);break}let i=gy(e);t.push({role:`tool`,tool_call_id:e.toolCallId,content:r,...i})}break;default:{let e=n;throw Error(`Unsupported role: ${e}`)}}}return t}function vy({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n==null?void 0:new Date(n*1e3)}}function yy(e){switch(e){case`stop`:return`stop`;case`length`:return`length`;case`content_filter`:return`content-filter`;case`function_call`:case`tool_calls`:return`tool-calls`;default:return`unknown`}}var by=H({user:R().optional(),reasoningEffort:R().optional(),textVerbosity:R().optional()}),xy={errorSchema:H({error:H({message:R(),type:R().nullish(),param:ql().nullish(),code:tu([R(),B()]).nullish()})}),errorToMessage:e=>e.error.message};function Sy({tools:e,toolChoice:t}){e=e?.length?e:void 0;let n=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let r=[];for(let t of e)t.type===`provider-defined`?n.push({type:`unsupported-tool`,tool:t}):r.push({type:`function`,function:{name:t.name,description:t.description,parameters:t.inputSchema}});if(t==null)return{tools:r,toolChoice:void 0,toolWarnings:n};let i=t.type;switch(i){case`auto`:case`none`:case`required`:return{tools:r,toolChoice:i,toolWarnings:n};case`tool`:return{tools:r,toolChoice:{type:`function`,function:{name:t.toolName}},toolWarnings:n};default:throw new xi({functionality:`tool choice type: ${i}`})}}var Cy=class{constructor(e,t){this.specificationVersion=`v2`,this.modelId=e,this.config=t;let n=t.errorStructure??xy;this.chunkSchema=Ey(n.errorSchema),this.failedResponseHandler=Zf(n),this.supportsStructuredOutputs=t.supportsStructuredOutputs??!1}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(`.`)[0].trim()}get supportedUrls(){var e;return(e=this.config).supportedUrls?.call(e)??{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:i,frequencyPenalty:a,presencePenalty:o,providerOptions:s,stopSequences:c,responseFormat:l,seed:u,toolChoice:d,tools:f}){let p=[],m=Object.assign(await Kf({provider:`openai-compatible`,providerOptions:s,schema:by})??{},await Kf({provider:this.providerOptionsName,providerOptions:s,schema:by})??{});i!=null&&p.push({type:`unsupported-setting`,setting:`topK`}),l?.type===`json`&&l.schema!=null&&!this.supportsStructuredOutputs&&p.push({type:`unsupported-setting`,setting:`responseFormat`,details:`JSON response format schema is only supported with structuredOutputs`});let{tools:ee,toolChoice:h,toolWarnings:te}=Sy({tools:f,toolChoice:d});return{args:{model:this.modelId,user:m.user,max_tokens:t,temperature:n,top_p:r,frequency_penalty:a,presence_penalty:o,response_format:l?.type===`json`?this.supportsStructuredOutputs===!0&&l.schema!=null?{type:`json_schema`,json_schema:{schema:l.schema,name:l.name??`response`,description:l.description}}:{type:`json_object`}:void 0,stop:c,seed:u,...Object.fromEntries(Object.entries(s?.[this.providerOptionsName]??{}).filter(([e])=>!Object.keys(by.shape).includes(e))),reasoning_effort:m.reasoningEffort,verbosity:m.textVerbosity,messages:_y(e),tools:ee,tool_choice:h},warnings:[...p,...te]}}async doGenerate(e){var t;let{args:n,warnings:r}=await this.getArgs({...e}),i=JSON.stringify(n),{responseHeaders:a,value:o,rawValue:s}=await Jf({url:this.config.url({path:`/chat/completions`,modelId:this.modelId}),headers:uf(this.config.headers(),e.headers),body:n,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:$f(Ty),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o.choices[0],l=[],u=c.message.content;u!=null&&u.length>0&&l.push({type:`text`,text:u});let d=c.message.reasoning_content??c.message.reasoning;if(d!=null&&d.length>0&&l.push({type:`reasoning`,text:d}),c.message.tool_calls!=null)for(let e of c.message.tool_calls)l.push({type:`tool-call`,toolCallId:e.id??hf(),toolName:e.function.name,input:e.function.arguments});let f={[this.providerOptionsName]:{},...await((t=this.config.metadataExtractor)?.extractMetadata)?.call(t,{parsedBody:s})},p=o.usage?.completion_tokens_details;return p?.accepted_prediction_tokens!=null&&(f[this.providerOptionsName].acceptedPredictionTokens=p?.accepted_prediction_tokens),p?.rejected_prediction_tokens!=null&&(f[this.providerOptionsName].rejectedPredictionTokens=p?.rejected_prediction_tokens),{content:l,finishReason:yy(c.finish_reason),usage:{inputTokens:o.usage?.prompt_tokens??void 0,outputTokens:o.usage?.completion_tokens??void 0,totalTokens:o.usage?.total_tokens??void 0,reasoningTokens:o.usage?.completion_tokens_details?.reasoning_tokens??void 0,cachedInputTokens:o.usage?.prompt_tokens_details?.cached_tokens??void 0},providerMetadata:f,request:{body:i},response:{...vy(o),headers:a,body:s},warnings:r}}async doStream(e){let{args:t,warnings:n}=await this.getArgs({...e}),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},i=this.config.metadataExtractor?.createStreamExtractor(),{responseHeaders:a,value:o}=await Jf({url:this.config.url({path:`/chat/completions`,modelId:this.modelId}),headers:uf(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Qf(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=[],c=`unknown`,l={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0},totalTokens:void 0},u=!0,d=this.providerOptionsName,f=!1,p=!1;return{stream:o.pipeThrough(new TransformStream({start(e){e.enqueue({type:`stream-start`,warnings:n})},transform(t,n){if(e.includeRawChunks&&n.enqueue({type:`raw`,rawValue:t.rawValue}),!t.success){c=`error`,n.enqueue({type:`error`,error:t.error});return}let r=t.value;if(i?.processChunk(t.rawValue),`error`in r){c=`error`,n.enqueue({type:`error`,error:r.error.message});return}if(u&&(u=!1,n.enqueue({type:`response-metadata`,...vy(r)})),r.usage!=null){let{prompt_tokens:e,completion_tokens:t,total_tokens:n,prompt_tokens_details:i,completion_tokens_details:a}=r.usage;l.promptTokens=e??void 0,l.completionTokens=t??void 0,l.totalTokens=n??void 0,a?.reasoning_tokens!=null&&(l.completionTokensDetails.reasoningTokens=a?.reasoning_tokens),a?.accepted_prediction_tokens!=null&&(l.completionTokensDetails.acceptedPredictionTokens=a?.accepted_prediction_tokens),a?.rejected_prediction_tokens!=null&&(l.completionTokensDetails.rejectedPredictionTokens=a?.rejected_prediction_tokens),i?.cached_tokens!=null&&(l.promptTokensDetails.cachedTokens=i?.cached_tokens)}let a=r.choices[0];if(a?.finish_reason!=null&&(c=yy(a.finish_reason)),a?.delta==null)return;let o=a.delta,d=o.reasoning_content??o.reasoning;if(d&&(f||=(n.enqueue({type:`reasoning-start`,id:`reasoning-0`}),!0),n.enqueue({type:`reasoning-delta`,id:`reasoning-0`,delta:d})),o.content&&(p||=(n.enqueue({type:`text-start`,id:`txt-0`}),!0),n.enqueue({type:`text-delta`,id:`txt-0`,delta:o.content})),o.tool_calls!=null)for(let e of o.tool_calls){let t=e.index;if(s[t]==null){if(e.id==null)throw new Yr({data:e,message:`Expected 'id' to be a string.`});if(e.function?.name==null)throw new Yr({data:e,message:`Expected 'function.name' to be a string.`});n.enqueue({type:`tool-input-start`,id:e.id,toolName:e.function.name}),s[t]={id:e.id,type:`function`,function:{name:e.function.name,arguments:e.function.arguments??``},hasFinished:!1};let r=s[t];r.function?.name!=null&&r.function?.arguments!=null&&(r.function.arguments.length>0&&n.enqueue({type:`tool-input-delta`,id:r.id,delta:r.function.arguments}),Wf(r.function.arguments)&&(n.enqueue({type:`tool-input-end`,id:r.id}),n.enqueue({type:`tool-call`,toolCallId:r.id??hf(),toolName:r.function.name,input:r.function.arguments}),r.hasFinished=!0));continue}let r=s[t];r.hasFinished||(e.function?.arguments!=null&&(r.function.arguments+=e.function?.arguments??``),n.enqueue({type:`tool-input-delta`,id:r.id,delta:e.function.arguments??``}),r.function?.name!=null&&r.function?.arguments!=null&&Wf(r.function.arguments)&&(n.enqueue({type:`tool-input-end`,id:r.id}),n.enqueue({type:`tool-call`,toolCallId:r.id??hf(),toolName:r.function.name,input:r.function.arguments}),r.hasFinished=!0))}},flush(e){f&&e.enqueue({type:`reasoning-end`,id:`reasoning-0`}),p&&e.enqueue({type:`text-end`,id:`txt-0`});for(let t of s.filter(e=>!e.hasFinished))e.enqueue({type:`tool-input-end`,id:t.id}),e.enqueue({type:`tool-call`,toolCallId:t.id??hf(),toolName:t.function.name,input:t.function.arguments});let t={[d]:{},...i?.buildMetadata()};l.completionTokensDetails.acceptedPredictionTokens!=null&&(t[d].acceptedPredictionTokens=l.completionTokensDetails.acceptedPredictionTokens),l.completionTokensDetails.rejectedPredictionTokens!=null&&(t[d].rejectedPredictionTokens=l.completionTokensDetails.rejectedPredictionTokens),e.enqueue({type:`finish`,finishReason:c,usage:{inputTokens:l.promptTokens??void 0,outputTokens:l.completionTokens??void 0,totalTokens:l.totalTokens??void 0,reasoningTokens:l.completionTokensDetails.reasoningTokens??void 0,cachedInputTokens:l.promptTokensDetails.cachedTokens??void 0},providerMetadata:t})}})),request:{body:r},response:{headers:a}}}},wy=H({prompt_tokens:B().nullish(),completion_tokens:B().nullish(),total_tokens:B().nullish(),prompt_tokens_details:H({cached_tokens:B().nullish()}).nullish(),completion_tokens_details:H({reasoning_tokens:B().nullish(),accepted_prediction_tokens:B().nullish(),rejected_prediction_tokens:B().nullish()}).nullish()}).nullish(),Ty=H({id:R().nullish(),created:B().nullish(),model:R().nullish(),choices:V(H({message:H({role:U(`assistant`).nullish(),content:R().nullish(),reasoning_content:R().nullish(),reasoning:R().nullish(),tool_calls:V(H({id:R().nullish(),function:H({name:R(),arguments:R()})})).nullish()}),finish_reason:R().nullish()})),usage:wy}),Ey=e=>tu([H({id:R().nullish(),created:B().nullish(),model:R().nullish(),choices:V(H({delta:H({role:lu([`assistant`]).nullish(),content:R().nullish(),reasoning_content:R().nullish(),reasoning:R().nullish(),tool_calls:V(H({index:B(),id:R().nullish(),function:H({name:R().nullish(),arguments:R().nullish()})})).nullish()}).nullish(),finish_reason:R().nullish()})),usage:wy}),e]);H({echo:Ul().optional(),logitBias:su(R(),B()).optional(),suffix:R().optional(),user:R().optional()});var Dy=H({prompt_tokens:B(),completion_tokens:B(),total_tokens:B()});H({id:R().nullish(),created:B().nullish(),model:R().nullish(),choices:V(H({text:R(),finish_reason:R()})),usage:Dy.nullish()}),H({dimensions:B().optional(),user:R().optional()}),H({data:V(H({embedding:V(B())})),usage:H({prompt_tokens:B()}).nullish(),providerMetadata:su(R(),su(R(),ql())).optional()}),H({data:V(H({b64_json:R()}))});var Oy=e=>e==null?void 0:{deepseek:{promptCacheHitTokens:e.prompt_cache_hit_tokens??NaN,promptCacheMissTokens:e.prompt_cache_miss_tokens??NaN}},ky={extractMetadata:async({parsedBody:e})=>{let t=await Vf({value:e,schema:jy});return!t.success||t.value.usage==null?void 0:Oy(t.value.usage)},createStreamExtractor:()=>{let e;return{processChunk:async t=>{let n=await Vf({value:t,schema:My});n.success&&n.value.choices?.[0]?.finish_reason===`stop`&&n.value.usage&&(e=n.value.usage)},buildMetadata:()=>Oy(e)}}},Ay=H({prompt_cache_hit_tokens:B().nullish(),prompt_cache_miss_tokens:B().nullish()}),jy=H({usage:Ay.nullish()}),My=H({choices:V(H({finish_reason:R().nullish()})).nullish(),usage:Ay.nullish()}),Ny=`1.0.28`;function Py(e={}){let t=fm(e.baseURL??`https://api.deepseek.com/v1`),n=()=>Sf({Authorization:`Bearer ${Df({apiKey:e.apiKey,environmentVariableName:`DEEPSEEK_API_KEY`,description:`DeepSeek API key`})}`,...e.headers},`ai-sdk/deepseek/${Ny}`),r=r=>new Cy(r,{provider:`deepseek.chat`,url:({path:e})=>`${t}${e}`,headers:n,fetch:e.fetch,metadataExtractor:ky}),i=e=>r(e);return i.languageModel=r,i.chat=r,i.textEmbeddingModel=e=>{throw new ui({modelId:e,modelType:`textEmbeddingModel`})},i.imageModel=e=>{throw new ui({modelId:e,modelType:`imageModel`})},i}Py();const Fy=Py({apiKey:`sk-deb24f0d1f7347dea5234d4b38311428`})(`deepseek-chat`),Iy=({sentence:e,parent:t,prev:n,next:r,children:i})=>{let a=``;return(t||n||r||i?.length)&&(a+=`上下文包括：

`,t&&(a+=`父命题：${t}\n`),n&&(a+=`上一句：${n}\n`),r&&(a+=`下一句：${r}\n`),i&&i.length>0&&(a+=`子命题：${i.join(`
`)}\n`)),dy({model:Fy,system:`你是《逻辑哲学论》的专家，擅长分析维特根斯坦的哲学思想。而我正在阅读《逻辑哲学论》这本书，在阅读的过程中，我对其中的一些语句不太明白，我需要你为我解释这句话的意思。你只需要重点分析这句话本身，不需要进行整体总结。${a}`,prompt:`请你分析这句话的意思：${e}`})};var Ly=()=>{mr(),window.location.hash=``},Ry=_(`div`,{target:`e1x4q84a0`})(`padding:20px;position:sticky;top:0;font-size:`,Ln.fontSizeSmall,`;line-height:1.5;height:100vh;overflow-y:auto;`);const zy=()=>{let e=pr(),[t,n]=(0,y.useState)(``);return(0,y.useEffect)(()=>{(async()=>{n(``);let t=ur(),r={};t?.forEach(t=>{t.dataset.key===e&&(r.sentence=t.textContent||``),t.dataset.key.startsWith(e)&&t.dataset.key!==e&&(r.children=r.children||[],r.children.push(t.textContent||``)),t.dataset.key===e.slice(0,-1)&&(r.parent=t.textContent||``)});let{textStream:i}=Iy(r);for await(let e of i)n(t=>t+e)})()},[e]),a(Ry,{children:[i(u,{color:`default`,variant:`filled`,icon:i(ne,{}),onClick:Ly}),t?i(ie,{children:t}):i(te,{active:!0})]})};var By=_(`div`,{target:`e7mffw11`})({name:`k6r5mq`,styles:`height:100vh;overflow-y:auto`}),Vy=_(`div`,{target:`e7mffw10`})(`position:relative;padding:40px 20px;font-size:`,Ln.fontSize,`;line-height:2;white-space:pre-line;`);(0,se.createRoot)(document.body).render(i(()=>{let e=pr();yr(),(0,y.useEffect)(()=>{if(dr(document.querySelectorAll(`[data-key]`)),window.location.hash){let e=window.location.hash.slice(1),t=document.querySelector(`[data-key="${e}"]`);t&&(hr(t),t.scrollIntoView({behavior:`smooth`,block:`center`}))}},[]);let t=(0,y.useCallback)(e=>{let t=e.target.closest(`[data-key]`);t&&hr(t)},[]);return i(Xt,{left:a(By,{children:[i(_r,{}),i(Vy,{onClick:t,children:Zt.map((e,t)=>i(cr,{item:e},t))})]}),right:e&&i(zy,{}),rightProps:{defaultSize:30}})},{}));